<!-- Architecture Section -->
<section id="architecture" class="section architecture">
  <div class="container">
    <h2 class="section-title">Архитектура корпоративного уровня</h2>
    <p class="section-subtitle">On-premise развертывание, ваши данные остаются у вас</p>

    <div class="architecture-diagram-v2">

      <!-- Security Zone: On-Premise -->
      <div class="security-zone on-premise">
        <div class="zone-label">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
          <span>Ваша инфраструктура (On-Premise)</span>
        </div>

        <!-- Layer 1: Data Sources -->
        <div class="arch-layer-v2 data-sources">
          <div class="layer-header">
            <span class="layer-number">1</span>
            <h3 class="layer-title">Источники данных</h3>
          </div>
          <div class="layer-components">
            <div class="component-group">
              <div class="group-label">VCS</div>
              <div class="component-card">
                <div class="component-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6366F1" stroke-width="1.5">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
                  </svg>
                </div>
                <div class="component-info">
                  <h4>Git / GitHub / GitLab</h4>
                  <p>Код, PR/MR, коммиты</p>
                </div>
              </div>
            </div>
            <div class="component-group">
              <div class="group-label">CI/CD</div>
              <div class="component-card">
                <div class="component-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#10B981" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                  </svg>
                </div>
                <div class="component-info">
                  <h4>GitLab CI / Jenkins</h4>
                  <p>Build статусы, логи</p>
                </div>
              </div>
            </div>
            <div class="component-group">
              <div class="group-label">PM</div>
              <div class="component-card">
                <div class="component-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#0EA5E9" stroke-width="1.5">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5"/>
                    <path d="M2 12l10 5 10-5"/>
                  </svg>
                </div>
                <div class="component-info">
                  <h4>Jira / YouTrack</h4>
                  <p>Задачи, контекст</p>
                </div>
              </div>
            </div>
            <div class="component-group">
              <div class="group-label">Docs</div>
              <div class="component-card">
                <div class="component-icon">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#F59E0B" stroke-width="1.5">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                  </svg>
                </div>
                <div class="component-info">
                  <h4>Confluence</h4>
                  <p>Документация</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Data Flow Arrow -->
        <div class="data-flow-arrow">
          <svg viewBox="0 0 24 40" width="24" height="40" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 0v32"/>
            <path d="M6 26l6 8 6-8"/>
          </svg>
          <span class="flow-label">Pull / Sync</span>
        </div>

        <!-- Layer 2: Processing -->
        <div class="arch-layer-v2 processing">
          <div class="layer-header">
            <span class="layer-number">2</span>
            <h3 class="layer-title">Обработка и хранение</h3>
          </div>

          <!-- CodeGraph Server -->
          <div class="server-block">
            <div class="server-header">
              <img src="assets/svg/logo-compact.svg" alt="CodeGraph" width="24" height="24">
              <h4>CodeGraph Server</h4>
              <span class="server-tech">Python 3.10+ / Docker</span>
            </div>
            <div class="server-modules">
              <div class="module-card">
                <span class="module-name">Парсер</span>
                <span class="module-desc">Извлечение AST</span>
              </div>
              <div class="module-card">
                <span class="module-name">Индексатор</span>
                <span class="module-desc">Построение графа</span>
              </div>
              <div class="module-card">
                <span class="module-name">Движок запросов</span>
                <span class="module-desc">SQL/PGQ</span>
              </div>
              <div class="module-card">
                <span class="module-name">Ретривер</span>
                <span class="module-desc">Гибридный поиск</span>
              </div>
            </div>
          </div>

          <!-- Storage -->
          <div class="storage-row">
            <div class="storage-card duckdb">
              <div class="storage-icon">
                <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="#F59E0B" stroke-width="1.5">
                  <ellipse cx="12" cy="6" rx="8" ry="3"/>
                  <path d="M4 6v12c0 1.66 3.58 3 8 3s8-1.34 8-3V6"/>
                  <path d="M4 12c0 1.66 3.58 3 8 3s8-1.34 8-3"/>
                </svg>
              </div>
              <div class="storage-info">
                <h4>DuckDB CPG</h4>
                <ul class="storage-stats">
                  <li>52K методов</li>
                  <li>111K связей</li>
                  <li>AST, CFG, DDG</li>
                </ul>
              </div>
            </div>
            <div class="storage-connector">
              <span>Hybrid</span>
            </div>
            <div class="storage-card chromadb">
              <div class="storage-icon">
                <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="#8B5CF6" stroke-width="1.5">
                  <circle cx="12" cy="12" r="3"/>
                  <circle cx="12" cy="12" r="7" stroke-dasharray="4 2"/>
                  <circle cx="12" cy="12" r="10"/>
                </svg>
              </div>
              <div class="storage-info">
                <h4>ChromaDB</h4>
                <ul class="storage-stats">
                  <li>250K+ документов</li>
                  <li>Векторные эмбединги</li>
                  <li>Семантический поиск</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

      </div><!-- End On-Premise Zone -->

      <!-- Data Flow Arrow to LLM -->
      <div class="data-flow-arrow external-flow">
        <svg viewBox="0 0 24 40" width="24" height="40" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 0v32"/>
          <path d="M6 26l6 8 6-8"/>
        </svg>
        <span class="flow-label">HTTPS / Промпты</span>
        <span class="flow-badge secure">Код не передается</span>
      </div>

      <!-- Security Zone: External -->
      <div class="security-zone external">
        <div class="zone-label">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <span>LLM провайдер (опционально)</span>
        </div>

        <!-- Layer 3: LLM -->
        <div class="arch-layer-v2 llm-layer">
          <div class="layer-header">
            <span class="layer-number">3</span>
            <h3 class="layer-title">Генерация ответов</h3>
          </div>
          <div class="llm-options">
            <div class="llm-card gigachat recommended">
              <span class="recommended-badge">Рекомендуется</span>
              <div class="llm-icon">
                <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="#10B981" stroke-width="1.5">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <h4>GigaChat API</h4>
              <p>Данные не покидают РФ</p>
              <div class="llm-badges">
                <span class="badge">152-ФЗ</span>
                <span class="badge">ГОСТ Р</span>
              </div>
            </div>
            <div class="llm-separator">
              <span>или</span>
            </div>
            <div class="llm-card yandex-ai">
              <div class="llm-icon">
                <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="#FF5C5C" stroke-width="1.5">
                  <rect x="2" y="3" width="20" height="14" rx="2"/>
                  <path d="M8 21h8M12 17v4"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
              </div>
              <h4>Yandex AI Studio</h4>
              <p>262K контекст (Qwen3-235B)</p>
              <div class="llm-badges">
                <span class="badge">152-ФЗ</span>
                <span class="badge">Yandex Cloud</span>
              </div>
            </div>
            <div class="llm-separator">
              <span>или</span>
            </div>
            <div class="llm-card local-llm">
              <div class="llm-icon">
                <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="#8B5CF6" stroke-width="1.5">
                  <rect x="2" y="3" width="20" height="14" rx="2"/>
                  <path d="M8 21h8M12 17v4"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
              </div>
              <h4>Локальная LLM</h4>
              <p>Air-gapped развертывание</p>
              <div class="llm-badges">
                <span class="badge">DeepSeek</span>
                <span class="badge">Qwen 3</span>
              </div>
            </div>
          </div>
        </div>
      </div><!-- End External Zone -->

      <!-- Data Flow Arrow to Output -->
      <div class="data-flow-arrow">
        <svg viewBox="0 0 24 40" width="24" height="40" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 0v32"/>
          <path d="M6 26l6 8 6-8"/>
        </svg>
        <span class="flow-label">Сгенерированные ответы</span>
      </div>

      <!-- Layer 4: Output -->
      <div class="security-zone on-premise output-zone">
        <div class="arch-layer-v2 output">
          <div class="layer-header">
            <span class="layer-number">4</span>
            <h3 class="layer-title">Результат</h3>
          </div>
          <div class="output-options">
            <div class="output-card">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="4 17 10 11 4 5"/>
                <line x1="12" y1="19" x2="20" y2="19"/>
              </svg>
              <span>TUI / CLI</span>
            </div>
            <div class="output-card">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
              <span>REST API</span>
            </div>
            <div class="output-card">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span>Комментарии к PR</span>
            </div>
            <div class="output-card">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
              <span>Отчёты</span>
            </div>
          </div>
        </div>
      </div>

    </div><!-- End architecture-diagram-v2 -->

    <!-- Enterprise Features - Structured -->
    <div class="enterprise-features-v2">
      <h3>Безопасность корпоративного уровня</h3>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">Единственное решение на рынке с полным набором корпоративных функций</p>
      <div class="features-grid-v2">
        <div class="feature-category">
          <div class="category-icon security">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
          </div>
          <h4>Защита от утечки данных (DLP)</h4>
          <ul>
            <li><strong>25+ паттернов</strong> обнаружения</li>
            <li>Секреты, ПДн, Исходный код</li>
            <li>Pre-request + Post-response</li>
            <li>Block / Mask / Warn / Log</li>
          </ul>
        </div>
        <div class="feature-category">
          <div class="category-icon access">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
          </div>
          <h4>Разграничение доступа (RBAC)</h4>
          <ul>
            <li><strong>4 роли, 21 разрешение</strong></li>
            <li>JWT + API Keys</li>
            <li>OAuth2/OIDC (GitHub, GitLab)</li>
            <li>LDAP / Active Directory</li>
          </ul>
        </div>
        <div class="feature-category">
          <div class="category-icon reliability">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <h4>Интеграция с SIEM</h4>
          <ul>
            <li><strong>3 формата:</strong> Syslog, CEF, LEEF</li>
            <li>ArcSight, QRadar, Splunk</li>
            <li>События в реальном времени</li>
            <li>Полный журнал аудита</li>
          </ul>
        </div>
        <div class="feature-category">
          <div class="category-icon compliance">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <h4>HashiCorp Vault</h4>
          <ul>
            <li>Централизованные секреты</li>
            <li>Автоматическая ротация ключей API</li>
            <li>AppRole, Kubernetes auth</li>
            <li>TTL caching</li>
          </ul>
        </div>
        <div class="feature-category">
          <div class="category-icon security">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          </div>
          <h4>Верифицированные уязвимости</h4>
          <ul>
            <li><strong>100% обнаружение CVE</strong></li>
            <li>60%+ снижение ложных срабатываний</li>
            <li>Многокритериальная оценка</li>
            <li>Маппинг CWE/CAPEC</li>
          </ul>
        </div>
        <div class="feature-category">
          <div class="category-icon compliance">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <path d="M3 9h18"/>
              <path d="M9 21V9"/>
            </svg>
          </div>
          <h4>Соответствие стандартам</h4>
          <ul>
            <li>152-ФЗ ready</li>
            <li>ГОСТ Р 57580</li>
            <li>On-premise / Air-gapped</li>
            <li>GigaChat / Yandex AI (данные в РФ)</li>
          </ul>
        </div>
      </div>

      <!-- Competitive Advantages -->
      <div style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); border-radius: 16px; text-align: center;">
        <h4 style="margin-bottom: 1.5rem; color: var(--text-primary);">Уникальные преимущества vs конкуренты</h4>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem;">
          <span style="background: rgba(16, 185, 129, 0.2); color: #10B981; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 500;">Единственный с DLP</span>
          <span style="background: rgba(16, 185, 129, 0.2); color: #10B981; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 500;">Единственный с SIEM</span>
          <span style="background: rgba(16, 185, 129, 0.2); color: #10B981; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 500;">Единственный с Vault</span>
          <span style="background: rgba(16, 185, 129, 0.2); color: #10B981; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 500;">Единственный с верификацией уязвимостей</span>
        </div>
        <p style="margin-top: 1.5rem; font-size: 14px; color: var(--text-secondary);">
          <a href="docs/ru/enterprise/COMPETITIVE_MATRIX.html#svodnaya-tablitsa-sravneniya" style="color: #6366F1;">Подробная сравнительная матрица →</a>
        </p>
      </div>
    </div>

  </div>
</section>
