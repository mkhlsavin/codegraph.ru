<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: Agents Reference">
  <meta name="keywords" content="CodeGraph, documentation, reference">

  <meta property="og:title" content="Agents Reference - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: Agents Reference">
  <meta property="og:type" content="article">

  <title>Agents Reference - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Integrations</a></li>
        <li><a href="../index.html" class="nav-link active">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/reference/AGENTS.html" class="active">EN</a>
          <a href="../../ru/reference/AGENTS.html" class="">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Request Demo</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Integrations</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Request Demo</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Getting Started</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Overview</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Configuration Guide</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Installation Guide</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">User Guides</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../guides/index.html">Overview</a></li>
        <li><a href="../guides/BENCHMARK_GUIDE.html">Benchmark Framework Guide</a></li>
        <li><a href="../guides/CLI_GUIDE.html">CLI Guide</a></li>
        <li><a href="../guides/CODE_REVIEW.html">Automated Code Review</a></li>
        <li><a href="../guides/CPG_EXPORT.html">CPG Export Guide</a></li>
        <li><a href="../guides/MONITORING.html">Monitoring Guide</a></li>
        <li><a href="../guides/PROGRAMMATIC_GUIDE.html">User Guide</a></li>
        <li><a href="../guides/PROJECT_IMPORT.html">Importing a New Codebase</a></li>
        <li><a href="../guides/QUICK_REFERENCE.html">CodeGraph Quick Reference</a></li>
        <li><a href="../guides/REFACTORING.html">Refactoring Analysis Guide</a></li>
        <li><a href="../guides/SCENARIOS.html">Workflow Scenarios Guide</a></li>
        <li><a href="../guides/TROUBLESHOOTING.html">Troubleshooting Guide</a></li>
        <li><a href="../guides/TUI_USER_GUIDE.html">CodeGraph User Guide</a></li>
        <li><a href="../guides/01-onboarding.html">Scenario 01: Developer Onboarding</a></li>
        <li><a href="../guides/02-security-audit.html">Scenario 02: Security Audit</a></li>
        <li><a href="../guides/03-documentation.html">Scenario 03: Documentation Generation</a></li>
        <li><a href="../guides/04-feature-development.html">Scenario 04: Feature Development</a></li>
        <li><a href="../guides/05-refactoring.html">Scenario 05: Refactoring</a></li>
        <li><a href="../guides/06-performance.html">Scenario 06: Performance Analysis</a></li>
        <li><a href="../guides/07-test-coverage.html">Scenario 07: Test Coverage</a></li>
        <li><a href="../guides/08-compliance.html">Scenario 08: Compliance Checking</a></li>
        <li><a href="../guides/09-code-review.html">Scenario 09: Code Review</a></li>
        <li><a href="../guides/10-cross-repo.html">Scenario 10: Cross-Repository Analysis</a></li>
        <li><a href="../guides/11-architecture.html">Scenario 11: Architecture Analysis</a></li>
        <li><a href="../guides/12-tech-debt.html">Scenario 12: Tech Debt Assessment</a></li>
        <li><a href="../guides/13-mass-refactoring.html">Scenario 13: Mass Refactoring</a></li>
        <li><a href="../guides/14-incident-response.html">Scenario 14: Security Incident Response</a></li>
        <li><a href="../guides/15-debugging.html">Scenario 15: Debugging Assistance</a></li>
        <li><a href="../guides/16-entry-points.html">Scenario 16: Entry Point Discovery</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../api/index.html">Overview</a></li>
        <li><a href="../api/REST_API.html">CodeGraph REST API Documentation</a></li>
        <li><a href="../api/WEBSOCKET_API.html">WebSocket API Reference</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Integrations</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Overview</a></li>
        <li><a href="../integrations/GIGACHAT.html">GigaChat Integration Guide</a></li>
        <li><a href="../integrations/YANDEX_AI_STUDIO.html">Yandex AI Studio Integration Guide</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Technical Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Overview</a></li>
        <li><a href="AGENTS.html" class="active">Agents Reference</a></li>
        <li><a href="ANALYSIS_MODULES.html">Analysis Modules Reference</a></li>
        <li><a href="API.html">API Reference</a></li>
        <li><a href="HYPOTHESIS_SYSTEM.html">Hypothesis System Reference</a></li>
        <li><a href="SCHEMA.html">DuckDB CPG Schema Design (CPG Spec v1.1)</a></li>
        <li><a href="SECURITY.html">Enterprise Security Module</a></li>
        <li><a href="SQL_QUERY_COOKBOOK.html">SQL Query Cookbook for DuckDB CPG</a></li>
        <li><a href="WORKFLOWS.html">Workflows Reference</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Overview</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Documentation</a>
        <span>/</span>
        <a href="index.html">Technical Reference</a>
        <span>/</span>
        <span>Agents Reference</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>Agents Reference</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="agents-reference">Agents Reference<a class="heading-anchor" href="#agents-reference" title="Link to this section">&para;</a></h1>
<p>Detailed documentation for CodeGraph&rsquo;s 13 specialized agents.</p>
<h2 id="table-of-contents">Table of Contents<a class="heading-anchor" href="#table-of-contents" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#agent-architecture">Agent Architecture</a></li>
<li><a href="#core-agents">Core Agents</a></li>
<li><a href="#1-analyzeragent">1. AnalyzerAgent</a></li>
<li><a href="#2-retrieveragent">2. RetrieverAgent</a></li>
<li><a href="#3-enrichmentagent">3. EnrichmentAgent</a></li>
<li><a href="#4-generatoragent">4. GeneratorAgent</a></li>
<li><a href="#5-interpreteragent">5. InterpreterAgent</a></li>
<li><a href="#specialized-agents">Specialized Agents</a></li>
<li><a href="#6-callchainanalyzer">6. CallChainAnalyzer</a></li>
<li><a href="#7-logicsynthesizer">7. LogicSynthesizer</a></li>
<li><a href="#8-controlflowgenerator">8. ControlFlowGenerator</a></li>
<li><a href="#9-adaptiverefiner">9. AdaptiveRefiner</a></li>
<li><a href="#10-fallbackstrategies">10. FallbackStrategies</a></li>
<li><a href="#domain-specific-agents">Domain-Specific Agents</a></li>
<li><a href="#11-securityagent">11. SecurityAgent</a></li>
<li><a href="#12-performanceagent">12. PerformanceAgent</a></li>
<li><a href="#13-architectureagent">13. ArchitectureAgent</a></li>
<li><a href="#agent-communication">Agent Communication</a></li>
<li><a href="#adding-custom-agents">Adding Custom Agents</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul>
<h2 id="agent-architecture">Agent Architecture<a class="heading-anchor" href="#agent-architecture" title="Link to this section">&para;</a></h2>
<div class="highlight"><pre><span></span><code>Question → AnalyzerAgent → RetrieverAgent → EnrichmentAgent → GeneratorAgent → InterpreterAgent → Answer
              ↓                  ↓                ↓                 ↓                ↓
         Intent/Domain    Hybrid Search    Semantic Tags      Query Gen       Answer Synth
</code></pre></div>

<h2 id="core-agents">Core Agents<a class="heading-anchor" href="#core-agents" title="Link to this section">&para;</a></h2>
<h3 id="1-analyzeragent">1. AnalyzerAgent<a class="heading-anchor" href="#1-analyzeragent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Question understanding and intent extraction</p>
<p><strong>Location:</strong> <code>src/agents/analyzer_agent.py</code></p>
<p><strong>Responsibilities:</strong>
- Extract user intent from natural language
- Identify target domain/subsystem
- Extract relevant keywords
- Classify query type (semantic/structural/security)</p>
<p><strong>Configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.analyzer_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnalyzerAgent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">CPGConfig</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">CPGConfig</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_cpg_type</span><span class="p">(</span><span class="s2">&quot;postgresql&quot;</span><span class="p">)</span>

<span class="n">analyzer</span> <span class="o">=</span> <span class="n">AnalyzerAgent</span><span class="p">(</span>
    <span class="n">vector_store</span><span class="o">=</span><span class="n">vector_store</span><span class="p">,</span>
    <span class="n">cpg_config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Key Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Analyze a question</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="s2">&quot;What methods handle transactions?&quot;</span><span class="p">)</span>

<span class="c1"># Result structure</span>
<span class="p">{</span>
    <span class="s1">&#39;intent&#39;</span><span class="p">:</span> <span class="s1">&#39;find_methods&#39;</span><span class="p">,</span>           <span class="c1"># What user wants</span>
    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="s1">&#39;transaction-manager&#39;</span><span class="p">,</span>    <span class="c1"># Target subsystem</span>
    <span class="s1">&#39;keywords&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;transaction&#39;</span><span class="p">],</span>        <span class="c1"># Important terms</span>
    <span class="s1">&#39;query_type&#39;</span><span class="p">:</span> <span class="s1">&#39;semantic&#39;</span><span class="p">,</span>           <span class="c1"># Query classification</span>
    <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="mf">0.85</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="2-retrieveragent">2. RetrieverAgent<a class="heading-anchor" href="#2-retrieveragent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Hybrid retrieval combining semantic and structural search</p>
<p><strong>Location:</strong> <code>src/agents/retriever_agent.py</code></p>
<p><strong>Responsibilities:</strong>
- Parallel async vector + graph search
- RRF-based result merging
- Cross-source ranking
- Result caching</p>
<p><strong>Configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.retriever_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">RetrieverAgent</span>

<span class="n">retriever</span> <span class="o">=</span> <span class="n">RetrieverAgent</span><span class="p">(</span>
    <span class="n">vector_store</span><span class="o">=</span><span class="n">vector_store</span><span class="p">,</span>
    <span class="n">analyzer_agent</span><span class="o">=</span><span class="n">analyzer</span><span class="p">,</span>
    <span class="n">cpg_service</span><span class="o">=</span><span class="n">cpg_service</span><span class="p">,</span>
    <span class="n">enable_hybrid</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Key Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Hybrid retrieval</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">retriever</span><span class="o">.</span><span class="n">retrieve_hybrid</span><span class="p">(</span>
    <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Find memory allocation patterns&quot;</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;hybrid&quot;</span><span class="p">,</span>           <span class="c1"># hybrid, vector_only, graph_only</span>
    <span class="n">query_type</span><span class="o">=</span><span class="s2">&quot;structural&quot;</span><span class="p">,</span> <span class="c1"># Affects weight distribution</span>
    <span class="n">top_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">use_ranker</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Result structure</span>
<span class="p">{</span>
    <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>             <span class="c1"># Raw retrieval results</span>
    <span class="s1">&#39;ranked_results&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>      <span class="c1"># Ranked with scores</span>
    <span class="s1">&#39;retrieval_stats&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;total_retrieved&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="s1">&#39;source_distribution&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;vector&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;graph&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Weight Adaptation:</strong>
| Query Type | Vector Weight | Graph Weight |
|------------|---------------|--------------|
| semantic | 0.75 | 0.25 |
| structural | 0.25 | 0.75 |
| security | 0.50 | 0.50 |</p>
<hr />
<h3 id="3-enrichmentagent">3. EnrichmentAgent<a class="heading-anchor" href="#3-enrichmentagent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Add semantic metadata to CPG nodes</p>
<p><strong>Location:</strong> <code>src/agents/enrichment_agent.py</code></p>
<p><strong>Responsibilities:</strong>
- 12-layer semantic enrichment
- Domain concept tagging
- ACID property detection
- Security attribute annotation</p>
<p><strong>Configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.enrichment_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">EnrichmentAgent</span>

<span class="n">enrichment</span> <span class="o">=</span> <span class="n">EnrichmentAgent</span><span class="p">()</span>
</code></pre></div>

<p><strong>Enrichment Layers:</strong>
1. Architectural layer (access-method, storage-engine, etc.)
2. ACID properties
3. Concurrency patterns
4. Performance indicators
5. Security attributes
6. Error handling patterns
7. Memory management
8. Lock primitives
9. Transaction boundaries
10. Data flow categories
11. Control flow patterns
12. Domain-specific concepts</p>
<p><strong>Key Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Enrich a method</span>
<span class="n">enriched</span> <span class="o">=</span> <span class="n">enrichment</span><span class="o">.</span><span class="n">enrich_method</span><span class="p">({</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;LWLockAcquire&#39;</span><span class="p">,</span>
    <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;lwlock.c&#39;</span><span class="p">,</span>
    <span class="s1">&#39;signature&#39;</span><span class="p">:</span> <span class="s1">&#39;void LWLockAcquire(LWLock *lock, LWLockMode mode)&#39;</span>
<span class="p">})</span>

<span class="c1"># Result</span>
<span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;LWLockAcquire&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;concurrency&#39;</span><span class="p">,</span> <span class="s1">&#39;lock-acquire&#39;</span><span class="p">,</span> <span class="s1">&#39;synchronization&#39;</span><span class="p">],</span>
    <span class="s1">&#39;layer&#39;</span><span class="p">:</span> <span class="s1">&#39;concurrency-primitive&#39;</span><span class="p">,</span>
    <span class="s1">&#39;security&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;thread-safe&#39;</span><span class="p">],</span>
    <span class="s1">&#39;performance&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;blocking-operation&#39;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="4-generatoragent">4. GeneratorAgent<a class="heading-anchor" href="#4-generatoragent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Generate queries from natural language</p>
<p><strong>Location:</strong> <code>src/agents/generator_agent.py</code></p>
<p><strong>Responsibilities:</strong>
- SQL query generation for CPG database
- Template matching
- Query optimization</p>
<p><strong>Configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.generator_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeneratorAgent</span>

<span class="n">generator</span> <span class="o">=</span> <span class="n">GeneratorAgent</span><span class="p">(</span>
    <span class="n">vector_store</span><span class="o">=</span><span class="n">vector_store</span><span class="p">,</span>
    <span class="n">cpg_config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Key Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Generate query from question</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">generate_query</span><span class="p">(</span>
    <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Find all callers of CommitTransaction&quot;</span><span class="p">,</span>
    <span class="n">analysis</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;intent&#39;</span><span class="p">:</span> <span class="s1">&#39;find_callers&#39;</span><span class="p">,</span> <span class="s1">&#39;keywords&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;CommitTransaction&#39;</span><span class="p">]},</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span>  <span class="c1"># Retrieved examples</span>
<span class="p">)</span>

<span class="c1"># Returns SQL query</span>
<span class="c1"># &quot;SELECT caller.full_name FROM edges_call ec JOIN nodes_method caller...&quot;</span>
</code></pre></div>

<hr />
<h3 id="5-interpreteragent">5. InterpreterAgent<a class="heading-anchor" href="#5-interpreteragent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Convert results to natural language answers</p>
<p><strong>Location:</strong> <code>src/agents/interpreter_agent.py</code></p>
<p><strong>Responsibilities:</strong>
- Result synthesis
- Confidence scoring
- Source attribution
- Answer formatting</p>
<p><strong>Configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.interpreter_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">InterpreterAgent</span>

<span class="n">interpreter</span> <span class="o">=</span> <span class="n">InterpreterAgent</span><span class="p">(</span>
    <span class="n">llm_interface</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">cpg_config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Key Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Interpret results</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">interpreter</span><span class="o">.</span><span class="n">interpret</span><span class="p">(</span>
    <span class="n">question</span><span class="o">=</span><span class="s2">&quot;What methods call LWLockAcquire?&quot;</span><span class="p">,</span>
    <span class="n">results</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="n">query</span><span class="o">=</span><span class="s2">&quot;SELECT...&quot;</span>
<span class="p">)</span>

<span class="c1"># Result</span>
<span class="p">{</span>
    <span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="s1">&#39;LWLockAcquire is called by 15 methods including...&#39;</span><span class="p">,</span>
    <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span>
    <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;heap_insert&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;heapam.c&#39;</span><span class="p">,</span> <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="mi">234</span><span class="p">},</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="specialized-agents">Specialized Agents<a class="heading-anchor" href="#specialized-agents" title="Link to this section">&para;</a></h2>
<h3 id="6-callchainanalyzer">6. CallChainAnalyzer<a class="heading-anchor" href="#6-callchainanalyzer" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Analyze function call dependencies</p>
<p><strong>Location:</strong> <code>src/agents/call_chain_analyzer.py</code></p>
<p><strong>Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.call_chain_analyzer</span><span class="w"> </span><span class="kn">import</span> <span class="n">CallChainAnalyzer</span>

<span class="n">analyzer</span> <span class="o">=</span> <span class="n">CallChainAnalyzer</span><span class="p">(</span><span class="n">cpg_service</span><span class="p">)</span>

<span class="c1"># Find call chain</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">find_chain</span><span class="p">(</span>
    <span class="n">source</span><span class="o">=</span><span class="s2">&quot;executor_start&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;heap_insert&quot;</span><span class="p">,</span>
    <span class="n">max_depth</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</code></pre></div>

<hr />
<h3 id="7-logicsynthesizer">7. LogicSynthesizer<a class="heading-anchor" href="#7-logicsynthesizer" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Synthesize explanations for complex logic</p>
<p><strong>Location:</strong> <code>src/agents/logic_synthesizer.py</code></p>
<p><strong>Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.logic_synthesizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogicSynthesizer</span>

<span class="n">synthesizer</span> <span class="o">=</span> <span class="n">LogicSynthesizer</span><span class="p">(</span><span class="n">llm</span><span class="p">)</span>

<span class="c1"># Explain logic</span>
<span class="n">explanation</span> <span class="o">=</span> <span class="n">synthesizer</span><span class="o">.</span><span class="n">explain_function</span><span class="p">(</span>
    <span class="n">function_name</span><span class="o">=</span><span class="s2">&quot;CommitTransaction&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="n">retrieved_context</span>
<span class="p">)</span>
</code></pre></div>

<hr />
<h3 id="8-controlflowgenerator">8. ControlFlowGenerator<a class="heading-anchor" href="#8-controlflowgenerator" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Generate control flow explanations</p>
<p><strong>Location:</strong> <code>src/agents/control_flow_generator.py</code></p>
<hr />
<h3 id="9-adaptiverefiner">9. AdaptiveRefiner<a class="heading-anchor" href="#9-adaptiverefiner" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Refine queries based on execution feedback</p>
<p><strong>Location:</strong> <code>src/agents/adaptive_refiner.py</code></p>
<p><strong>Methods:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.adaptive_refiner</span><span class="w"> </span><span class="kn">import</span> <span class="n">AdaptiveRefiner</span>

<span class="n">refiner</span> <span class="o">=</span> <span class="n">AdaptiveRefiner</span><span class="p">()</span>

<span class="c1"># Refine failed query</span>
<span class="n">refined</span> <span class="o">=</span> <span class="n">refiner</span><span class="o">.</span><span class="n">refine_query</span><span class="p">(</span>
    <span class="n">original_query</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">error</span><span class="o">=</span><span class="s2">&quot;No results found&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="n">analysis</span>
<span class="p">)</span>
</code></pre></div>

<hr />
<h3 id="10-fallbackstrategies">10. FallbackStrategies<a class="heading-anchor" href="#10-fallbackstrategies" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Handle errors and provide fallback behavior</p>
<p><strong>Location:</strong> <code>src/agents/fallback_strategies.py</code></p>
<hr />
<h2 id="domain-specific-agents">Domain-Specific Agents<a class="heading-anchor" href="#domain-specific-agents" title="Link to this section">&para;</a></h2>
<h3 id="11-securityagent">11. SecurityAgent<a class="heading-anchor" href="#11-securityagent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Security vulnerability detection</p>
<p><strong>Location:</strong> <code>src/security/security_agents.py</code></p>
<p><strong>Patterns Detected:</strong>
- SQL Injection (CWE-89)
- Buffer Overflow (CWE-120)
- Command Injection (CWE-78)
- Format String (CWE-134)</p>
<hr />
<h3 id="12-performanceagent">12. PerformanceAgent<a class="heading-anchor" href="#12-performanceagent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Performance bottleneck detection</p>
<p><strong>Location:</strong> <code>src/performance/performance_agents.py</code></p>
<p><strong>Metrics:</strong>
- Cyclomatic complexity
- Loop nesting depth
- Function length
- Memory allocation patterns</p>
<hr />
<h3 id="13-architectureagent">13. ArchitectureAgent<a class="heading-anchor" href="#13-architectureagent" title="Link to this section">&para;</a></h3>
<p><strong>Purpose:</strong> Architectural pattern analysis</p>
<p><strong>Location:</strong> <code>src/architecture/architecture_agents.py</code></p>
<p><strong>Analysis:</strong>
- Layer boundaries
- Module dependencies
- Design pattern detection
- Subsystem mapping</p>
<hr />
<h2 id="agent-communication">Agent Communication<a class="heading-anchor" href="#agent-communication" title="Link to this section">&para;</a></h2>
<p>Agents communicate through a shared state:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AgentState</span><span class="p">:</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">analysis</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">retrieval_results</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">enrichments</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">generated_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">execution_results</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">answer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">errors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div>

<h2 id="adding-custom-agents">Adding Custom Agents<a class="heading-anchor" href="#adding-custom-agents" title="Link to this section">&para;</a></h2>
<p>Create a new agent by extending the base pattern:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomAgent</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpg_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">CPGConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpg_config</span> <span class="o">=</span> <span class="n">cpg_config</span> <span class="ow">or</span> <span class="n">get_global_cpg_config</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">AgentState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AgentState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process state and return updated state.&quot;&quot;&quot;</span>
        <span class="c1"># Your logic here</span>
        <span class="n">state</span><span class="o">.</span><span class="n">custom_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analyze</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">question</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal analysis method.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>

<p>Register in workflow:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.workflow</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_agent</span>

<span class="n">register_agent</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">CustomAgent</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="next-steps">Next Steps<a class="heading-anchor" href="#next-steps" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="WORKFLOWS.html">Workflows Reference</a> - Workflow orchestration</li>
<li><a href="API.html">API Reference</a> - Complete API documentation</li>
</ul>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="SQL_QUERY_COOKBOOK.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Previous</span>
        <span class="doc-page-nav-title">SQL Query Cookbook for DuckDB CPG</span>
      </a>

      <a href="WORKFLOWS.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Next</span>
        <span class="doc-page-nav-title">Workflows Reference</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Last updated: 2025-12-27</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/reference/AGENTS.md" target="_blank" rel="noopener">Edit on GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">On this page</div>
      <ul class="doc-toc-list">
        <li><a href="#agents-reference" class="level-1">Agents Reference</a></li>
<li><a href="#table-of-contents" class="level-2">Table of Contents</a></li>
<li><a href="#agent-architecture" class="level-2">Agent Architecture</a></li>
<li><a href="#core-agents" class="level-2">Core Agents</a></li>
<li><a href="#1-analyzeragent" class="level-3">1. AnalyzerAgent</a></li>
<li><a href="#analyze-a-question" class="level-1">Analyze a question</a></li>
<li><a href="#result-structure" class="level-1">Result structure</a></li>
<li><a href="#2-retrieveragent" class="level-3">2. RetrieverAgent</a></li>
<li><a href="#hybrid-retrieval" class="level-1">Hybrid retrieval</a></li>
<li><a href="#result-structure" class="level-1">Result structure</a></li>
<li><a href="#3-enrichmentagent" class="level-3">3. EnrichmentAgent</a></li>
<li><a href="#enrich-a-method" class="level-1">Enrich a method</a></li>
<li><a href="#result" class="level-1">Result</a></li>
<li><a href="#4-generatoragent" class="level-3">4. GeneratorAgent</a></li>
<li><a href="#generate-query-from-question" class="level-1">Generate query from question</a></li>
<li><a href="#returns-sql-query" class="level-1">Returns SQL query</a></li>
<li><a href="#select-callerfull-name-from-edges-call-ec-join-nodes-method-caller" class="level-1">"SELECT caller.full_name FROM edges_call ec JOIN nodes_method caller..."</a></li>
<li><a href="#5-interpreteragent" class="level-3">5. InterpreterAgent</a></li>
<li><a href="#interpret-results" class="level-1">Interpret results</a></li>
<li><a href="#result" class="level-1">Result</a></li>
<li><a href="#specialized-agents" class="level-2">Specialized Agents</a></li>
<li><a href="#6-callchainanalyzer" class="level-3">6. CallChainAnalyzer</a></li>
<li><a href="#find-call-chain" class="level-1">Find call chain</a></li>
<li><a href="#7-logicsynthesizer" class="level-3">7. LogicSynthesizer</a></li>
<li><a href="#explain-logic" class="level-1">Explain logic</a></li>
<li><a href="#8-controlflowgenerator" class="level-3">8. ControlFlowGenerator</a></li>
<li><a href="#9-adaptiverefiner" class="level-3">9. AdaptiveRefiner</a></li>
<li><a href="#refine-failed-query" class="level-1">Refine failed query</a></li>
<li><a href="#10-fallbackstrategies" class="level-3">10. FallbackStrategies</a></li>
<li><a href="#domain-specific-agents" class="level-2">Domain-Specific Agents</a></li>
<li><a href="#11-securityagent" class="level-3">11. SecurityAgent</a></li>
<li><a href="#12-performanceagent" class="level-3">12. PerformanceAgent</a></li>
<li><a href="#13-architectureagent" class="level-3">13. ArchitectureAgent</a></li>
<li><a href="#agent-communication" class="level-2">Agent Communication</a></li>
<li><a href="#adding-custom-agents" class="level-2">Adding Custom Agents</a></li>
<li><a href="#next-steps" class="level-2">Next Steps</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI copilot for source code analysis</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Product</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Features</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Integrations</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Documentation</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Getting Started</a></li>
              <li><a href="../guides/index.html" class="footer-link">Guides</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Resources</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Contacts</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
