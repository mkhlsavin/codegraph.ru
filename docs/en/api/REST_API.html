<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: CodeGraph REST API Documentation">
  <meta name="keywords" content="CodeGraph, documentation, api">

  <meta property="og:title" content="CodeGraph REST API Documentation - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: CodeGraph REST API Documentation">
  <meta property="og:type" content="article">

  <title>CodeGraph REST API Documentation - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Integrations</a></li>
        <li><a href="../index.html" class="nav-link active">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/api/REST_API.html" class="active">EN</a>
          <a href="../../ru/api/REST_API.html" class="">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Request Demo</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Integrations</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Request Demo</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Getting Started</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Overview</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Configuration Guide</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Installation Guide</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">User Guides</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../guides/index.html">Overview</a></li>
        <li><a href="../guides/BENCHMARK_GUIDE.html">Benchmark Framework Guide</a></li>
        <li><a href="../guides/CLI_GUIDE.html">CLI Guide</a></li>
        <li><a href="../guides/CODE_REVIEW.html">Automated Code Review</a></li>
        <li><a href="../guides/CPG_EXPORT.html">CPG Export Guide</a></li>
        <li><a href="../guides/MONITORING.html">Monitoring Guide</a></li>
        <li><a href="../guides/PROGRAMMATIC_GUIDE.html">User Guide</a></li>
        <li><a href="../guides/PROJECT_IMPORT.html">Importing a New Codebase</a></li>
        <li><a href="../guides/QUICK_REFERENCE.html">CodeGraph Quick Reference</a></li>
        <li><a href="../guides/REFACTORING.html">Refactoring Analysis Guide</a></li>
        <li><a href="../guides/SCENARIOS.html">Workflow Scenarios Guide</a></li>
        <li><a href="../guides/TROUBLESHOOTING.html">Troubleshooting Guide</a></li>
        <li><a href="../guides/TUI_USER_GUIDE.html">CodeGraph User Guide</a></li>
        <li><a href="../guides/01-onboarding.html">Scenario 01: Developer Onboarding</a></li>
        <li><a href="../guides/02-security-audit.html">Scenario 02: Security Audit</a></li>
        <li><a href="../guides/03-documentation.html">Scenario 03: Documentation Generation</a></li>
        <li><a href="../guides/04-feature-development.html">Scenario 04: Feature Development</a></li>
        <li><a href="../guides/05-refactoring.html">Scenario 05: Refactoring</a></li>
        <li><a href="../guides/06-performance.html">Scenario 06: Performance Analysis</a></li>
        <li><a href="../guides/07-test-coverage.html">Scenario 07: Test Coverage</a></li>
        <li><a href="../guides/08-compliance.html">Scenario 08: Compliance Checking</a></li>
        <li><a href="../guides/09-code-review.html">Scenario 09: Code Review</a></li>
        <li><a href="../guides/10-cross-repo.html">Scenario 10: Cross-Repository Analysis</a></li>
        <li><a href="../guides/11-architecture.html">Scenario 11: Architecture Analysis</a></li>
        <li><a href="../guides/12-tech-debt.html">Scenario 12: Tech Debt Assessment</a></li>
        <li><a href="../guides/13-mass-refactoring.html">Scenario 13: Mass Refactoring</a></li>
        <li><a href="../guides/14-incident-response.html">Scenario 14: Security Incident Response</a></li>
        <li><a href="../guides/15-debugging.html">Scenario 15: Debugging Assistance</a></li>
        <li><a href="../guides/16-entry-points.html">Scenario 16: Entry Point Discovery</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Overview</a></li>
        <li><a href="ACP_INTEGRATION.html">Agent Client Protocol (ACP) Integration</a></li>
        <li><a href="REST_API.html" class="active">CodeGraph REST API Documentation</a></li>
        <li><a href="WEBSOCKET_API.html">WebSocket API Reference</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Integrations</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Technical Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../reference/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Overview</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Documentation</a>
        <span>/</span>
        <a href="index.html">API Reference</a>
        <span>/</span>
        <span>CodeGraph REST API Documentation</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>CodeGraph REST API Documentation</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="codegraph-rest-api-documentation">CodeGraph REST API Documentation<a class="heading-anchor" href="#codegraph-rest-api-documentation" title="Link to this section">&para;</a></h1>
<p>Complete documentation for the CodeGraph REST API server.</p>
<h2 id="table-of-contents">Table of Contents<a class="heading-anchor" href="#table-of-contents" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#1-install-dependencies">1. Install Dependencies</a></li>
<li><a href="#2-configure-environment">2. Configure Environment</a></li>
<li><a href="#3-initialize-database">3. Initialize Database</a></li>
<li><a href="#4-create-admin-user">4. Create Admin User</a></li>
<li><a href="#5-start-server">5. Start Server</a></li>
<li><a href="#environment-variables">Environment Variables</a></li>
<li><a href="#required">Required</a></li>
<li><a href="#server-settings">Server Settings</a></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#oauth2-providers">OAuth2 Providers</a></li>
<li><a href="#ldapactive-directory">LDAP/Active Directory</a></li>
<li><a href="#rate-limiting">Rate Limiting</a></li>
<li><a href="#demo-endpoint">Demo Endpoint</a></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#jwt-token-authentication">JWT Token Authentication</a></li>
<li><a href="#api-key-authentication">API Key Authentication</a></li>
<li><a href="#oauth2-authentication">OAuth2 Authentication</a></li>
<li><a href="#ldap-authentication">LDAP Authentication</a></li>
<li><a href="#api-endpoints">API Endpoints</a></li>
<li><a href="#demo-public---no-auth-required">Demo (Public - No Auth Required)</a></li>
<li><a href="#chat">Chat</a></li>
<li><a href="#scenarios">Scenarios</a></li>
<li><a href="#available-scenarios-16-total">Available Scenarios (16 total)</a></li>
<li><a href="#code-review">Code Review</a></li>
<li><a href="#sessions">Sessions</a></li>
<li><a href="#history">History</a></li>
<li><a href="#query-sql">Query (SQL)</a></li>
<li><a href="#project-import">Project Import</a></li>
<li><a href="#groups">Groups</a></li>
<li><a href="#projects">Projects</a></li>
<li><a href="#stats">Stats</a></li>
<li><a href="#health">Health</a></li>
<li><a href="#websocket-endpoints">WebSocket Endpoints</a></li>
<li><a href="#wschat">/ws/chat</a></li>
<li><a href="#wsjobsjob_id">/ws/jobs/{job_id}</a></li>
<li><a href="#wsnotifications">/ws/notifications</a></li>
<li><a href="#rate-limiting">Rate Limiting</a></li>
<li><a href="#default-limits">Default Limits</a></li>
<li><a href="#endpoint-specific-limits">Endpoint-Specific Limits</a></li>
<li><a href="#rate-limit-headers">Rate Limit Headers</a></li>
<li><a href="#using-redis-for-rate-limiting">Using Redis for Rate Limiting</a></li>
<li><a href="#rbac-roles">RBAC Roles</a></li>
<li><a href="#database-setup">Database Setup</a></li>
<li><a href="#postgresql-connection">PostgreSQL Connection</a></li>
<li><a href="#alembic-migrations">Alembic Migrations</a></li>
<li><a href="#database-schema">Database Schema</a></li>
<li><a href="#cli-commands">CLI Commands</a></li>
<li><a href="#example-usage-curl">Example Usage (curl)</a></li>
<li><a href="#demo-endpoint-no-auth">Demo Endpoint (No Auth)</a></li>
<li><a href="#login">Login</a></li>
<li><a href="#chat-with-jwt">Chat with JWT</a></li>
<li><a href="#list-scenarios">List Scenarios</a></li>
<li><a href="#create-api-key">Create API Key</a></li>
<li><a href="#use-api-key">Use API Key</a></li>
<li><a href="#review-patch">Review Patch</a></li>
<li><a href="#error-responses">Error Responses</a></li>
<li><a href="#common-http-status-codes">Common HTTP Status Codes</a></li>
<li><a href="#related-documentation">Related Documentation</a></li>
</ul>
<h2 id="overview">Overview<a class="heading-anchor" href="#overview" title="Link to this section">&para;</a></h2>
<ul>
<li><strong>Framework:</strong> FastAPI</li>
<li><strong>Base URL:</strong> <code>http://localhost:8000/api/v1</code></li>
<li><strong>OpenAPI Docs:</strong> <code>/docs</code> (Swagger UI), <code>/redoc</code> (ReDoc)</li>
<li><strong>Authentication:</strong> JWT tokens, API keys, OAuth2, LDAP</li>
</ul>
<hr />
<h2 id="quick-start">Quick Start<a class="heading-anchor" href="#quick-start" title="Link to this section">&para;</a></h2>
<h3 id="1-install-dependencies">1. Install Dependencies<a class="heading-anchor" href="#1-install-dependencies" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>

<h3 id="2-configure-environment">2. Configure Environment<a class="heading-anchor" href="#2-configure-environment" title="Link to this section">&para;</a></h3>
<p>Create <code>.env</code> file (see <a href="#environment-variables">Environment Variables</a>):</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>.env.example<span class="w"> </span>.env
<span class="c1"># Edit .env with your settings</span>
</code></pre></div>

<h3 id="3-initialize-database">3. Initialize Database<a class="heading-anchor" href="#3-initialize-database" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Create tables</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>init-db

<span class="c1"># Run migrations</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>migrate
</code></pre></div>

<h3 id="4-create-admin-user">4. Create Admin User<a class="heading-anchor" href="#4-create-admin-user" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>create-admin<span class="w"> </span>--username<span class="w"> </span>admin<span class="w"> </span>--password<span class="w"> </span>your-secure-password
</code></pre></div>

<h3 id="5-start-server">5. Start Server<a class="heading-anchor" href="#5-start-server" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>run<span class="w"> </span>--host<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="w"> </span><span class="m">8000</span>
</code></pre></div>

<hr />
<h2 id="environment-variables">Environment Variables<a class="heading-anchor" href="#environment-variables" title="Link to this section">&para;</a></h2>
<h3 id="required">Required<a class="heading-anchor" href="#required" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DATABASE_URL</code></td>
<td>PostgreSQL connection string</td>
<td><code>postgresql+asyncpg://postgres:postgres@localhost:5432/codegraph</code></td>
</tr>
<tr>
<td><code>API_JWT_SECRET</code></td>
<td>JWT signing secret (64+ chars)</td>
<td><code>change-me-in-production...</code></td>
</tr>
</tbody>
</table></div>
<h3 id="server-settings">Server Settings<a class="heading-anchor" href="#server-settings" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>API_HOST</code></td>
<td>Server bind address</td>
<td><code>0.0.0.0</code></td>
</tr>
<tr>
<td><code>API_PORT</code></td>
<td>Server port</td>
<td><code>8000</code></td>
</tr>
<tr>
<td><code>API_WORKERS</code></td>
<td>Number of workers</td>
<td><code>4</code></td>
</tr>
<tr>
<td><code>API_DEBUG</code></td>
<td>Debug mode</td>
<td><code>false</code></td>
</tr>
</tbody>
</table></div>
<h3 id="authentication">Authentication<a class="heading-anchor" href="#authentication" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>API_JWT_ALGORITHM</code></td>
<td>JWT algorithm</td>
<td><code>HS256</code></td>
</tr>
<tr>
<td><code>API_ADMIN_USERNAME</code></td>
<td>Default admin username</td>
<td><code>admin</code></td>
</tr>
<tr>
<td><code>API_ADMIN_PASSWORD</code></td>
<td>Default admin password</td>
<td><code>admin</code></td>
</tr>
</tbody>
</table></div>
<h3 id="oauth2-providers">OAuth2 Providers<a class="heading-anchor" href="#oauth2-providers" title="Link to this section">&para;</a></h3>
<h4 id="github">GitHub<a class="heading-anchor" href="#github" title="Link to this section">&para;</a></h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OAUTH_GITHUB_CLIENT_ID</code></td>
<td>GitHub OAuth App Client ID</td>
</tr>
<tr>
<td><code>OAUTH_GITHUB_CLIENT_SECRET</code></td>
<td>GitHub OAuth App Client Secret</td>
</tr>
</tbody>
</table></div>
<h4 id="google">Google<a class="heading-anchor" href="#google" title="Link to this section">&para;</a></h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OAUTH_GOOGLE_CLIENT_ID</code></td>
<td>Google OAuth Client ID</td>
</tr>
<tr>
<td><code>OAUTH_GOOGLE_CLIENT_SECRET</code></td>
<td>Google OAuth Client Secret</td>
</tr>
</tbody>
</table></div>
<h4 id="keycloak">Keycloak<a class="heading-anchor" href="#keycloak" title="Link to this section">&para;</a></h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OAUTH_KEYCLOAK_SERVER_URL</code></td>
<td>Keycloak server URL</td>
</tr>
<tr>
<td><code>OAUTH_KEYCLOAK_REALM</code></td>
<td>Keycloak realm</td>
</tr>
<tr>
<td><code>OAUTH_KEYCLOAK_CLIENT_ID</code></td>
<td>Keycloak client ID</td>
</tr>
<tr>
<td><code>OAUTH_KEYCLOAK_CLIENT_SECRET</code></td>
<td>Keycloak client secret</td>
</tr>
</tbody>
</table></div>
<h3 id="ldapactive-directory">LDAP/Active Directory<a class="heading-anchor" href="#ldapactive-directory" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LDAP_SERVER</code></td>
<td>LDAP server hostname</td>
</tr>
<tr>
<td><code>LDAP_BASE_DN</code></td>
<td>Base DN for searches</td>
</tr>
<tr>
<td><code>LDAP_BIND_USER</code></td>
<td>Bind user DN</td>
</tr>
<tr>
<td><code>LDAP_BIND_PASSWORD</code></td>
<td>Bind user password</td>
</tr>
<tr>
<td><code>LDAP_USER_SEARCH_BASE</code></td>
<td>User search base</td>
</tr>
<tr>
<td><code>LDAP_GROUP_SEARCH_BASE</code></td>
<td>Group search base</td>
</tr>
</tbody>
</table></div>
<h3 id="rate-limiting">Rate Limiting<a class="heading-anchor" href="#rate-limiting" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RATE_LIMIT_STORAGE</code></td>
<td>Storage backend (<code>memory</code> or <code>redis://...</code>)</td>
<td><code>memory</code></td>
</tr>
</tbody>
</table></div>
<h3 id="demo-endpoint">Demo Endpoint<a class="heading-anchor" href="#demo-endpoint" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DEMO_ENABLED</code></td>
<td>Enable demo endpoint</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>DEMO_RATE_LIMIT</code></td>
<td>Demo rate limit</td>
<td><code>30/minute</code></td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="authentication_1">Authentication<a class="heading-anchor" href="#authentication_1" title="Link to this section">&para;</a></h2>
<h3 id="jwt-token-authentication">JWT Token Authentication<a class="heading-anchor" href="#jwt-token-authentication" title="Link to this section">&para;</a></h3>
<h4 id="login-get-token">Login (Get Token)<a class="heading-anchor" href="#login-get-token" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">POST /api/v1/auth/token</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;username&quot;: &quot;admin&quot;,</span>
<span class="err">  &quot;password&quot;: &quot;your-password&quot;</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJIUzI1NiIs...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJhbGciOiJIUzI1NiIs...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;expires_in&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="refresh-token">Refresh Token<a class="heading-anchor" href="#refresh-token" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">POST /api/v1/auth/refresh</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;refresh_token&quot;: &quot;eyJhbGciOiJIUzI1NiIs...&quot;</span>
<span class="err">}</span>
</code></pre></div>

<h4 id="using-jwt-in-requests">Using JWT in Requests<a class="heading-anchor" href="#using-jwt-in-requests" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">Authorization: Bearer &lt;access_token&gt;</span>
</code></pre></div>

<h3 id="api-key-authentication">API Key Authentication<a class="heading-anchor" href="#api-key-authentication" title="Link to this section">&para;</a></h3>
<h4 id="create-api-key">Create API Key<a class="heading-anchor" href="#create-api-key" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">POST /api/v1/auth/api-keys</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;name&quot;: &quot;my-integration&quot;,</span>
<span class="err">  &quot;expires_days&quot;: 365,</span>
<span class="err">  &quot;scopes&quot;: [&quot;scenarios:read&quot;, &quot;query:execute&quot;]</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;key_abc123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-integration&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rak_xxxxxxxxxxxxxxxxxxxx&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rak_xxxx&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scopes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;scenarios:read&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;query:execute&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;expires_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-12-09T00:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T00:00:00Z&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="using-api-key-in-requests">Using API Key in Requests<a class="heading-anchor" href="#using-api-key-in-requests" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">X-API-Key: rak_xxxxxxxxxxxxxxxxxxxx</span>
</code></pre></div>

<h4 id="list-api-keys">List API Keys<a class="heading-anchor" href="#list-api-keys" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">GET /api/v1/auth/api-keys</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
</code></pre></div>

<h4 id="delete-api-key">Delete API Key<a class="heading-anchor" href="#delete-api-key" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">DELETE /api/v1/auth/api-keys/{key_id}</span>
<span class="err">Authorization: Bearer &lt;token&gt;</span>
</code></pre></div>

<h3 id="oauth2-authentication">OAuth2 Authentication<a class="heading-anchor" href="#oauth2-authentication" title="Link to this section">&para;</a></h3>
<h4 id="start-oauth-flow">Start OAuth Flow<a class="heading-anchor" href="#start-oauth-flow" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">GET /api/v1/auth/oauth/{provider}/authorize</span>
</code></pre></div>

<p>Supported providers: <code>github</code>, <code>google</code>, <code>gitlab</code>, <code>keycloak</code></p>
<h4 id="oauth-callback">OAuth Callback<a class="heading-anchor" href="#oauth-callback" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">GET /api/v1/auth/oauth/{provider}/callback?code=xxx&amp;state=xxx</span>
</code></pre></div>

<h3 id="ldap-authentication">LDAP Authentication<a class="heading-anchor" href="#ldap-authentication" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">POST /api/v1/auth/ldap</span>
<span class="err">Content-Type: application/json</span>

<span class="err">{</span>
<span class="err">  &quot;username&quot;: &quot;jdoe&quot;,</span>
<span class="err">  &quot;password&quot;: &quot;ldap-password&quot;</span>
<span class="err">}</span>
</code></pre></div>

<hr />
<h2 id="api-endpoints">API Endpoints<a class="heading-anchor" href="#api-endpoints" title="Link to this section">&para;</a></h2>
<h3 id="demo-public-no-auth-required">Demo (Public - No Auth Required)<a class="heading-anchor" href="#demo-public-no-auth-required" title="Link to this section">&para;</a></h3>
<h4 id="post-apiv1demochat">POST /api/v1/demo/chat<a class="heading-anchor" href="#post-apiv1demochat" title="Link to this section">&para;</a></h4>
<p>Public demo endpoint for landing page integration. Rate limited by IP address.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Как работает MVCC?&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ru&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MVCC (Multi-Version Concurrency Control)...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scenario_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;onboarding&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;processing_time_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1523.45</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rate Limit:</strong> 30 requests per minute per IP</p>
<h4 id="get-apiv1demostatus">GET /api/v1/demo/status<a class="heading-anchor" href="#get-apiv1demostatus" title="Link to this section">&para;</a></h4>
<p>Check demo endpoint status.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;rate_limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;30/minute&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;max_query_length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;allowed_scenarios&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;onboarding&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="chat">Chat<a class="heading-anchor" href="#chat" title="Link to this section">&para;</a></h3>
<h4 id="post-apiv1chat">POST /api/v1/chat<a class="heading-anchor" href="#post-apiv1chat" title="Link to this section">&para;</a></h4>
<p>Send a query to the CodeGraph system.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Find SQL injection vulnerabilities&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;session_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;optional-session-id&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scenario_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;security&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;en&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Found 3 potential SQL injection vulnerabilities...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scenario_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;security&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;evidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src/executor.c:123&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sprintf(query, \&quot;SELECT * FROM %s\&quot;, user_input);&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;relevance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;session_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sess_abc123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;req_xyz789&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;processing_time_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2341.5</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1chatstream">POST /api/v1/chat/stream<a class="heading-anchor" href="#post-apiv1chatstream" title="Link to this section">&para;</a></h4>
<p>Send a query and receive streaming response via Server-Sent Events (SSE).</p>
<p><strong>Request:</strong> Same as <code>/chat</code></p>
<p><strong>Response:</strong> SSE stream</p>
<div class="highlight"><pre><span></span><code><span class="nx">data</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;start&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;session_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sess_abc123&quot;</span><span class="p">}</span>

<span class="nx">data</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;chunk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Found 3 potential &quot;</span><span class="p">}</span>

<span class="nx">data</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;chunk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SQL injection vulnerabilities...&quot;</span><span class="p">}</span>

<span class="nx">data</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;end&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scenario_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;security&quot;</span><span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="scenarios">Scenarios<a class="heading-anchor" href="#scenarios" title="Link to this section">&para;</a></h3>
<h4 id="get-apiv1scenarios">GET /api/v1/scenarios<a class="heading-anchor" href="#get-apiv1scenarios" title="Link to this section">&para;</a></h4>
<p>List all 16 available analysis scenarios.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;onboarding&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Onboarding&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Get started with a codebase - find functions, trace call graphs&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Learning&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;find&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;where&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;what&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;how&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;explain&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;example_queries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Where is the main() function?&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;What does exec_simple_query do?&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;security&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Security Audit&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Find security vulnerabilities - SQL injection, buffer overflows&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Security&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;vulnerability&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;injection&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;unsafe&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;example_queries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Find SQL injection vulnerabilities&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="c1">// ... 14 more scenarios</span>
<span class="p">]</span>
</code></pre></div>

<h4 id="get-apiv1scenariosscenario-id">GET /api/v1/scenarios/{scenario_id}<a class="heading-anchor" href="#get-apiv1scenariosscenario-id" title="Link to this section">&para;</a></h4>
<p>Get information about a specific scenario.</p>
<h4 id="post-apiv1scenariosscenario-idquery">POST /api/v1/scenarios/{scenario_id}/query<a class="heading-anchor" href="#post-apiv1scenariosscenario-idquery" title="Link to this section">&para;</a></h4>
<p>Send a query to a specific scenario.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Find buffer overflow vulnerabilities&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;session_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;optional-session-id&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;en&quot;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="available-scenarios-16-total">Available Scenarios (16 total)<a class="heading-anchor" href="#available-scenarios-16-total" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Category</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onboarding</code></td>
<td>Onboarding</td>
<td>Learning</td>
<td>Get started with codebase</td>
</tr>
<tr>
<td><code>security</code></td>
<td>Security Audit</td>
<td>Security</td>
<td>Find vulnerabilities</td>
</tr>
<tr>
<td><code>documentation</code></td>
<td>Documentation</td>
<td>Documentation</td>
<td>Generate docs</td>
</tr>
<tr>
<td><code>feature_dev</code></td>
<td>Feature Development</td>
<td>Development</td>
<td>Find integration points</td>
</tr>
<tr>
<td><code>refactoring</code></td>
<td>Refactoring</td>
<td>Quality</td>
<td>Identify code smells</td>
</tr>
<tr>
<td><code>performance</code></td>
<td>Performance Analysis</td>
<td>Performance</td>
<td>Find bottlenecks</td>
</tr>
<tr>
<td><code>test_coverage</code></td>
<td>Test Coverage</td>
<td>Testing</td>
<td>Analyze test coverage</td>
</tr>
<tr>
<td><code>compliance</code></td>
<td>Compliance Check</td>
<td>Quality</td>
<td>Check coding standards</td>
</tr>
<tr>
<td><code>code_review</code></td>
<td>Code Review</td>
<td>Review</td>
<td>Automated code review</td>
</tr>
<tr>
<td><code>cross_repo</code></td>
<td>Cross-Repository</td>
<td>Architecture</td>
<td>Analyze dependencies</td>
</tr>
<tr>
<td><code>architecture</code></td>
<td>Architecture Violations</td>
<td>Architecture</td>
<td>Detect violations</td>
</tr>
<tr>
<td><code>tech_debt</code></td>
<td>Technical Debt</td>
<td>Quality</td>
<td>Quantify tech debt</td>
</tr>
<tr>
<td><code>mass_refactoring</code></td>
<td>Mass Refactoring</td>
<td>Development</td>
<td>Large-scale changes</td>
</tr>
<tr>
<td><code>security_incident</code></td>
<td>Security Incident</td>
<td>Security</td>
<td>Incident response</td>
</tr>
<tr>
<td><code>debugging</code></td>
<td>Debugging Support</td>
<td>Development</td>
<td>Find logging points</td>
</tr>
<tr>
<td><code>entry_points</code></td>
<td>Entry Points</td>
<td>Security</td>
<td>Find attack surface</td>
</tr>
</tbody>
</table></div>
<hr />
<h3 id="code-review">Code Review<a class="heading-anchor" href="#code-review" title="Link to this section">&para;</a></h3>
<h4 id="post-apiv1reviewpatch">POST /api/v1/review/patch<a class="heading-anchor" href="#post-apiv1reviewpatch" title="Link to this section">&para;</a></h4>
<p>Review a git patch/diff.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;patch_content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;diff --git a/src/file.c b/src/file.c\n...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;task_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Fix memory leak in transaction handler&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dod_items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;No memory leaks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Unit tests pass&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;output_format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;json&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;recommendation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;REQUEST_CHANGES&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.82</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;findings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;severity&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;high&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src/file.c&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;line_start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Potential memory leak: allocated memory not freed on error path&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;suggested_fix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Add free(ptr) before return statement&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;dod_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;No memory leaks&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;satisfied&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;evidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Found 1 potential leak&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Found 1 high-severity issue that should be addressed.&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1reviewgithub-pr">POST /api/v1/review/github-pr<a class="heading-anchor" href="#post-apiv1reviewgithub-pr" title="Link to this section">&para;</a></h4>
<p>Review a GitHub Pull Request.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;repo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pr_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;github_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ghp_xxx&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1reviewgitlab-mr">POST /api/v1/review/gitlab-mr<a class="heading-anchor" href="#post-apiv1reviewgitlab-mr" title="Link to this section">&para;</a></h4>
<p>Review a GitLab Merge Request.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;project_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;mr_iid&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;gitlab_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;glpat-xxx&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;gitlab_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://gitlab.com&quot;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="sessions">Sessions<a class="heading-anchor" href="#sessions" title="Link to this section">&para;</a></h3>
<h4 id="get-apiv1sessions">GET /api/v1/sessions<a class="heading-anchor" href="#get-apiv1sessions" title="Link to this section">&para;</a></h4>
<p>List user sessions.</p>
<h4 id="post-apiv1sessions">POST /api/v1/sessions<a class="heading-anchor" href="#post-apiv1sessions" title="Link to this section">&para;</a></h4>
<p>Create new session.</p>
<h4 id="get-apiv1sessionssession-id">GET /api/v1/sessions/{session_id}<a class="heading-anchor" href="#get-apiv1sessionssession-id" title="Link to this section">&para;</a></h4>
<p>Get session details.</p>
<h4 id="delete-apiv1sessionssession-id">DELETE /api/v1/sessions/{session_id}<a class="heading-anchor" href="#delete-apiv1sessionssession-id" title="Link to this section">&para;</a></h4>
<p>Delete session.</p>
<hr />
<h3 id="history">History<a class="heading-anchor" href="#history" title="Link to this section">&para;</a></h3>
<h4 id="get-apiv1history">GET /api/v1/history<a class="heading-anchor" href="#get-apiv1history" title="Link to this section">&para;</a></h4>
<p>Get conversation history.</p>
<p><strong>Query Parameters:</strong>
- <code>session_id</code> - Filter by session
- <code>limit</code> - Number of items (default: 50)
- <code>offset</code> - Pagination offset</p>
<h4 id="get-apiv1historymessage-id">GET /api/v1/history/{message_id}<a class="heading-anchor" href="#get-apiv1historymessage-id" title="Link to this section">&para;</a></h4>
<p>Get specific message.</p>
<h4 id="get-apiv1historyexport">GET /api/v1/history/export<a class="heading-anchor" href="#get-apiv1historyexport" title="Link to this section">&para;</a></h4>
<p>Export conversation history.</p>
<p><strong>Query Parameters:</strong>
- <code>format</code> - Export format (<code>json</code>, <code>csv</code>, <code>markdown</code>)
- <code>session_id</code> - Filter by session</p>
<hr />
<h3 id="query-sql">Query (SQL)<a class="heading-anchor" href="#query-sql" title="Link to this section">&para;</a></h3>
<h4 id="post-apiv1queryexecute">POST /api/v1/query/execute<a class="heading-anchor" href="#post-apiv1queryexecute" title="Link to this section">&para;</a></h4>
<p>Execute a SQL query against the CPG database directly.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SELECT name, file FROM nodes_method WHERE name LIKE &#39;%transaction%&#39; LIMIT 10&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timeout_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30000</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;StartTransaction&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;xact.c&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CommitTransaction&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;xact.c&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;row_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;execution_time_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">45.2</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="project-import">Project Import<a class="heading-anchor" href="#project-import" title="Link to this section">&para;</a></h3>
<p>Import new codebases into the CodeGraph system.</p>
<blockquote class="callout">
<p><strong>Detailed documentation:</strong> See <a href="../guides/PROJECT_IMPORT.html">Project Import Guide</a> for comprehensive usage examples.</p>
</blockquote>
<h4 id="get-apiv1importlanguages">GET /api/v1/import/languages<a class="heading-anchor" href="#get-apiv1importlanguages" title="Link to this section">&para;</a></h4>
<p>Get list of supported programming languages.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;languages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.h&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.cpp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.hpp&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;joern_command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c2cpg&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;joern_flag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;java&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;JAVA&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.java&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;joern_command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;javasrc2cpg&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;joern_flag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;JAVASRC&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Supported Languages (10):</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Joern Command</th>
<th>Extensions</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c</code></td>
<td>C/C++</td>
<td>c2cpg</td>
<td><code>.c</code>, <code>.h</code>, <code>.cpp</code>, <code>.hpp</code>, <code>.cc</code>, <code>.cxx</code></td>
</tr>
<tr>
<td><code>csharp</code></td>
<td>C#</td>
<td>csharp2cpg</td>
<td><code>.cs</code></td>
</tr>
<tr>
<td><code>go</code></td>
<td>Go</td>
<td>gosrc2cpg</td>
<td><code>.go</code></td>
</tr>
<tr>
<td><code>java</code></td>
<td>Java</td>
<td>javasrc2cpg</td>
<td><code>.java</code></td>
</tr>
<tr>
<td><code>javascript</code></td>
<td>JavaScript/TypeScript</td>
<td>jssrc2cpg</td>
<td><code>.js</code>, <code>.jsx</code>, <code>.ts</code>, <code>.tsx</code>, <code>.mjs</code></td>
</tr>
<tr>
<td><code>kotlin</code></td>
<td>Kotlin</td>
<td>kotlin2cpg</td>
<td><code>.kt</code>, <code>.kts</code></td>
</tr>
<tr>
<td><code>php</code></td>
<td>PHP</td>
<td>php2cpg</td>
<td><code>.php</code></td>
</tr>
<tr>
<td><code>python</code></td>
<td>Python</td>
<td>pysrc2cpg</td>
<td><code>.py</code>, <code>.pyw</code></td>
</tr>
<tr>
<td><code>ruby</code></td>
<td>Ruby</td>
<td>rubysrc2cpg</td>
<td><code>.rb</code></td>
</tr>
<tr>
<td><code>swift</code></td>
<td>Swift</td>
<td>swiftsrc2cpg</td>
<td><code>.swift</code></td>
</tr>
</tbody>
</table></div>
<h4 id="post-apiv1importstart">POST /api/v1/import/start<a class="heading-anchor" href="#post-apiv1importstart" title="Link to this section">&para;</a></h4>
<p>Start asynchronous import of a new codebase.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;repo_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/llvm/llvm-project&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;shallow_clone&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;full&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;include_paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;llvm/lib&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;llvm/include&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;exclude_paths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;create_domain_plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;import_docs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;joern_memory_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;batch_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Request Parameters:</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>repo_url</code></td>
<td>string</td>
<td>-</td>
<td>Git repository URL (required if no <code>local_path</code>)</td>
</tr>
<tr>
<td><code>local_path</code></td>
<td>string</td>
<td>-</td>
<td>Local path (required if no <code>repo_url</code>)</td>
</tr>
<tr>
<td><code>branch</code></td>
<td>string</td>
<td><code>"main"</code></td>
<td>Git branch to clone</td>
</tr>
<tr>
<td><code>shallow_clone</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Use shallow clone</td>
</tr>
<tr>
<td><code>shallow_depth</code></td>
<td>int</td>
<td><code>1</code></td>
<td>Shallow clone depth</td>
</tr>
<tr>
<td><code>language</code></td>
<td>string</td>
<td><code>null</code></td>
<td>Language ID (auto-detect if null)</td>
</tr>
<tr>
<td><code>mode</code></td>
<td>string</td>
<td><code>"full"</code></td>
<td>Import mode: <code>full</code>, <code>selective</code>, <code>incremental</code></td>
</tr>
<tr>
<td><code>include_paths</code></td>
<td>list</td>
<td><code>[]</code></td>
<td>Paths to include</td>
</tr>
<tr>
<td><code>exclude_paths</code></td>
<td>list</td>
<td><code>[]</code></td>
<td>Paths to exclude</td>
</tr>
<tr>
<td><code>create_domain_plugin</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Generate Domain Plugin</td>
</tr>
<tr>
<td><code>domain_name</code></td>
<td>string</td>
<td><code>null</code></td>
<td>Custom domain name</td>
</tr>
<tr>
<td><code>import_docs</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Import documentation</td>
</tr>
<tr>
<td><code>import_readme</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Index README files</td>
</tr>
<tr>
<td><code>import_comments</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Import code comments</td>
</tr>
<tr>
<td><code>joern_memory_gb</code></td>
<td>int</td>
<td><code>16</code></td>
<td>Memory for Joern (GB)</td>
</tr>
<tr>
<td><code>batch_size</code></td>
<td>int</td>
<td><code>10000</code></td>
<td>DuckDB batch size</td>
</tr>
</tbody>
</table></div>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Import started. Use job_id to track progress.&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="get-apiv1importstatusjob-id">GET /api/v1/import/status/{job_id}<a class="heading-anchor" href="#get-apiv1importstatusjob-id" title="Link to this section">&para;</a></h4>
<p>Get current status of an import job.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;project_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llvm-project&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;in_progress&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Clone Repository&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Detect Language&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Create CPG&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;in_progress&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Creating CPG nodes...&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Export to DuckDB&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Validate CPG&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Import Documentation&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Setup Domain Plugin&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;current_step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;joern_import&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;overall_progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T10:05:00Z&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Import Status Values:</strong>
- <code>pending</code> - Waiting to start
- <code>in_progress</code> - Currently running
- <code>completed</code> - Successfully finished
- <code>failed</code> - Error occurred
- <code>cancelled</code> - Cancelled by user</p>
<h4 id="get-apiv1importjobs">GET /api/v1/import/jobs<a class="heading-anchor" href="#get-apiv1importjobs" title="Link to this section">&para;</a></h4>
<p>List all import jobs.</p>
<p><strong>Query Parameters:</strong>
- <code>status_filter</code> - Filter by status (e.g., <code>in_progress</code>, <code>completed</code>)
- <code>limit</code> - Maximum number of jobs (default: 20)</p>
<p><strong>Response:</strong> Array of <code>ProjectImportStatus</code> objects.</p>
<h4 id="delete-apiv1importcanceljob-id">DELETE /api/v1/import/cancel/{job_id}<a class="heading-anchor" href="#delete-apiv1importcanceljob-id" title="Link to this section">&para;</a></h4>
<p>Cancel a running import job.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cancelled&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1importstep">POST /api/v1/import/step<a class="heading-anchor" href="#post-apiv1importstep" title="Link to this section">&para;</a></h4>
<p>Run a single step of the import pipeline.</p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;step_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;validate&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;duckdb_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/project.duckdb&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Valid Steps:</strong>
- <code>clone</code> - Clone repository
- <code>detect_language</code> - Auto-detect programming language
- <code>joern_import</code> - Create Joern CPG
- <code>cpg_export</code> - Export CPG to DuckDB
- <code>validate</code> - Validate CPG quality
- <code>chromadb_import</code> - Import documentation to ChromaDB
- <code>domain_setup</code> - Create Domain Plugin</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;validate&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;validation_report&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;passed&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;quality_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">85</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="websocket-progress-tracking">WebSocket: Progress Tracking<a class="heading-anchor" href="#websocket-progress-tracking" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="s1">&#39;ws://localhost:8000/api/v1/ws/jobs/550e8400-e29b-41d4-a716-446655440000&#39;</span><span class="p">);</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;job.progress&#39;</span><span class="o">:</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Progress: </span><span class="si">${</span><span class="nx">msg</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">progress</span><span class="si">}</span><span class="sb">% - </span><span class="si">${</span><span class="nx">msg</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;job.completed&#39;</span><span class="o">:</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Import completed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">result</span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;job.failed&#39;</span><span class="o">:</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Import failed:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>

<hr />
<h3 id="groups">Groups<a class="heading-anchor" href="#groups" title="Link to this section">&para;</a></h3>
<p>Manage project groups and user access control.</p>
<h4 id="get-apiv1groups">GET /api/v1/groups<a class="heading-anchor" href="#get-apiv1groups" title="Link to this section">&para;</a></h4>
<p>List project groups accessible by the current user.</p>
<p><strong>Query Parameters:</strong>
- <code>limit</code> - Maximum number of groups (default: 100)
- <code>offset</code> - Pagination offset (default: 0)</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL Development&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL core development projects&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-01T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T15:30:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;project_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1groups">POST /api/v1/groups<a class="heading-anchor" href="#post-apiv1groups" title="Link to this section">&para;</a></h4>
<p>Create a new project group. <strong>Admin only.</strong></p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL Development&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL core development projects&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong> <code>201 Created</code></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL Development&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL core development projects&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;project_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="get-apiv1groupsgroup-id">GET /api/v1/groups/{group_id}<a class="heading-anchor" href="#get-apiv1groupsgroup-id" title="Link to this section">&para;</a></h4>
<p>Get details of a specific group.</p>
<h4 id="put-apiv1groupsgroup-id">PUT /api/v1/groups/{group_id}<a class="heading-anchor" href="#put-apiv1groupsgroup-id" title="Link to this section">&para;</a></h4>
<p>Update a group. <strong>Admin or group editor only.</strong></p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Updated Name&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Updated description&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="delete-apiv1groupsgroup-id">DELETE /api/v1/groups/{group_id}<a class="heading-anchor" href="#delete-apiv1groupsgroup-id" title="Link to this section">&para;</a></h4>
<p>Delete a group. <strong>Admin only.</strong></p>
<p><strong>Response:</strong> <code>204 No Content</code></p>
<h4 id="get-apiv1groupsgroup-idusers">GET /api/v1/groups/{group_id}/users<a class="heading-anchor" href="#get-apiv1groupsgroup-idusers" title="Link to this section">&para;</a></h4>
<p>List users with access to a group.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user-123&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user-456&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jdoe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;editor&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-01T10:00:00Z&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1groupsgroup-idusers">POST /api/v1/groups/{group_id}/users<a class="heading-anchor" href="#post-apiv1groupsgroup-idusers" title="Link to this section">&para;</a></h4>
<p>Add user access to a group. <strong>Admin or group admin only.</strong></p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user-456&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;viewer&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Role Values:</strong> <code>viewer</code>, <code>editor</code>, <code>admin</code></p>
<h4 id="delete-apiv1groupsgroup-idusersuser-id">DELETE /api/v1/groups/{group_id}/users/{user_id}<a class="heading-anchor" href="#delete-apiv1groupsgroup-idusersuser-id" title="Link to this section">&para;</a></h4>
<p>Remove user access from a group. <strong>Admin or group admin only.</strong></p>
<hr />
<h3 id="projects">Projects<a class="heading-anchor" href="#projects" title="Link to this section">&para;</a></h3>
<p>Manage projects within groups.</p>
<h4 id="get-apiv1projects">GET /api/v1/projects<a class="heading-anchor" href="#get-apiv1projects" title="Link to this section">&para;</a></h4>
<p>List projects accessible by the current user.</p>
<p><strong>Query Parameters:</strong>
- <code>group_id</code> - Filter by group (optional)
- <code>limit</code> - Maximum number of projects (default: 100)
- <code>offset</code> - Pagination offset (default: 0)</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;projects&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proj-123&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;group_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group-456&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL 17&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;db_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql.duckdb&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;cpg_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql.cpg&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;source_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL 17.0 source code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;is_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17.0&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-01T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T15:30:00Z&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="post-apiv1projects">POST /api/v1/projects<a class="heading-anchor" href="#post-apiv1projects" title="Link to this section">&para;</a></h4>
<p>Create a new project. <strong>Requires editor access to the group.</strong></p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;group_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group-456&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL 17&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;db_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql.duckdb&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cpg_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql.cpg&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;source_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./workspace/postgresql&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL 17.0 source code&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17.0&quot;</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response:</strong> <code>201 Created</code></p>
<h4 id="get-apiv1projectsproject-id">GET /api/v1/projects/{project_id}<a class="heading-anchor" href="#get-apiv1projectsproject-id" title="Link to this section">&para;</a></h4>
<p>Get details of a specific project.</p>
<h4 id="put-apiv1projectsproject-id">PUT /api/v1/projects/{project_id}<a class="heading-anchor" href="#put-apiv1projectsproject-id" title="Link to this section">&para;</a></h4>
<p>Update a project. <strong>Requires editor access.</strong></p>
<p><strong>Request:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Updated Name&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Updated description&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17.1&quot;</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="delete-apiv1projectsproject-id">DELETE /api/v1/projects/{project_id}<a class="heading-anchor" href="#delete-apiv1projectsproject-id" title="Link to this section">&para;</a></h4>
<p>Delete a project. <strong>Requires admin access.</strong></p>
<p><strong>Response:</strong> <code>204 No Content</code></p>
<h4 id="post-apiv1projectsproject-idactivate">POST /api/v1/projects/{project_id}/activate<a class="heading-anchor" href="#post-apiv1projectsproject-idactivate" title="Link to this section">&para;</a></h4>
<p>Set a project as the active project for queries.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proj-123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL 17&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;is_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Project activated successfully&quot;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="stats">Stats<a class="heading-anchor" href="#stats" title="Link to this section">&para;</a></h3>
<h4 id="get-apiv1stats">GET /api/v1/stats<a class="heading-anchor" href="#get-apiv1stats" title="Link to this section">&para;</a></h4>
<p>Get system statistics.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;total_queries&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;queries_today&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">234</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;average_response_time_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1523.4</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scenarios_usage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;onboarding&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4521</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;security&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2341</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="health">Health<a class="heading-anchor" href="#health" title="Link to this section">&para;</a></h3>
<h4 id="get-apiv1health">GET /api/v1/health<a class="heading-anchor" href="#get-apiv1health" title="Link to this section">&para;</a></h4>
<p>Full health check with component status.</p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;uptime_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3600.5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-12-09T12:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;latency_ms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5.2</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;llm&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gigachat&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;cpg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;db_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="get-apiv1healthlive">GET /api/v1/health/live<a class="heading-anchor" href="#get-apiv1healthlive" title="Link to this section">&para;</a></h4>
<p>Kubernetes liveness probe.</p>
<p><strong>Response:</strong> <code>200 OK</code> if service is running.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
</code></pre></div>

<h4 id="get-apiv1healthready">GET /api/v1/health/ready<a class="heading-anchor" href="#get-apiv1healthready" title="Link to this section">&para;</a></h4>
<p>Kubernetes readiness probe.</p>
<p><strong>Response:</strong> <code>200 OK</code> if ready, <code>503</code> if not ready.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ready&quot;</span><span class="p">}</span>
</code></pre></div>

<h4 id="get-apiv1healthversion">GET /api/v1/health/version<a class="heading-anchor" href="#get-apiv1healthversion" title="Link to this section">&para;</a></h4>
<p>Get API version.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CodeGraph API&quot;</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="websocket-endpoints">WebSocket Endpoints<a class="heading-anchor" href="#websocket-endpoints" title="Link to this section">&para;</a></h2>
<h3 id="wschat">/ws/chat<a class="heading-anchor" href="#wschat" title="Link to this section">&para;</a></h3>
<p>Real-time chat connection.</p>
<p><strong>Connect:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="s1">&#39;ws://localhost:8000/ws/chat?token=&lt;jwt_token&gt;&#39;</span><span class="p">);</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Received:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;query&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">query</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Find SQL injection vulnerabilities&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">scenario_id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;security&#39;</span>
<span class="p">}));</span>
</code></pre></div>

<h3 id="wsjobsjob-id">/ws/jobs/{job_id}<a class="heading-anchor" href="#wsjobsjob-id" title="Link to this section">&para;</a></h3>
<p>Monitor background job progress.</p>
<h3 id="wsnotifications">/ws/notifications<a class="heading-anchor" href="#wsnotifications" title="Link to this section">&para;</a></h3>
<p>Receive real-time notifications.</p>
<hr />
<h2 id="rate-limiting_1">Rate Limiting<a class="heading-anchor" href="#rate-limiting_1" title="Link to this section">&para;</a></h2>
<h3 id="default-limits">Default Limits<a class="heading-anchor" href="#default-limits" title="Link to this section">&para;</a></h3>
<ul>
<li><strong>Global:</strong> 100 requests/minute, 1000 requests/hour</li>
</ul>
<h3 id="endpoint-specific-limits">Endpoint-Specific Limits<a class="heading-anchor" href="#endpoint-specific-limits" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Endpoint</th>
<th>Limit</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/v1/review/*</code></td>
<td>10/minute</td>
</tr>
<tr>
<td><code>/api/v1/chat</code></td>
<td>60/minute</td>
</tr>
<tr>
<td><code>/api/v1/chat/stream</code></td>
<td>30/minute</td>
</tr>
<tr>
<td><code>/api/v1/query/execute</code></td>
<td>30/minute</td>
</tr>
<tr>
<td><code>/api/v1/demo/chat</code></td>
<td>30/minute per IP</td>
</tr>
</tbody>
</table></div>
<h3 id="rate-limit-headers">Rate Limit Headers<a class="heading-anchor" href="#rate-limit-headers" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">X-RateLimit-Limit: 60</span>
<span class="err">X-RateLimit-Remaining: 45</span>
<span class="err">X-RateLimit-Reset: 1702123456</span>
</code></pre></div>

<h3 id="using-redis-for-rate-limiting">Using Redis for Rate Limiting<a class="heading-anchor" href="#using-redis-for-rate-limiting" title="Link to this section">&para;</a></h3>
<p>For production with multiple instances, use Redis:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RATE_LIMIT_STORAGE</span><span class="o">=</span>redis://localhost:6379
</code></pre></div>

<hr />
<h2 id="rbac-roles">RBAC Roles<a class="heading-anchor" href="#rbac-roles" title="Link to this section">&para;</a></h2>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Role</th>
<th>Permissions</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>viewer</code></td>
<td>Read scenarios, view history</td>
</tr>
<tr>
<td><code>analyst</code></td>
<td>All viewer + execute queries, create sessions</td>
</tr>
<tr>
<td><code>reviewer</code></td>
<td>All analyst + code review, patch review</td>
</tr>
<tr>
<td><code>admin</code></td>
<td>Full access including user management</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="database-setup">Database Setup<a class="heading-anchor" href="#database-setup" title="Link to this section">&para;</a></h2>
<h3 id="postgresql-connection">PostgreSQL Connection<a class="heading-anchor" href="#postgresql-connection" title="Link to this section">&para;</a></h3>
<p>Requires PostgreSQL 12+ with async support.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create database</span>
createdb<span class="w"> </span>codegraph

<span class="c1"># Set connection string</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">DATABASE_URL</span><span class="o">=</span><span class="s2">&quot;postgresql+asyncpg://postgres:password@localhost:5432/codegraph&quot;</span>
</code></pre></div>

<h3 id="alembic-migrations">Alembic Migrations<a class="heading-anchor" href="#alembic-migrations" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Apply all migrations</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>migrate

<span class="c1"># Migrate to specific revision</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>migrate<span class="w"> </span>--revision<span class="w"> </span>abc123
</code></pre></div>

<h3 id="database-schema">Database Schema<a class="heading-anchor" href="#database-schema" title="Link to this section">&para;</a></h3>
<p>Main tables:
- <code>users</code> - User accounts
- <code>api_keys</code> - API key storage
- <code>sessions</code> - Chat sessions
- <code>messages</code> - Message history
- <code>jobs</code> - Background job status</p>
<hr />
<h2 id="cli-commands">CLI Commands<a class="heading-anchor" href="#cli-commands" title="Link to this section">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Run API server</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>--host<span class="w"> </span>HOST<span class="o">]</span><span class="w"> </span><span class="o">[</span>--port<span class="w"> </span>PORT<span class="o">]</span><span class="w"> </span><span class="o">[</span>--workers<span class="w"> </span>N<span class="o">]</span><span class="w"> </span><span class="o">[</span>--reload<span class="o">]</span>

<span class="c1"># Initialize database</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>init-db

<span class="c1"># Run migrations</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>migrate<span class="w"> </span><span class="o">[</span>--revision<span class="w"> </span>REV<span class="o">]</span>

<span class="c1"># Create admin user</span>
python<span class="w"> </span>-m<span class="w"> </span>src.api.cli<span class="w"> </span>create-admin<span class="w"> </span>--username<span class="w"> </span>USER<span class="w"> </span>--password<span class="w"> </span>PASS<span class="w"> </span><span class="o">[</span>--email<span class="w"> </span>EMAIL<span class="o">]</span>
</code></pre></div>

<hr />
<h2 id="example-usage-curl">Example Usage (curl)<a class="heading-anchor" href="#example-usage-curl" title="Link to this section">&para;</a></h2>
<h3 id="demo-endpoint-no-auth">Demo Endpoint (No Auth)<a class="heading-anchor" href="#demo-endpoint-no-auth" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/v1/demo/chat<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;query&quot;: &quot;Как работает MVCC?&quot;, &quot;language&quot;: &quot;ru&quot;}&#39;</span>
</code></pre></div>

<h3 id="login">Login<a class="heading-anchor" href="#login" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/v1/auth/token<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;username&quot;: &quot;admin&quot;, &quot;password&quot;: &quot;secret&quot;}&#39;</span>
</code></pre></div>

<h3 id="chat-with-jwt">Chat with JWT<a class="heading-anchor" href="#chat-with-jwt" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;eyJhbGciOiJIUzI1NiIs...&quot;</span>

curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/v1/chat<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;query&quot;: &quot;Find SQL injection vulnerabilities&quot;, &quot;scenario_id&quot;: &quot;security&quot;}&#39;</span>
</code></pre></div>

<h3 id="list-scenarios">List Scenarios<a class="heading-anchor" href="#list-scenarios" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:8000/api/v1/scenarios<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span>
</code></pre></div>

<h3 id="create-api-key_1">Create API Key<a class="heading-anchor" href="#create-api-key_1" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/v1/auth/api-keys<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;name&quot;: &quot;my-integration&quot;, &quot;expires_days&quot;: 365}&#39;</span>
</code></pre></div>

<h3 id="use-api-key">Use API Key<a class="heading-anchor" href="#use-api-key" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>http://localhost:8000/api/v1/scenarios<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;X-API-Key: rak_xxxxxxxxxxxxxxxxxxxx&quot;</span>
</code></pre></div>

<h3 id="review-patch">Review Patch<a class="heading-anchor" href="#review-patch" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/v1/review/patch<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;patch_content&quot;: &quot;diff --git a/src/file.c ...&quot;,</span>
<span class="s1">    &quot;task_description&quot;: &quot;Fix memory leak&quot;,</span>
<span class="s1">    &quot;output_format&quot;: &quot;json&quot;</span>
<span class="s1">  }&#39;</span>
</code></pre></div>

<hr />
<h2 id="error-responses">Error Responses<a class="heading-anchor" href="#error-responses" title="Link to this section">&para;</a></h2>
<p>All errors return JSON with the following structure:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Error message here&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VALIDATION_ERROR&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;req_abc123&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="common-http-status-codes">Common HTTP Status Codes<a class="heading-anchor" href="#common-http-status-codes" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>400</code></td>
<td>Bad Request - Invalid input</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Unauthorized - Missing or invalid auth</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Forbidden - Insufficient permissions</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Not Found</td>
</tr>
<tr>
<td><code>429</code></td>
<td>Too Many Requests - Rate limit exceeded</td>
</tr>
<tr>
<td><code>500</code></td>
<td>Internal Server Error</td>
</tr>
<tr>
<td><code>503</code></td>
<td>Service Unavailable</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="related-documentation">Related Documentation<a class="heading-anchor" href="#related-documentation" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="../guides/TUI_USER_GUIDE.html">TUI User Guide</a></li>
<li><a href="../guides/SCENARIOS.html">Scenarios Guide</a></li>
<li><a href="../guides/PROJECT_IMPORT.html">Project Import Guide</a></li>
<li><a href="../reference/API.html">API Reference (Internal)</a></li>
<li><a href="../guides/TROUBLESHOOTING.html">Troubleshooting</a></li>
</ul>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="index.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Previous</span>
        <span class="doc-page-nav-title">Overview</span>
      </a>

      <a href="WEBSOCKET_API.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Next</span>
        <span class="doc-page-nav-title">WebSocket API Reference</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Last updated: 2025-12-28</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/api/REST_API.md" target="_blank" rel="noopener">Edit on GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">On this page</div>
      <ul class="doc-toc-list">
        <li><a href="#codegraph-rest-api-documentation" class="level-1">CodeGraph REST API Documentation</a></li>
<li><a href="#table-of-contents" class="level-2">Table of Contents</a></li>
<li><a href="#overview" class="level-2">Overview</a></li>
<li><a href="#quick-start" class="level-2">Quick Start</a></li>
<li><a href="#1-install-dependencies" class="level-3">1. Install Dependencies</a></li>
<li><a href="#2-configure-environment" class="level-3">2. Configure Environment</a></li>
<li><a href="#edit-env-with-your-settings" class="level-1">Edit .env with your settings</a></li>
<li><a href="#3-initialize-database" class="level-3">3. Initialize Database</a></li>
<li><a href="#create-tables" class="level-1">Create tables</a></li>
<li><a href="#run-migrations" class="level-1">Run migrations</a></li>
<li><a href="#4-create-admin-user" class="level-3">4. Create Admin User</a></li>
<li><a href="#5-start-server" class="level-3">5. Start Server</a></li>
<li><a href="#environment-variables" class="level-2">Environment Variables</a></li>
<li><a href="#required" class="level-3">Required</a></li>
<li><a href="#server-settings" class="level-3">Server Settings</a></li>
<li><a href="#authentication" class="level-3">Authentication</a></li>
<li><a href="#oauth2-providers" class="level-3">OAuth2 Providers</a></li>
<li><a href="#ldapactive-directory" class="level-3">LDAP/Active Directory</a></li>
<li><a href="#rate-limiting" class="level-3">Rate Limiting</a></li>
<li><a href="#demo-endpoint" class="level-3">Demo Endpoint</a></li>
<li><a href="#authentication" class="level-2">Authentication</a></li>
<li><a href="#jwt-token-authentication" class="level-3">JWT Token Authentication</a></li>
<li><a href="#api-key-authentication" class="level-3">API Key Authentication</a></li>
<li><a href="#oauth2-authentication" class="level-3">OAuth2 Authentication</a></li>
<li><a href="#ldap-authentication" class="level-3">LDAP Authentication</a></li>
<li><a href="#api-endpoints" class="level-2">API Endpoints</a></li>
<li><a href="#demo-public-no-auth-required" class="level-3">Demo (Public - No Auth Required)</a></li>
<li><a href="#chat" class="level-3">Chat</a></li>
<li><a href="#scenarios" class="level-3">Scenarios</a></li>
<li><a href="#available-scenarios-16-total" class="level-3">Available Scenarios (16 total)</a></li>
<li><a href="#code-review" class="level-3">Code Review</a></li>
<li><a href="#sessions" class="level-3">Sessions</a></li>
<li><a href="#history" class="level-3">History</a></li>
<li><a href="#query-sql" class="level-3">Query (SQL)</a></li>
<li><a href="#project-import" class="level-3">Project Import</a></li>
<li><a href="#groups" class="level-3">Groups</a></li>
<li><a href="#projects" class="level-3">Projects</a></li>
<li><a href="#stats" class="level-3">Stats</a></li>
<li><a href="#health" class="level-3">Health</a></li>
<li><a href="#websocket-endpoints" class="level-2">WebSocket Endpoints</a></li>
<li><a href="#wschat" class="level-3">/ws/chat</a></li>
<li><a href="#wsjobs" class="level-3">/ws/jobs/</a></li>
<li><a href="#wsnotifications" class="level-3">/ws/notifications</a></li>
<li><a href="#rate-limiting" class="level-2">Rate Limiting</a></li>
<li><a href="#default-limits" class="level-3">Default Limits</a></li>
<li><a href="#endpoint-specific-limits" class="level-3">Endpoint-Specific Limits</a></li>
<li><a href="#rate-limit-headers" class="level-3">Rate Limit Headers</a></li>
<li><a href="#using-redis-for-rate-limiting" class="level-3">Using Redis for Rate Limiting</a></li>
<li><a href="#rbac-roles" class="level-2">RBAC Roles</a></li>
<li><a href="#database-setup" class="level-2">Database Setup</a></li>
<li><a href="#postgresql-connection" class="level-3">PostgreSQL Connection</a></li>
<li><a href="#create-database" class="level-1">Create database</a></li>
<li><a href="#set-connection-string" class="level-1">Set connection string</a></li>
<li><a href="#alembic-migrations" class="level-3">Alembic Migrations</a></li>
<li><a href="#apply-all-migrations" class="level-1">Apply all migrations</a></li>
<li><a href="#migrate-to-specific-revision" class="level-1">Migrate to specific revision</a></li>
<li><a href="#database-schema" class="level-3">Database Schema</a></li>
<li><a href="#cli-commands" class="level-2">CLI Commands</a></li>
<li><a href="#run-api-server" class="level-1">Run API server</a></li>
<li><a href="#initialize-database" class="level-1">Initialize database</a></li>
<li><a href="#run-migrations" class="level-1">Run migrations</a></li>
<li><a href="#create-admin-user" class="level-1">Create admin user</a></li>
<li><a href="#example-usage-curl" class="level-2">Example Usage (curl)</a></li>
<li><a href="#demo-endpoint-no-auth" class="level-3">Demo Endpoint (No Auth)</a></li>
<li><a href="#login" class="level-3">Login</a></li>
<li><a href="#chat-with-jwt" class="level-3">Chat with JWT</a></li>
<li><a href="#list-scenarios" class="level-3">List Scenarios</a></li>
<li><a href="#create-api-key" class="level-3">Create API Key</a></li>
<li><a href="#use-api-key" class="level-3">Use API Key</a></li>
<li><a href="#review-patch" class="level-3">Review Patch</a></li>
<li><a href="#error-responses" class="level-2">Error Responses</a></li>
<li><a href="#common-http-status-codes" class="level-3">Common HTTP Status Codes</a></li>
<li><a href="#related-documentation" class="level-2">Related Documentation</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI copilot for source code analysis</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Product</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Features</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Integrations</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Documentation</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Getting Started</a></li>
              <li><a href="../guides/index.html" class="footer-link">Guides</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Resources</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Contacts</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
