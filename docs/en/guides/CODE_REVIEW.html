<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: Automated Code Review">
  <meta name="keywords" content="CodeGraph, documentation, guides">

  <meta property="og:title" content="Automated Code Review - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: Automated Code Review">
  <meta property="og:type" content="article">

  <title>Automated Code Review - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Integrations</a></li>
        <li><a href="../index.html" class="nav-link active">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/guides/CODE_REVIEW.html" class="active">EN</a>
          <a href="../../ru/guides/CODE_REVIEW.html" class="">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Request Demo</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Integrations</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Request Demo</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Getting Started</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Overview</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Configuration Guide</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Installation Guide</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">User Guides</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Overview</a></li>
        <li><a href="BENCHMARK_GUIDE.html">Benchmark Framework Guide</a></li>
        <li><a href="CLI_GUIDE.html">CLI Guide</a></li>
        <li><a href="CODE_REVIEW.html" class="active">Automated Code Review</a></li>
        <li><a href="CPG_EXPORT.html">CPG Export Guide</a></li>
        <li><a href="MONITORING.html">Monitoring Guide</a></li>
        <li><a href="PROGRAMMATIC_GUIDE.html">User Guide</a></li>
        <li><a href="PROJECT_IMPORT.html">Importing a New Codebase</a></li>
        <li><a href="QUICK_REFERENCE.html">CodeGraph Quick Reference</a></li>
        <li><a href="REFACTORING.html">Refactoring Analysis Guide</a></li>
        <li><a href="SCENARIOS.html">Workflow Scenarios Guide</a></li>
        <li><a href="TROUBLESHOOTING.html">Troubleshooting Guide</a></li>
        <li><a href="TUI_USER_GUIDE.html">CodeGraph User Guide</a></li>
        <li><a href="01-onboarding.html">Scenario 01: Developer Onboarding</a></li>
        <li><a href="02-security-audit.html">Scenario 02: Security Audit</a></li>
        <li><a href="03-documentation.html">Scenario 03: Documentation Generation</a></li>
        <li><a href="04-feature-development.html">Scenario 04: Feature Development</a></li>
        <li><a href="05-refactoring.html">Scenario 05: Refactoring</a></li>
        <li><a href="06-performance.html">Scenario 06: Performance Analysis</a></li>
        <li><a href="07-test-coverage.html">Scenario 07: Test Coverage</a></li>
        <li><a href="08-compliance.html">Scenario 08: Compliance Checking</a></li>
        <li><a href="09-code-review.html">Scenario 09: Code Review</a></li>
        <li><a href="10-cross-repo.html">Scenario 10: Cross-Repository Analysis</a></li>
        <li><a href="11-architecture.html">Scenario 11: Architecture Analysis</a></li>
        <li><a href="12-tech-debt.html">Scenario 12: Tech Debt Assessment</a></li>
        <li><a href="13-mass-refactoring.html">Scenario 13: Mass Refactoring</a></li>
        <li><a href="14-incident-response.html">Scenario 14: Security Incident Response</a></li>
        <li><a href="15-debugging.html">Scenario 15: Debugging Assistance</a></li>
        <li><a href="16-entry-points.html">Scenario 16: Entry Point Discovery</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../api/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Integrations</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Technical Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../reference/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Overview</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Documentation</a>
        <span>/</span>
        <a href="index.html">User Guides</a>
        <span>/</span>
        <span>Automated Code Review</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>Automated Code Review</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="automated-code-review">Automated Code Review<a class="heading-anchor" href="#automated-code-review" title="Link to this section">&para;</a></h1>
<h2 id="table-of-contents">Table of Contents<a class="heading-anchor" href="#table-of-contents" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#programmatic-usage">Programmatic Usage</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#workflow-pipeline">Workflow Pipeline</a></li>
<li><a href="#components">Components</a></li>
<li><a href="#definition-of-done-dod">Definition of Done (DoD)</a></li>
<li><a href="#dod-sources">DoD Sources</a></li>
<li><a href="#dod-formats">DoD Formats</a></li>
<li><a href="#definition-of-done">Definition of Done</a></li>
<li><a href="#criterion-types">Criterion Types</a></li>
<li><a href="#interactive-dod-confirmation">Interactive DoD Confirmation</a></li>
<li><a href="#dod-validation">DoD Validation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#configcode_reviewyaml">config/code_review.yaml</a></li>
<li><a href="#environment-variables">Environment Variables</a></li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#reviewworkflow">ReviewWorkflow</a></li>
<li><a href="#reviewverdict">ReviewVerdict</a></li>
<li><a href="#dodvalidationresult">DoDValidationResult</a></li>
<li><a href="#output-formats">Output Formats</a></li>
<li><a href="#json-output">JSON Output</a></li>
<li><a href="#markdown-output">Markdown Output</a></li>
<li><a href="#patch-review-summary">Patch Review Summary</a></li>
<li><a href="#definition-of-done">Definition of Done</a></li>
<li><a href="#security-findings">Security Findings</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#dod-not-found">&ldquo;DoD not found&rdquo;</a></li>
<li><a href="#dod-validation-skipped">&ldquo;DoD validation skipped&rdquo;</a></li>
<li><a href="#jira-extraction-failed">&ldquo;Jira extraction failed&rdquo;</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#github-pr-integration">GitHub PR Integration</a></li>
<li><a href="#gitlab-mr-integration">GitLab MR Integration</a></li>
<li><a href="#manual-dod-creation">Manual DoD Creation</a></li>
</ul>
<h2 id="overview">Overview<a class="heading-anchor" href="#overview" title="Link to this section">&para;</a></h2>
<p>The automated code review system analyzes patches (git diffs, GitHub PRs, GitLab MRs) using Code Property Graph (CPG) analysis to provide comprehensive review feedback including:</p>
<ul>
<li>Security vulnerability detection</li>
<li>Performance impact analysis</li>
<li>Error risk assessment</li>
<li>Architecture impact analysis</li>
<li>Definition of Done (DoD) validation</li>
</ul>
<h2 id="quick-start">Quick Start<a class="heading-anchor" href="#quick-start" title="Link to this section">&para;</a></h2>
<h3 id="basic-usage">Basic Usage<a class="heading-anchor" href="#basic-usage" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run demo with default settings</span>
python<span class="w"> </span>demo_patch_review.py

<span class="c1"># With custom database</span>
python<span class="w"> </span>demo_patch_review.py<span class="w"> </span>--db<span class="w"> </span>/path/to/cpg.duckdb

<span class="c1"># Without DoD functionality</span>
python<span class="w"> </span>demo_patch_review.py<span class="w"> </span>--no-dod

<span class="c1"># Auto-generate DoD instead of extracting from PR</span>
python<span class="w"> </span>demo_patch_review.py<span class="w"> </span>--auto-dod

<span class="c1"># Interactive DoD confirmation (review and edit before proceeding)</span>
python<span class="w"> </span>demo_patch_review.py<span class="w"> </span>--interactive
python<span class="w"> </span>demo_patch_review.py<span class="w"> </span>-i
</code></pre></div>

<h3 id="programmatic-usage">Programmatic Usage<a class="heading-anchor" href="#programmatic-usage" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">duckdb</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.patch_review</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReviewWorkflow</span>

<span class="c1"># Connect to CPG database</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;cpg.duckdb&#39;</span><span class="p">)</span>

<span class="c1"># Configure DoD settings</span>
<span class="n">dod_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;auto_generate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;interactive&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Set True for interactive DoD confirmation</span>
    <span class="s1">&#39;extraction&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;pr_body&#39;</span><span class="p">,</span> <span class="s1">&#39;jira&#39;</span><span class="p">,</span> <span class="s1">&#39;commit_message&#39;</span><span class="p">],</span>
        <span class="s1">&#39;formats&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;checklist&#39;</span><span class="p">,</span> <span class="s1">&#39;yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;markdown&#39;</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># Create workflow</span>
<span class="n">workflow</span> <span class="o">=</span> <span class="n">ReviewWorkflow</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">dod_config</span><span class="o">=</span><span class="n">dod_config</span><span class="p">)</span>

<span class="c1"># Run review</span>
<span class="n">verdict</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">patch_source</span><span class="o">=</span><span class="s1">&#39;git_diff&#39;</span><span class="p">,</span>
    <span class="n">patch_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;diff&#39;</span><span class="p">:</span> <span class="n">diff_content</span><span class="p">},</span>
    <span class="n">pr_body</span><span class="o">=</span><span class="n">pr_description</span><span class="p">,</span>  <span class="c1"># For DoD extraction</span>
    <span class="n">task_description</span><span class="o">=</span><span class="n">task_desc</span><span class="p">,</span>  <span class="c1"># For DoD generation</span>
    <span class="n">interactive_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Set True for interactive DoD confirmation</span>
<span class="p">)</span>

<span class="c1"># Access results</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Score: </span><span class="si">{</span><span class="n">verdict</span><span class="o">.</span><span class="n">overall_score</span><span class="si">}</span><span class="s2">/100&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Recommendation: </span><span class="si">{</span><span class="n">verdict</span><span class="o">.</span><span class="n">recommendation</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># DoD validation results</span>
<span class="k">if</span> <span class="n">verdict</span><span class="o">.</span><span class="n">dod_validation</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DoD Compliance: </span><span class="si">{</span><span class="n">verdict</span><span class="o">.</span><span class="n">dod_validation</span><span class="o">.</span><span class="n">compliance_score</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="architecture">Architecture<a class="heading-anchor" href="#architecture" title="Link to this section">&para;</a></h2>
<h3 id="workflow-pipeline">Workflow Pipeline<a class="heading-anchor" href="#workflow-pipeline" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">parse_patch</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">extract_dod</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="o">[</span><span class="n">generate_dod</span><span class="o">]</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="o">[</span><span class="n">confirm_dod</span><span class="o">]</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">generate_delta_cpg</span>
<span class="w">    </span><span class="err">↓</span>
<span class="n">run_analyzers</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">generate_verdicts</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="k">aggregate</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">validate_dod</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="n">format_output</span>
</code></pre></div>

<p><strong>Notes:</strong>
- <code>[generate_dod]</code> runs only if DoD not found in sources
- <code>[confirm_dod]</code> runs only in interactive mode (<code>--interactive</code> flag)</p>
<h3 id="components">Components<a class="heading-anchor" href="#components" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PatchParser</code></td>
<td>Parses git diffs, GitHub PRs, GitLab MRs</td>
</tr>
<tr>
<td><code>DoDExtractor</code></td>
<td>Extracts DoD from PR body, Jira, commit message</td>
</tr>
<tr>
<td><code>DoDGenerator</code></td>
<td>Generates DoD using LLM when not found</td>
</tr>
<tr>
<td><code>DoDConfirmer</code></td>
<td>Interactive CLI confirmation for DoD (review, edit, skip)</td>
</tr>
<tr>
<td><code>DeltaCPGGenerator</code></td>
<td>Creates delta CPG overlay for changes</td>
</tr>
<tr>
<td><code>Analyzers</code></td>
<td>Call graph, dataflow, control flow, dependency</td>
</tr>
<tr>
<td><code>VerdictGenerators</code></td>
<td>Security, performance, error, architecture</td>
</tr>
<tr>
<td><code>DoDValidator</code></td>
<td>Validates DoD against review findings</td>
</tr>
<tr>
<td><code>VerdictAggregator</code></td>
<td>Combines verdicts into final review</td>
</tr>
</tbody>
</table></div>
<h2 id="definition-of-done-dod">Definition of Done (DoD)<a class="heading-anchor" href="#definition-of-done-dod" title="Link to this section">&para;</a></h2>
<h3 id="dod-sources">DoD Sources<a class="heading-anchor" href="#dod-sources" title="Link to this section">&para;</a></h3>
<p>The system can extract DoD from multiple sources (configurable priority):</p>
<ol>
<li><strong>PR Body</strong> - Markdown checklist in PR/MR description</li>
<li><strong>Jira</strong> - Custom field or description from linked ticket</li>
<li><strong>Commit Message</strong> - DoD section in first commit</li>
<li><strong>Manual Input</strong> - CLI or API input</li>
<li><strong>Auto-Generated</strong> - LLM generates from task description</li>
</ol>
<h3 id="dod-formats">DoD Formats<a class="heading-anchor" href="#dod-formats" title="Link to this section">&para;</a></h3>
<p>Supported formats for DoD extraction:</p>
<h4 id="markdown-checklist">Markdown Checklist<a class="heading-anchor" href="#markdown-checklist" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="gu">## Definition of Done</span>

<span class="k">- [ ]</span> Feature works as expected
<span class="k">- [ ]</span> No security vulnerabilities introduced
<span class="k">- [ ]</span> Unit tests added
<span class="k">- [ ]</span> Documentation updated
</code></pre></div>

<h4 id="yaml-block">YAML Block<a class="heading-anchor" href="#yaml-block" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="err">```</span><span class="l l-Scalar l-Scalar-Plain">yaml</span>
<span class="l l-Scalar l-Scalar-Plain">dod</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Feature works as expected</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functional</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Unit tests pass</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="err">####</span><span class="w"> </span><span class="nx">JSON</span><span class="w"> </span><span class="nx">Block</span>
<span class="err">```</span><span class="nx">json</span>
<span class="err">```</span><span class="nx">json</span>
<span class="p">{</span>
<span class="w">  </span><span class="s">&quot;dod&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="s">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Feature works&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;functional&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="s">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Tests pass&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">### Criterion Types</span>

<span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Description</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Validation</span><span class="w"> </span><span class="o">|</span>
<span class="o">|------|-------------|------------|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`functional`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Feature</span><span class="w"> </span><span class="n">requirements</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Manual</span><span class="w"> </span><span class="n">review</span><span class="w"> </span><span class="p">(</span><span class="n">cannot</span><span class="w"> </span><span class="n">auto</span><span class="o">-</span><span class="n">validate</span><span class="p">)</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`security`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="n">vulnerabilities</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Security</span><span class="w"> </span><span class="n">verdict</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`test`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Tests</span><span class="w"> </span><span class="n">added</span><span class="o">/</span><span class="n">passing</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Error</span><span class="w"> </span><span class="n">verdict</span><span class="w"> </span><span class="n">suggestions</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`documentation`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Docs</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Manual</span><span class="w"> </span><span class="n">review</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`performance`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="n">regressions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">verdict</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`code_quality`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Style</span><span class="w"> </span><span class="n">compliance</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Architecture</span><span class="w"> </span><span class="n">verdict</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span>

<span class="c1">### Interactive DoD Confirmation</span>

<span class="k">When</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n n-Quoted">`--interactive`</span><span class="w"> </span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">review</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="n">DoD</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">review</span><span class="w"> </span><span class="n">proceeds</span><span class="o">:</span>
</code></pre></div>

<p>============================================================
DEFINITION OF DONE - CONFIRMATION
============================================================</p>
<h2 id="current-dod-from-pr-body">Current DoD (from pr_body):<a class="heading-anchor" href="#current-dod-from-pr-body" title="Link to this section">&para;</a></h2>
<ol>
<li>[FUNC] Feature works as expected</li>
<li>[SECU] No security vulnerabilities introduced</li>
<li>[TEST] Unit tests added for new functionality</li>
<li>[PERF] No performance regressions</li>
<li>[CODE] Code follows project style guidelines</li>
</ol>
<hr />
<p>Total: 5 items</p>
<p>Options:
  [c] Confirm and continue
  [e] Edit items
  [a] Add new item
  [r] Remove item
  [s] Skip DoD validation
  [q] Quit review</p>
<div class="highlight"><pre><span></span><code><span class="o">**</span><span class="k">Options</span><span class="o">:**</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Confirm</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Accept</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">DoD</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">proceed</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">review</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Edit</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Modify</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">descriptions</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">types</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="k">Add</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DoD</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="n">selection</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="k">Remove</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Delete</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">list</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="k">Skip</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Skip</span><span class="w"> </span><span class="n">DoD</span><span class="w"> </span><span class="k">validation</span><span class="w"> </span><span class="n">entirely</span><span class="w"> </span><span class="p">(</span><span class="n">review</span><span class="w"> </span><span class="n">proceeds</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="n">DoD</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Quit</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">**</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Cancel</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">review</span>

<span class="o">**</span><span class="k">Type</span><span class="w"> </span><span class="n">shortcuts</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">adding</span><span class="o">/</span><span class="n">editing</span><span class="o">:**</span>
<span class="o">|</span><span class="w"> </span><span class="n">Shortcut</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="o">|</span>
<span class="o">|----------|------|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`f`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Functional</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`s`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Security</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`t`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`d`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Documentation</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`p`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n n-Quoted">`q`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Code</span><span class="w"> </span><span class="n">Quality</span><span class="w"> </span><span class="o">|</span>

<span class="c1">### DoD Validation</span>

<span class="k">Each</span><span class="w"> </span><span class="n">DoD</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">validated</span><span class="w"> </span><span class="k">against</span><span class="w"> </span><span class="n">review</span><span class="w"> </span><span class="n">findings</span><span class="o">:</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="k">Security</span><span class="o">**</span><span class="w"> </span><span class="n">items</span><span class="o">:</span><span class="w"> </span><span class="n">Validated</span><span class="w"> </span><span class="k">against</span><span class="w"> </span><span class="k">security</span><span class="w"> </span><span class="n">verdict</span><span class="w"> </span><span class="p">(</span><span class="n">critical</span><span class="o">/</span><span class="n">high</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">fail</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Test</span><span class="o">**</span><span class="w"> </span><span class="n">items</span><span class="o">:</span><span class="w"> </span><span class="n">Validated</span><span class="w"> </span><span class="k">against</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">suggestions</span><span class="w"> </span><span class="n">count</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Performance</span><span class="o">**</span><span class="w"> </span><span class="n">items</span><span class="o">:</span><span class="w"> </span><span class="n">Validated</span><span class="w"> </span><span class="k">against</span><span class="w"> </span><span class="n">performance</span><span class="w"> </span><span class="n">score</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="k">Code</span><span class="w"> </span><span class="n">Quality</span><span class="o">**</span><span class="w"> </span><span class="n">items</span><span class="o">:</span><span class="w"> </span><span class="n">Validated</span><span class="w"> </span><span class="k">against</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="n">score</span>
<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Functional</span><span class="o">/</span><span class="n">Documentation</span><span class="o">**:</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">auto</span><span class="o">-</span><span class="n">validated</span><span class="w"> </span><span class="p">(</span><span class="n">pending</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">manual</span><span class="w"> </span><span class="n">review</span><span class="p">)</span>

<span class="c1">## Configuration</span>

<span class="c1">### config/code_review.yaml</span>

<span class="n n-Quoted">`</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">yaml</span>
<span class="n n-Quoted"># Definition of Done Configuration</span>
<span class="n n-Quoted">dod:</span>
<span class="n n-Quoted">  sources:</span>
<span class="n n-Quoted">    - pr_body</span>
<span class="n n-Quoted">    - jira</span>
<span class="n n-Quoted">    - commit_message</span>
<span class="n n-Quoted">    - manual</span>
<span class="n n-Quoted">  source_priority:</span>
<span class="n n-Quoted">    - pr_body</span>
<span class="n n-Quoted">    - jira</span>
<span class="n n-Quoted">    - commit_message</span>
<span class="n n-Quoted">  formats:</span>
<span class="n n-Quoted">    - checklist</span>
<span class="n n-Quoted">    - yaml</span>
<span class="n n-Quoted">    - markdown</span>
<span class="n n-Quoted">    - json</span>
<span class="n n-Quoted">  auto_generate: true</span>
<span class="n n-Quoted">  interactive_confirm: false  # Enable for CLI confirmation prompts</span>

<span class="n n-Quoted">  # Jira integration</span>
<span class="n n-Quoted">  jira:</span>
<span class="n n-Quoted">    url: ${JIRA_URL}</span>
<span class="n n-Quoted">    api_key: ${JIRA_API_KEY}</span>
<span class="n n-Quoted">    dod_field: &quot;customfield_10001&quot;</span>

<span class="n n-Quoted">  # Validation settings</span>
<span class="n n-Quoted">  validation:</span>
<span class="n n-Quoted">    strict_mode: false</span>
<span class="n n-Quoted">    blocking_severities:</span>
<span class="n n-Quoted">      - critical</span>
<span class="n n-Quoted">      - high</span>

<span class="n n-Quoted"># Review Policy</span>
<span class="n n-Quoted">policy:</span>
<span class="n n-Quoted">  block_on_critical_security: true</span>
<span class="n n-Quoted">  min_score_to_approve: 70.0</span>
<span class="n n-Quoted">  require_dod_compliance: false</span>
<span class="n n-Quoted">  min_dod_compliance_score: 60.0</span>

<span class="n n-Quoted"># Verdict Weights</span>
<span class="n n-Quoted">verdicts:</span>
<span class="n n-Quoted">  weights:</span>
<span class="n n-Quoted">    security: 0.35</span>
<span class="n n-Quoted">    performance: 0.20</span>
<span class="n n-Quoted">    error: 0.25</span>
<span class="n n-Quoted">    architecture: 0.20</span>
<span class="n n-Quoted">  dod_compliance_weight: 0.10</span>
</code></pre></div>

<h3 id="environment-variables">Environment Variables<a class="heading-anchor" href="#environment-variables" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>JIRA_URL</code></td>
<td>Jira server URL for DoD extraction</td>
</tr>
<tr>
<td><code>JIRA_API_KEY</code></td>
<td>Jira API authentication key</td>
</tr>
<tr>
<td><code>GITHUB_TOKEN</code></td>
<td>GitHub API token for PR access</td>
</tr>
<tr>
<td><code>GITLAB_TOKEN</code></td>
<td>GitLab API token for MR access</td>
</tr>
</tbody>
</table></div>
<h2 id="api-reference">API Reference<a class="heading-anchor" href="#api-reference" title="Link to this section">&para;</a></h2>
<h3 id="reviewworkflow">ReviewWorkflow<a class="heading-anchor" href="#reviewworkflow" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">workflow</span> <span class="o">=</span> <span class="n">ReviewWorkflow</span><span class="p">(</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AggregationConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">policy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReviewPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dod_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">verdict</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">patch_source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="c1"># &#39;git_diff&#39;, &#39;github_pr&#39;, &#39;gitlab_mr&#39;</span>
    <span class="n">patch_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">session_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">policy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReviewPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">task_description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pr_body</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">jira_ticket</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">interactive_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="reviewverdict">ReviewVerdict<a class="heading-anchor" href="#reviewverdict" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReviewVerdict</span><span class="p">:</span>
    <span class="n">patch_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">overall_score</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># 0-100</span>
    <span class="n">recommendation</span><span class="p">:</span> <span class="n">Recommendation</span>  <span class="c1"># APPROVE, REQUEST_CHANGES, BLOCK, COMMENT</span>

    <span class="c1"># Sub-verdicts</span>
    <span class="n">security</span><span class="p">:</span> <span class="n">SecurityVerdict</span>
    <span class="n">performance</span><span class="p">:</span> <span class="n">PerformanceVerdict</span>
    <span class="n">error</span><span class="p">:</span> <span class="n">ErrorVerdict</span>
    <span class="n">architecture</span><span class="p">:</span> <span class="n">ArchitectureVerdict</span>

    <span class="c1"># Findings</span>
    <span class="n">all_findings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Finding</span><span class="p">]</span>
    <span class="n">critical_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">high_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">medium_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">low_count</span><span class="p">:</span> <span class="nb">int</span>

    <span class="c1"># DoD</span>
    <span class="n">dod_validation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DoDValidationResult</span><span class="p">]</span>
    <span class="n">dod_compliance_score</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># 0-100</span>
</code></pre></div>

<h3 id="dodvalidationresult">DoDValidationResult<a class="heading-anchor" href="#dodvalidationresult" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DoDValidationResult</span><span class="p">:</span>
    <span class="n">dod</span><span class="p">:</span> <span class="n">DefinitionOfDone</span>
    <span class="n">total_items</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">satisfied_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">failed_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">pending_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">compliance_score</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># 0-100</span>
    <span class="n">blocking_failures</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">DoDItem</span><span class="p">]</span>
    <span class="n">is_compliant</span><span class="p">:</span> <span class="nb">bool</span>  <span class="c1"># True if all items satisfied</span>
</code></pre></div>

<h2 id="output-formats">Output Formats<a class="heading-anchor" href="#output-formats" title="Link to this section">&para;</a></h2>
<h3 id="json-output">JSON Output<a class="heading-anchor" href="#json-output" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;patch_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PATCH_abc123&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;overall_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">45.5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;recommendation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;REQUEST_CHANGES&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dod_compliance_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">60.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;findings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;dod_validation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;compliance_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">60.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;satisfied&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;evidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;satisfied&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;evidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="markdown-output">Markdown Output<a class="heading-anchor" href="#markdown-output" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="gu">## Patch Review Summary</span>

<span class="gs">**Overall Score:**</span> 45/100
<span class="gs">**Recommendation:**</span> REQUEST_CHANGES

<span class="gu">### Definition of Done</span>

<span class="gs">**Compliance Score:**</span> 60%

<span class="k">-</span><span class="w"> </span>✅ Feature works as expected
<span class="k">-</span><span class="w"> </span>❌ No security vulnerabilities introduced
<span class="w">  </span><span class="k">-</span><span class="w"> </span>Evidence: Security issues found: SQL Injection
<span class="k">-</span><span class="w"> </span>⏳ Unit tests added (pending manual review)

<span class="gu">### Security Findings</span>

<span class="k">1.</span> [HIGH] SQL Injection vulnerability
<span class="w">   </span><span class="k">-</span><span class="w"> </span>Location: src/auth/login.py:14
<span class="w">   </span><span class="k">-</span><span class="w"> </span>CWE-89
</code></pre></div>

<h2 id="troubleshooting">Troubleshooting<a class="heading-anchor" href="#troubleshooting" title="Link to this section">&para;</a></h2>
<h3 id="dod-not-found">&ldquo;DoD not found&rdquo;<a class="heading-anchor" href="#dod-not-found" title="Link to this section">&para;</a></h3>
<p>If DoD is not being extracted:</p>
<ol>
<li>Check that PR body contains DoD section with correct format</li>
<li>Verify <code>dod.sources</code> includes your source type</li>
<li>Check <code>dod.formats</code> includes your DoD format</li>
<li>Enable <code>auto_generate: true</code> to generate when not found</li>
</ol>
<h3 id="dod-validation-skipped">&ldquo;DoD validation skipped&rdquo;<a class="heading-anchor" href="#dod-validation-skipped" title="Link to this section">&para;</a></h3>
<p>DoD validation requires:
- DoD successfully extracted or generated
- Review verdict generated
- No workflow errors</p>
<h3 id="jira-extraction-failed">&ldquo;Jira extraction failed&rdquo;<a class="heading-anchor" href="#jira-extraction-failed" title="Link to this section">&para;</a></h3>
<ol>
<li>Verify JIRA_URL and JIRA_API_KEY environment variables</li>
<li>Check Jira API permissions</li>
<li>Verify <code>dod_field</code> points to correct custom field</li>
</ol>
<h2 id="examples">Examples<a class="heading-anchor" href="#examples" title="Link to this section">&para;</a></h2>
<h3 id="github-pr-integration">GitHub PR Integration<a class="heading-anchor" href="#github-pr-integration" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Parse GitHub PR event</span>
<span class="n">pr_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Add authentication&#39;</span><span class="p">,</span>
    <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="n">pr_body_with_dod</span><span class="p">,</span>
    <span class="s1">&#39;diff_url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://api.github.com/repos/...&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">verdict</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">patch_source</span><span class="o">=</span><span class="s1">&#39;github_pr&#39;</span><span class="p">,</span>
    <span class="n">patch_data</span><span class="o">=</span><span class="n">pr_data</span><span class="p">,</span>
    <span class="n">pr_body</span><span class="o">=</span><span class="n">pr_data</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="gitlab-mr-integration">GitLab MR Integration<a class="heading-anchor" href="#gitlab-mr-integration" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">mr_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;iid&#39;</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span>
    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Add authentication&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">mr_description_with_dod</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">verdict</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="n">patch_source</span><span class="o">=</span><span class="s1">&#39;gitlab_mr&#39;</span><span class="p">,</span>
    <span class="n">patch_data</span><span class="o">=</span><span class="n">mr_data</span><span class="p">,</span>
    <span class="n">pr_body</span><span class="o">=</span><span class="n">mr_data</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="manual-dod-creation">Manual DoD Creation<a class="heading-anchor" href="#manual-dod-creation" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.patch_review.dod</span><span class="w"> </span><span class="kn">import</span> <span class="n">DoDExtractor</span>

<span class="n">extractor</span> <span class="o">=</span> <span class="n">DoDExtractor</span><span class="p">()</span>
<span class="n">dod</span> <span class="o">=</span> <span class="n">extractor</span><span class="o">.</span><span class="n">create_manual_dod</span><span class="p">(</span>
    <span class="n">items</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Feature works as expected&quot;</span><span class="p">,</span>
        <span class="s2">&quot;No security vulnerabilities&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Unit tests added&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;functional&quot;</span><span class="p">,</span> <span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="CPG_EXPORT.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Previous</span>
        <span class="doc-page-nav-title">CPG Export Guide</span>
      </a>

      <a href="REFACTORING.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Next</span>
        <span class="doc-page-nav-title">Refactoring Analysis Guide</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Last updated: 2025-12-28</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/guides/CODE_REVIEW.md" target="_blank" rel="noopener">Edit on GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">On this page</div>
      <ul class="doc-toc-list">
        <li><a href="#automated-code-review" class="level-1">Automated Code Review</a></li>
<li><a href="#table-of-contents" class="level-2">Table of Contents</a></li>
<li><a href="#overview" class="level-2">Overview</a></li>
<li><a href="#quick-start" class="level-2">Quick Start</a></li>
<li><a href="#basic-usage" class="level-3">Basic Usage</a></li>
<li><a href="#run-demo-with-default-settings" class="level-1">Run demo with default settings</a></li>
<li><a href="#with-custom-database" class="level-1">With custom database</a></li>
<li><a href="#without-dod-functionality" class="level-1">Without DoD functionality</a></li>
<li><a href="#auto-generate-dod-instead-of-extracting-from-pr" class="level-1">Auto-generate DoD instead of extracting from PR</a></li>
<li><a href="#interactive-dod-confirmation-review-and-edit-before-proceeding" class="level-1">Interactive DoD confirmation (review and edit before proceeding)</a></li>
<li><a href="#programmatic-usage" class="level-3">Programmatic Usage</a></li>
<li><a href="#connect-to-cpg-database" class="level-1">Connect to CPG database</a></li>
<li><a href="#configure-dod-settings" class="level-1">Configure DoD settings</a></li>
<li><a href="#create-workflow" class="level-1">Create workflow</a></li>
<li><a href="#run-review" class="level-1">Run review</a></li>
<li><a href="#access-results" class="level-1">Access results</a></li>
<li><a href="#dod-validation-results" class="level-1">DoD validation results</a></li>
<li><a href="#architecture" class="level-2">Architecture</a></li>
<li><a href="#workflow-pipeline" class="level-3">Workflow Pipeline</a></li>
<li><a href="#components" class="level-3">Components</a></li>
<li><a href="#definition-of-done-dod" class="level-2">Definition of Done (DoD)</a></li>
<li><a href="#dod-sources" class="level-3">DoD Sources</a></li>
<li><a href="#dod-formats" class="level-3">DoD Formats</a></li>
<li><a href="#definition-of-done" class="level-2">Definition of Done</a></li>
<li><a href="#criterion-types" class="level-3">Criterion Types</a></li>
<li><a href="#interactive-dod-confirmation" class="level-3">Interactive DoD Confirmation</a></li>
<li><a href="#dod-validation" class="level-3">DoD Validation</a></li>
<li><a href="#configuration" class="level-2">Configuration</a></li>
<li><a href="#configcode-reviewyaml" class="level-3">config/code_review.yaml</a></li>
<li><a href="#definition-of-done-configuration" class="level-1">Definition of Done Configuration</a></li>
<li><a href="#review-policy" class="level-1">Review Policy</a></li>
<li><a href="#verdict-weights" class="level-1">Verdict Weights</a></li>
<li><a href="#environment-variables" class="level-3">Environment Variables</a></li>
<li><a href="#api-reference" class="level-2">API Reference</a></li>
<li><a href="#reviewworkflow" class="level-3">ReviewWorkflow</a></li>
<li><a href="#reviewverdict" class="level-3">ReviewVerdict</a></li>
<li><a href="#dodvalidationresult" class="level-3">DoDValidationResult</a></li>
<li><a href="#output-formats" class="level-2">Output Formats</a></li>
<li><a href="#json-output" class="level-3">JSON Output</a></li>
<li><a href="#markdown-output" class="level-3">Markdown Output</a></li>
<li><a href="#patch-review-summary" class="level-2">Patch Review Summary</a></li>
<li><a href="#definition-of-done" class="level-3">Definition of Done</a></li>
<li><a href="#security-findings" class="level-3">Security Findings</a></li>
<li><a href="#troubleshooting" class="level-2">Troubleshooting</a></li>
<li><a href="#dod-not-found" class="level-3">"DoD not found"</a></li>
<li><a href="#dod-validation-skipped" class="level-3">"DoD validation skipped"</a></li>
<li><a href="#jira-extraction-failed" class="level-3">"Jira extraction failed"</a></li>
<li><a href="#examples" class="level-2">Examples</a></li>
<li><a href="#github-pr-integration" class="level-3">GitHub PR Integration</a></li>
<li><a href="#parse-github-pr-event" class="level-1">Parse GitHub PR event</a></li>
<li><a href="#gitlab-mr-integration" class="level-3">GitLab MR Integration</a></li>
<li><a href="#manual-dod-creation" class="level-3">Manual DoD Creation</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI copilot for source code analysis</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Product</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Features</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Integrations</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Documentation</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Getting Started</a></li>
              <li><a href="../guides/index.html" class="footer-link">Guides</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Resources</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Contacts</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
