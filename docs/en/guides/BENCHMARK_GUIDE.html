<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: Benchmark Framework Guide">
  <meta name="keywords" content="CodeGraph, documentation, guides">

  <meta property="og:title" content="Benchmark Framework Guide - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: Benchmark Framework Guide">
  <meta property="og:type" content="article">

  <title>Benchmark Framework Guide - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Integrations</a></li>
        <li><a href="../index.html" class="nav-link active">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/guides/BENCHMARK_GUIDE.html" class="active">EN</a>
          <a href="../../ru/guides/BENCHMARK_GUIDE.html" class="">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Request Demo</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Problems</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Solution</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Features</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Integrations</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Documentation</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Request Demo</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Getting Started</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Overview</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Configuration Guide</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Installation Guide</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">User Guides</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Overview</a></li>
        <li><a href="BENCHMARK_GUIDE.html" class="active">Benchmark Framework Guide</a></li>
        <li><a href="CLI_GUIDE.html">CLI Guide</a></li>
        <li><a href="CODE_REVIEW.html">Automated Code Review</a></li>
        <li><a href="CPG_EXPORT.html">CPG Export Guide</a></li>
        <li><a href="MONITORING.html">Monitoring Guide</a></li>
        <li><a href="PROGRAMMATIC_GUIDE.html">User Guide</a></li>
        <li><a href="PROJECT_IMPORT.html">Importing a New Codebase</a></li>
        <li><a href="QUICK_REFERENCE.html">CodeGraph Quick Reference</a></li>
        <li><a href="REFACTORING.html">Refactoring Analysis Guide</a></li>
        <li><a href="SCENARIOS.html">Workflow Scenarios Guide</a></li>
        <li><a href="TROUBLESHOOTING.html">Troubleshooting Guide</a></li>
        <li><a href="TUI_USER_GUIDE.html">CodeGraph User Guide</a></li>
        <li><a href="01-onboarding.html">Scenario 01: Developer Onboarding</a></li>
        <li><a href="02-security-audit.html">Scenario 02: Security Audit</a></li>
        <li><a href="03-documentation.html">Scenario 03: Documentation Generation</a></li>
        <li><a href="04-feature-development.html">Scenario 04: Feature Development</a></li>
        <li><a href="05-refactoring.html">Scenario 05: Refactoring</a></li>
        <li><a href="06-performance.html">Scenario 06: Performance Analysis</a></li>
        <li><a href="07-test-coverage.html">Scenario 07: Test Coverage</a></li>
        <li><a href="08-compliance.html">Scenario 08: Compliance Checking</a></li>
        <li><a href="09-code-review.html">Scenario 09: Code Review</a></li>
        <li><a href="10-cross-repo.html">Scenario 10: Cross-Repository Analysis</a></li>
        <li><a href="11-architecture.html">Scenario 11: Architecture Analysis</a></li>
        <li><a href="12-tech-debt.html">Scenario 12: Tech Debt Assessment</a></li>
        <li><a href="13-mass-refactoring.html">Scenario 13: Mass Refactoring</a></li>
        <li><a href="14-incident-response.html">Scenario 14: Security Incident Response</a></li>
        <li><a href="15-debugging.html">Scenario 15: Debugging Assistance</a></li>
        <li><a href="16-entry-points.html">Scenario 16: Entry Point Discovery</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../api/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Integrations</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Technical Reference</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../reference/index.html">Overview</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Overview</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Documentation</a>
        <span>/</span>
        <a href="index.html">User Guides</a>
        <span>/</span>
        <span>Benchmark Framework Guide</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>Benchmark Framework Guide</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="benchmark-framework-guide">Benchmark Framework Guide<a class="heading-anchor" href="#benchmark-framework-guide" title="Link to this section">&para;</a></h1>
<p><strong>Hybrid Retrieval Benchmark - Phase 1 Evaluation</strong></p>
<p>This guide explains how to use the benchmark framework to evaluate hybrid retrieval performance.</p>
<h2 id="table-of-contents">Table of Contents<a class="heading-anchor" href="#table-of-contents" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#1-run-synthetic-demo">1. Run Synthetic Demo</a></li>
<li><a href="#2-run-with-real-data">2. Run With Real Data</a></li>
<li><a href="#llm-provider-selection">LLM Provider Selection</a></li>
<li><a href="#supported-providers">Supported Providers</a></li>
<li><a href="#usage-examples">Usage Examples</a></li>
<li><a href="#provider-configuration">Provider Configuration</a></li>
<li><a href="#provider-specific-notes">Provider-Specific Notes</a></li>
<li><a href="#benchmark-dataset">Benchmark Dataset</a></li>
<li><a href="#semantic-queries-4-queries">Semantic Queries (4 queries)</a></li>
<li><a href="#structural-queries-4-queries">Structural Queries (4 queries)</a></li>
<li><a href="#security-queries-3-queries">Security Queries (3 queries)</a></li>
<li><a href="#metrics-explained">Metrics Explained</a></li>
<li><a href="#precisionk">Precision@K</a></li>
<li><a href="#recallk">Recall@K</a></li>
<li><a href="#f1k">F1@K</a></li>
<li><a href="#mean-reciprocal-rank-mrr">Mean Reciprocal Rank (MRR)</a></li>
<li><a href="#normalized-discounted-cumulative-gain-ndcgk">Normalized Discounted Cumulative Gain (NDCG@K)</a></li>
<li><a href="#custom-benchmark-queries">Custom Benchmark Queries</a></li>
<li><a href="#output-files">Output Files</a></li>
<li><a href="#1-json-report-benchmark_resultshybrid_benchmark_timestampjson">1. JSON Report (<code>benchmark_results/hybrid_benchmark_&lt;timestamp&gt;.json</code>)</a></li>
<li><a href="#2-markdown-report-benchmark_resultshybrid_benchmark_timestampmd">2. Markdown Report (<code>benchmark_results/hybrid_benchmark_&lt;timestamp&gt;.md</code>)</a></li>
<li><a href="#understanding-results">Understanding Results</a></li>
<li><a href="#interpreting-improvements">Interpreting Improvements</a></li>
<li><a href="#example-analysis">Example Analysis</a></li>
<li><a href="#performance-considerations">Performance Considerations</a></li>
<li><a href="#latency">Latency</a></li>
<li><a href="#caching">Caching</a></li>
<li><a href="#unit-tests">Unit Tests</a></li>
<li><a href="#reproducibility">Reproducibility</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#1-diverse-query-set">1. Diverse Query Set</a></li>
<li><a href="#2-representative-ground-truth">2. Representative Ground Truth</a></li>
<li><a href="#3-multiple-metrics">3. Multiple Metrics</a></li>
<li><a href="#4-error-analysis">4. Error Analysis</a></li>
<li><a href="#research-contributions">Research Contributions</a></li>
<li><a href="#citation">Citation</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#error-no-module-named-srcretrieval">Error: &ldquo;No module named &lsquo;src.retrieval&rsquo;&rdquo;</a></li>
<li><a href="#error-modulenotfounderror-vectorstore">Error: &ldquo;ModuleNotFoundError: VectorStore&rdquo;</a></li>
<li><a href="#synthetic-results-look-unrealistic">Synthetic Results Look Unrealistic</a></li>
<li><a href="#next-steps">Next Steps</a></li>
<li><a href="#support">Support</a></li>
</ul>
<h2 id="overview">Overview<a class="heading-anchor" href="#overview" title="Link to this section">&para;</a></h2>
<p>The benchmark framework compares three retrieval modes:
- <strong>Vector-only</strong>: Pure semantic search using ChromaDB
- <strong>Graph-only</strong>: Pure structural search using DuckDB/CPG
- <strong>Hybrid</strong>: RRF-merged combination of both</p>
<h2 id="quick-start">Quick Start<a class="heading-anchor" href="#quick-start" title="Link to this section">&para;</a></h2>
<h3 id="1-run-synthetic-demo">1. Run Synthetic Demo<a class="heading-anchor" href="#1-run-synthetic-demo" title="Link to this section">&para;</a></h3>
<p>The synthetic demo simulates realistic retrieval patterns without requiring actual data:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>demo_benchmark.py
</code></pre></div>

<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">================================================================================</span>
<span class="n">BENCHMARK</span><span class="w"> </span><span class="n">SUMMARY</span>
<span class="o">================================================================================</span>
<span class="n">Metric</span><span class="w">               </span><span class="n">Vector</span><span class="w">       </span><span class="n">Graph</span><span class="w">        </span><span class="n">Hybrid</span><span class="w">       </span><span class="n">vs</span><span class="w"> </span><span class="n">Vector</span><span class="w">    </span><span class="n">vs</span><span class="w"> </span><span class="n">Graph</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">Precision</span><span class="mi">@10</span><span class="w">         </span><span class="mf">0.2182</span><span class="w">       </span><span class="mf">0.2000</span><span class="w">       </span><span class="mf">0.3000</span><span class="w">       </span><span class="o">+</span><span class="mf">37.5</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">50.0</span><span class="o">%</span>
<span class="n">Recall</span><span class="mi">@10</span><span class="w">            </span><span class="mf">0.4327</span><span class="w">       </span><span class="mf">0.3543</span><span class="w">       </span><span class="mf">0.5528</span><span class="w">       </span><span class="o">+</span><span class="mf">27.8</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">56.0</span><span class="o">%</span>
<span class="n">F1</span><span class="mi">@10</span><span class="w">                </span><span class="mf">0.2864</span><span class="w">       </span><span class="mf">0.2510</span><span class="w">       </span><span class="mf">0.3825</span><span class="w">       </span><span class="o">+</span><span class="mf">33.6</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">52.4</span><span class="o">%</span>
<span class="n">MRR</span><span class="w">                  </span><span class="mf">1.0000</span><span class="w">       </span><span class="mf">0.6364</span><span class="w">       </span><span class="mf">1.0000</span><span class="w">       </span><span class="o">+</span><span class="mf">0.0</span><span class="o">%</span><span class="w">        </span><span class="o">+</span><span class="mf">57.1</span><span class="o">%</span>
<span class="n">NDCG</span><span class="mi">@10</span><span class="w">              </span><span class="mf">0.5304</span><span class="w">       </span><span class="mf">0.4443</span><span class="w">       </span><span class="mf">0.6590</span><span class="w">       </span><span class="o">+</span><span class="mf">24.3</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">48.3</span><span class="o">%</span>
</code></pre></div>

<p><strong>Key Findings:</strong>
- Hybrid achieves <strong>+33.6% F1@10 improvement</strong> over vector-only
- Hybrid achieves <strong>+52.4% F1@10 improvement</strong> over graph-only
- Hybrid combines strengths: semantic understanding + structural traversal</p>
<h3 id="2-run-with-real-data">2. Run With Real Data<a class="heading-anchor" href="#2-run-with-real-data" title="Link to this section">&para;</a></h3>
<p>To benchmark with real ChromaDB and DuckDB data:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">benchmark_hybrid_retrieval</span><span class="w"> </span><span class="kn">import</span> <span class="n">HybridRetrievalBenchmark</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.retrieval.vector_store_real</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorStoreReal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.services.cpg_query_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">CPGQueryService</span>

<span class="c1"># Initialize stores</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorStoreReal</span><span class="p">(</span><span class="n">persist_directory</span><span class="o">=</span><span class="s2">&quot;chroma_db&quot;</span><span class="p">)</span>
<span class="n">cpg_service</span> <span class="o">=</span> <span class="n">CPGQueryService</span><span class="p">(</span><span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">)</span>

<span class="c1"># Create benchmark</span>
<span class="n">benchmark</span> <span class="o">=</span> <span class="n">HybridRetrievalBenchmark</span><span class="p">(</span>
    <span class="n">vector_store</span><span class="o">=</span><span class="n">vector_store</span><span class="p">,</span>
    <span class="n">cpg_service</span><span class="o">=</span><span class="n">cpg_service</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;benchmark_results&quot;</span>
<span class="p">)</span>

<span class="c1"># Run benchmark</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">benchmark</span><span class="o">.</span><span class="n">run_benchmark</span><span class="p">())</span>

<span class="c1"># Save results</span>
<span class="n">benchmark</span><span class="o">.</span><span class="n">save_report</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</code></pre></div>

<h2 id="llm-provider-selection">LLM Provider Selection<a class="heading-anchor" href="#llm-provider-selection" title="Link to this section">&para;</a></h2>
<p>The benchmark runner supports multiple LLM providers for RAGAS evaluation via the <code>--provider</code> CLI argument.</p>
<h3 id="supported-providers">Supported Providers<a class="heading-anchor" href="#supported-providers" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Provider</th>
<th>Flag</th>
<th>Environment Variables</th>
<th>Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>GigaChat</td>
<td><code>--provider gigachat</code></td>
<td><code>GIGACHAT_API_KEY</code> or <code>GIGACHAT_CREDENTIALS</code></td>
<td>GigaChat-2-Pro</td>
</tr>
<tr>
<td>Yandex</td>
<td><code>--provider yandex</code></td>
<td><code>YANDEX_API_KEY</code>, <code>YANDEX_FOLDER_ID</code></td>
<td>qwen3-235b-a22b-fp8/latest</td>
</tr>
<tr>
<td>OpenAI</td>
<td><code>--provider openai</code></td>
<td><code>OPENAI_API_KEY</code></td>
<td>gpt-4</td>
</tr>
<tr>
<td>Local</td>
<td><code>--provider local</code></td>
<td><code>LOCAL_MODEL_PATH</code></td>
<td>llama.cpp compatible</td>
</tr>
</tbody>
</table></div>
<h3 id="usage-examples">Usage Examples<a class="heading-anchor" href="#usage-examples" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Run with Yandex provider (Qwen3 model)</span>
python<span class="w"> </span>-m<span class="w"> </span>tests.benchmark.run_benchmark<span class="w"> </span>--provider<span class="w"> </span>yandex<span class="w"> </span>--ragas

<span class="c1"># Run with GigaChat</span>
python<span class="w"> </span>-m<span class="w"> </span>tests.benchmark.run_benchmark<span class="w"> </span>--provider<span class="w"> </span>gigachat<span class="w"> </span>--ragas

<span class="c1"># Run with OpenAI</span>
python<span class="w"> </span>-m<span class="w"> </span>tests.benchmark.run_benchmark<span class="w"> </span>--provider<span class="w"> </span>openai<span class="w"> </span>--ragas

<span class="c1"># Quick run without RAGAS evaluation</span>
python<span class="w"> </span>-m<span class="w"> </span>tests.benchmark.run_benchmark<span class="w"> </span>--provider<span class="w"> </span>yandex<span class="w"> </span>-q
</code></pre></div>

<h3 id="provider-configuration">Provider Configuration<a class="heading-anchor" href="#provider-configuration" title="Link to this section">&para;</a></h3>
<p>Providers are configured in <code>config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">llm</span><span class="p">:</span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yandex</span><span class="w">  </span><span class="c1"># Default provider</span>

<span class="w">  </span><span class="nt">yandex</span><span class="p">:</span>
<span class="w">    </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${YANDEX_API_KEY}</span>
<span class="w">    </span><span class="nt">folder_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${YANDEX_FOLDER_ID}</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;qwen3-235b-a22b-fp8/latest&quot;</span>
<span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://llm.api.cloud.yandex.net/v1&quot;</span>
<span class="w">    </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>

<span class="w">  </span><span class="nt">gigachat</span><span class="p">:</span>
<span class="w">    </span><span class="nt">auth_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${GIGACHAT_AUTH_KEY}</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GigaChat-2-Pro&quot;</span>

<span class="w">  </span><span class="nt">openai</span><span class="p">:</span>
<span class="w">    </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OPENAI_API_KEY}</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpt-4&quot;</span>
</code></pre></div>

<h3 id="provider-specific-notes">Provider-Specific Notes<a class="heading-anchor" href="#provider-specific-notes" title="Link to this section">&para;</a></h3>
<p><strong>Yandex Cloud AI Studio:</strong>
- Uses OpenAI-compatible API
- Default model: Qwen3 235B (high quality)
- Privacy compliant: data logging disabled by default
- Supports Russian language queries</p>
<p><strong>GigaChat:</strong>
- Sber&rsquo;s Russian LLM
- Best for Russian language content
- Requires certificate handling on some systems</p>
<p><strong>Local Models:</strong>
- Uses llama.cpp via llama-cpp-python
- No API costs, fully offline
- Requires local GPU or sufficient CPU</p>
<h2 id="benchmark-dataset">Benchmark Dataset<a class="heading-anchor" href="#benchmark-dataset" title="Link to this section">&para;</a></h2>
<p>The default benchmark includes <strong>11 diverse queries</strong>:</p>
<h3 id="semantic-queries-4-queries">Semantic Queries (4 queries)<a class="heading-anchor" href="#semantic-queries-4-queries" title="Link to this section">&para;</a></h3>
<p>Focus on semantic understanding and documentation:
- &ldquo;How does PostgreSQL handle transaction commits?&rdquo;
- &ldquo;What is the purpose of the buffer manager?&rdquo;
- &ldquo;How does PostgreSQL implement multi-version concurrency control?&rdquo;</p>
<p><strong>Expected Behavior:</strong>
- Vector-only: <strong>High performance</strong> (80-90% relevance)
- Graph-only: <strong>Low performance</strong> (20-30% relevance)
- Hybrid: <strong>Best performance</strong> (combines semantic understanding)</p>
<h3 id="structural-queries-4-queries">Structural Queries (4 queries)<a class="heading-anchor" href="#structural-queries-4-queries" title="Link to this section">&para;</a></h3>
<p>Focus on graph traversal and dependencies:
- &ldquo;Show me the call path from BeginTransactionBlock to CommitTransactionCommand&rdquo;
- &ldquo;Find all functions that call malloc&rdquo;
- &ldquo;What are the indirect callers of MemoryContextAlloc (depth 2-3)?&rdquo;</p>
<p><strong>Expected Behavior:</strong>
- Vector-only: <strong>Low performance</strong> (20-30% relevance)
- Graph-only: <strong>High performance</strong> (80-90% relevance)
- Hybrid: <strong>Best performance</strong> (leverages graph structure)</p>
<h3 id="security-queries-3-queries">Security Queries (3 queries)<a class="heading-anchor" href="#security-queries-3-queries" title="Link to this section">&para;</a></h3>
<p>Require both semantic patterns AND structural analysis:
- &ldquo;Find potential SQL injection vulnerabilities in query building functions&rdquo;
- &ldquo;Identify functions that allocate memory without proper error checking&rdquo;
- &ldquo;Find buffer overflow risks in string manipulation functions&rdquo;</p>
<p><strong>Expected Behavior:</strong>
- Vector-only: <strong>Moderate</strong> (50-60% relevance)
- Graph-only: <strong>Moderate</strong> (50-60% relevance)
- Hybrid: <strong>Best performance</strong> (combines both)</p>
<h2 id="metrics-explained">Metrics Explained<a class="heading-anchor" href="#metrics-explained" title="Link to this section">&para;</a></h2>
<h3 id="precisionk">Precision@K<a class="heading-anchor" href="#precisionk" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">P</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="err">#</span><span class="w"> </span><span class="n">relevant</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">top</span><span class="o">-</span><span class="n">K</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">K</span>
</code></pre></div>

<p>Measures how many retrieved results are relevant.
- <strong>1.0</strong> = All top-K results are relevant
- <strong>0.0</strong> = No relevant results in top-K</p>
<h3 id="recallk">Recall@K<a class="heading-anchor" href="#recallk" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">R</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="err">#</span><span class="w"> </span><span class="n">relevant</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">top</span><span class="o">-</span><span class="n">K</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">total</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">relevant</span><span class="p">)</span>
</code></pre></div>

<p>Measures how many relevant documents were retrieved.
- <strong>1.0</strong> = All relevant documents retrieved
- <strong>0.0</strong> = No relevant documents retrieved</p>
<h3 id="f1k">F1@K<a class="heading-anchor" href="#f1k" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>F1 = 2 <span class="gs">* (P *</span> R) / (P + R)
</code></pre></div>

<p>Harmonic mean of precision and recall.
- Balanced measure of ranking quality</p>
<h3 id="mean-reciprocal-rank-mrr">Mean Reciprocal Rank (MRR)<a class="heading-anchor" href="#mean-reciprocal-rank-mrr" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>MRR = 1 / (rank of first relevant result)
</code></pre></div>

<p>Measures how quickly users find relevant results.
- <strong>1.0</strong> = First result is relevant
- <strong>0.5</strong> = Second result is relevant
- <strong>0.0</strong> = No relevant results</p>
<h3 id="normalized-discounted-cumulative-gain-ndcgk">Normalized Discounted Cumulative Gain (NDCG@K)<a class="heading-anchor" href="#normalized-discounted-cumulative-gain-ndcgk" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">NDCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">IDCG</span><span class="nv">@K</span>
<span class="n">DCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Σ</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="n">rel_i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">log2</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<p>Graded relevance metric (highly relevant &gt; relevant &gt; not relevant).
- <strong>1.0</strong> = Perfect ranking
- <strong>0.0</strong> = Worst ranking</p>
<h2 id="custom-benchmark-queries">Custom Benchmark Queries<a class="heading-anchor" href="#custom-benchmark-queries" title="Link to this section">&para;</a></h2>
<p>Create your own benchmark queries with ground truth:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">benchmark_hybrid_retrieval</span><span class="w"> </span><span class="kn">import</span> <span class="n">BenchmarkQuery</span>

<span class="n">custom_queries</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">BenchmarkQuery</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;custom_001&quot;</span><span class="p">,</span>
        <span class="n">query</span><span class="o">=</span><span class="s2">&quot;Your question here&quot;</span><span class="p">,</span>
        <span class="n">query_type</span><span class="o">=</span><span class="s2">&quot;semantic&quot;</span><span class="p">,</span>  <span class="c1"># or &quot;structural&quot;, &quot;security&quot;</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Description of what this tests&quot;</span><span class="p">,</span>
        <span class="n">relevant_node_ids</span><span class="o">=</span><span class="p">{</span><span class="mi">1001</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">1003</span><span class="p">,</span> <span class="mi">1004</span><span class="p">},</span>  <span class="c1"># CPG node IDs</span>
        <span class="n">highly_relevant_node_ids</span><span class="o">=</span><span class="p">{</span><span class="mi">1001</span><span class="p">,</span> <span class="mi">1002</span><span class="p">},</span>      <span class="c1"># Most important nodes</span>
        <span class="n">expected_difficulty</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span>  <span class="c1"># &quot;easy&quot;, &quot;medium&quot;, &quot;hard&quot;</span>
    <span class="p">),</span>
    <span class="c1"># ... more queries</span>
<span class="p">]</span>

<span class="c1"># Run with custom queries</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">benchmark</span><span class="o">.</span><span class="n">run_benchmark</span><span class="p">(</span><span class="n">queries</span><span class="o">=</span><span class="n">custom_queries</span><span class="p">))</span>
</code></pre></div>

<h2 id="output-files">Output Files<a class="heading-anchor" href="#output-files" title="Link to this section">&para;</a></h2>
<p>The benchmark generates two files:</p>
<h3 id="1-json-report-benchmark-resultshybrid-benchmark-timestampjson">1. JSON Report (<code>benchmark_results/hybrid_benchmark_&lt;timestamp&gt;.json</code>)<a class="heading-anchor" href="#1-json-report-benchmark-resultshybrid-benchmark-timestampjson" title="Link to this section">&para;</a></h3>
<p>Complete machine-readable results:
- Per-query metrics (P@K, R@K, F1, MRR, NDCG)
- Aggregate metrics by mode
- Retrieved node IDs for each query
- Score breakdowns</p>
<h3 id="2-markdown-report-benchmark-resultshybrid-benchmark-timestampmd">2. Markdown Report (<code>benchmark_results/hybrid_benchmark_&lt;timestamp&gt;.md</code>)<a class="heading-anchor" href="#2-markdown-report-benchmark-resultshybrid-benchmark-timestampmd" title="Link to this section">&para;</a></h3>
<p>Human-readable summary:
- Comparison table
- Key findings
- Improvement percentages</p>
<h2 id="understanding-results">Understanding Results<a class="heading-anchor" href="#understanding-results" title="Link to this section">&para;</a></h2>
<h3 id="interpreting-improvements">Interpreting Improvements<a class="heading-anchor" href="#interpreting-improvements" title="Link to this section">&para;</a></h3>
<p><strong>Positive improvements (+) are good:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">Hybrid</span><span class="w"> </span><span class="n">F1</span><span class="mi">@10</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">Vector</span><span class="o">:</span><span class="w"> </span><span class="o">+</span><span class="mf">33.6</span><span class="o">%</span>
<span class="err">→</span><span class="w"> </span><span class="n">Hybrid</span><span class="w"> </span><span class="n">retrieval</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">33.6</span><span class="o">%</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">vector</span><span class="o">-</span><span class="n">only</span>
</code></pre></div>

<p><strong>When Hybrid Outperforms:</strong>
- <strong>Semantic queries</strong>: Hybrid ≥ Vector &gt; Graph
- <strong>Structural queries</strong>: Hybrid ≥ Graph &gt; Vector
- <strong>Mixed queries</strong>: Hybrid &gt; Vector, Graph</p>
<h3 id="example-analysis">Example Analysis<a class="heading-anchor" href="#example-analysis" title="Link to this section">&para;</a></h3>
<p><strong>Query:</strong> &ldquo;How does PostgreSQL handle transaction commits?&rdquo;
- <strong>Type:</strong> Semantic
- <strong>Results:</strong>
  - Vector: P@10=0.60, R@10=0.80, F1@10=0.69
  - Graph: P@10=0.20, R@10=0.30, F1@10=0.24
  - Hybrid: P@10=0.70, R@10=0.90, F1@10=0.79</p>
<p><strong>Analysis:</strong>
- Vector performs well (semantic query)
- Graph struggles (not structural)
- <strong>Hybrid best</strong>: +14.5% over vector (RRF adds structural context)</p>
<h2 id="performance-considerations">Performance Considerations<a class="heading-anchor" href="#performance-considerations" title="Link to this section">&para;</a></h2>
<h3 id="latency">Latency<a class="heading-anchor" href="#latency" title="Link to this section">&para;</a></h3>
<p>Hybrid retrieval is <strong>slower</strong> than single-source:
- Vector-only: ~50-80ms
- Graph-only: ~50-80ms
- <strong>Hybrid: ~100-150ms</strong> (parallel execution overhead)</p>
<p><strong>Trade-off:</strong> Hybrid sacrifices 2x latency for 30-50% better relevance.</p>
<h3 id="caching">Caching<a class="heading-anchor" href="#caching" title="Link to this section">&para;</a></h3>
<p>For production use:
1. Cache frequent queries
2. Pre-compute embeddings
3. Use connection pooling for DuckDB</p>
<h2 id="unit-tests">Unit Tests<a class="heading-anchor" href="#unit-tests" title="Link to this section">&para;</a></h2>
<p>Run benchmark metrics tests:</p>
<div class="highlight"><pre><span></span><code>pytest<span class="w"> </span>tests/unit/test_benchmark_metrics.py<span class="w"> </span>-v
</code></pre></div>

<p><strong>Coverage:</strong>
- ✅ Precision@K computation (5 tests)
- ✅ Recall@K computation (4 tests)
- ✅ F1 score computation (4 tests)
- ✅ MRR computation (5 tests)
- ✅ NDCG computation (5 tests)
- ✅ Dataset validation (3 tests)</p>
<p>Total: <strong>30 tests, 100% pass rate</strong></p>
<h2 id="reproducibility">Reproducibility<a class="heading-anchor" href="#reproducibility" title="Link to this section">&para;</a></h2>
<p>The synthetic benchmark uses <code>seed=42</code> for reproducibility:</p>
<div class="highlight"><pre><span></span><code><span class="n">simulator</span> <span class="o">=</span> <span class="n">SyntheticRetrievalSimulator</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div>

<p>Running multiple times produces <strong>identical results</strong>.</p>
<h2 id="best-practices">Best Practices<a class="heading-anchor" href="#best-practices" title="Link to this section">&para;</a></h2>
<h3 id="1-diverse-query-set">1. Diverse Query Set<a class="heading-anchor" href="#1-diverse-query-set" title="Link to this section">&para;</a></h3>
<p>Include queries of different types (semantic, structural, security) and difficulties (easy, medium, hard).</p>
<h3 id="2-representative-ground-truth">2. Representative Ground Truth<a class="heading-anchor" href="#2-representative-ground-truth" title="Link to this section">&para;</a></h3>
<p>Ensure ground truth reflects real-world relevance judgments:
- Mark highly relevant nodes explicitly
- Include partial matches in relevant set
- Use domain experts for validation</p>
<h3 id="3-multiple-metrics">3. Multiple Metrics<a class="heading-anchor" href="#3-multiple-metrics" title="Link to this section">&para;</a></h3>
<p>Don&rsquo;t rely on single metric:
- <strong>F1@10</strong>: Overall ranking quality
- <strong>MRR</strong>: User experience (time to first relevant)
- <strong>NDCG@10</strong>: Graded relevance (highly relevant vs relevant)</p>
<h3 id="4-error-analysis">4. Error Analysis<a class="heading-anchor" href="#4-error-analysis" title="Link to this section">&para;</a></h3>
<p>Examine per-query results to understand:
- Which query types benefit most from hybrid?
- Where does each mode fail?
- How to improve adaptive weighting?</p>
<h2 id="research-contributions">Research Contributions<a class="heading-anchor" href="#research-contributions" title="Link to this section">&para;</a></h2>
<p>This benchmark framework enables:</p>
<ol>
<li><strong>Quantitative Evaluation</strong> of hybrid graph-vector retrieval</li>
<li><strong>Comparative Analysis</strong> across retrieval modes</li>
<li><strong>Ablation Studies</strong> of RRF parameters (weights, k-value)</li>
<li><strong>Query Type Analysis</strong> (semantic vs structural performance)</li>
<li><strong>Reproducible Experiments</strong> for publication</li>
</ol>
<h2 id="citation">Citation<a class="heading-anchor" href="#citation" title="Link to this section">&para;</a></h2>
<p>If using this benchmark framework for research:</p>
<div class="highlight"><pre><span></span><code><span class="nc">@software</span><span class="p">{</span><span class="nl">hybrid_cpg_benchmark_2025</span><span class="p">,</span>
<span class="w">  </span><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Hybrid Code Property Graph Retrieval Benchmark}</span><span class="p">,</span>
<span class="w">  </span><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Phase 1 Implementation}</span><span class="p">,</span>
<span class="w">  </span><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2025}</span><span class="p">,</span>
<span class="w">  </span><span class="na">month</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{11}</span><span class="p">,</span>
<span class="w">  </span><span class="na">note</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{CodeGraph: Hybrid Graph-Vector Code Analysis}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="troubleshooting">Troubleshooting<a class="heading-anchor" href="#troubleshooting" title="Link to this section">&para;</a></h2>
<h3 id="error-no-module-named-srcretrieval">Error: &ldquo;No module named &lsquo;src.retrieval&rsquo;&rdquo;<a class="heading-anchor" href="#error-no-module-named-srcretrieval" title="Link to this section">&para;</a></h3>
<p><strong>Solution:</strong> Run from project root directory.</p>
<h3 id="error-modulenotfounderror-vectorstore">Error: &ldquo;ModuleNotFoundError: VectorStore&rdquo;<a class="heading-anchor" href="#error-modulenotfounderror-vectorstore" title="Link to this section">&para;</a></h3>
<p><strong>Solution:</strong> Ensure all dependencies installed:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>chromadb<span class="w"> </span>sentence-transformers<span class="w"> </span>duckdb
</code></pre></div>

<h3 id="synthetic-results-look-unrealistic">Synthetic Results Look Unrealistic<a class="heading-anchor" href="#synthetic-results-look-unrealistic" title="Link to this section">&para;</a></h3>
<p><strong>Solution:</strong> Adjust simulation parameters in <code>demo_benchmark.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># For semantic queries, vector search returns X% relevant</span>
<span class="n">num_highly</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">highly_relevant</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.85</span><span class="p">)</span>  <span class="c1"># Adjust this</span>
</code></pre></div>

<h2 id="next-steps">Next Steps<a class="heading-anchor" href="#next-steps" title="Link to this section">&para;</a></h2>
<ol>
<li>✅ Run synthetic demo to understand framework</li>
<li>✅ Examine output JSON/MD reports</li>
<li>✅ Customize benchmark queries for your use case</li>
<li>✅ Run with real CPG data</li>
<li>✅ Analyze per-query results for insights</li>
<li>✅ Tune RRF weights based on findings</li>
</ol>
<h2 id="support">Support<a class="heading-anchor" href="#support" title="Link to this section">&para;</a></h2>
<p>For issues or questions:
- Create issue in GitHub repository
- Include benchmark configuration and error logs
- Provide sample query that fails</p>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="REFACTORING.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Previous</span>
        <span class="doc-page-nav-title">Refactoring Analysis Guide</span>
      </a>

      <a href="MONITORING.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Next</span>
        <span class="doc-page-nav-title">Monitoring Guide</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Last updated: 2025-12-27</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/guides/BENCHMARK_GUIDE.md" target="_blank" rel="noopener">Edit on GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">On this page</div>
      <ul class="doc-toc-list">
        <li><a href="#benchmark-framework-guide" class="level-1">Benchmark Framework Guide</a></li>
<li><a href="#table-of-contents" class="level-2">Table of Contents</a></li>
<li><a href="#overview" class="level-2">Overview</a></li>
<li><a href="#quick-start" class="level-2">Quick Start</a></li>
<li><a href="#1-run-synthetic-demo" class="level-3">1. Run Synthetic Demo</a></li>
<li><a href="#2-run-with-real-data" class="level-3">2. Run With Real Data</a></li>
<li><a href="#initialize-stores" class="level-1">Initialize stores</a></li>
<li><a href="#create-benchmark" class="level-1">Create benchmark</a></li>
<li><a href="#run-benchmark" class="level-1">Run benchmark</a></li>
<li><a href="#save-results" class="level-1">Save results</a></li>
<li><a href="#llm-provider-selection" class="level-2">LLM Provider Selection</a></li>
<li><a href="#supported-providers" class="level-3">Supported Providers</a></li>
<li><a href="#usage-examples" class="level-3">Usage Examples</a></li>
<li><a href="#run-with-yandex-provider-qwen3-model" class="level-1">Run with Yandex provider (Qwen3 model)</a></li>
<li><a href="#run-with-gigachat" class="level-1">Run with GigaChat</a></li>
<li><a href="#run-with-openai" class="level-1">Run with OpenAI</a></li>
<li><a href="#quick-run-without-ragas-evaluation" class="level-1">Quick run without RAGAS evaluation</a></li>
<li><a href="#provider-configuration" class="level-3">Provider Configuration</a></li>
<li><a href="#provider-specific-notes" class="level-3">Provider-Specific Notes</a></li>
<li><a href="#benchmark-dataset" class="level-2">Benchmark Dataset</a></li>
<li><a href="#semantic-queries-4-queries" class="level-3">Semantic Queries (4 queries)</a></li>
<li><a href="#structural-queries-4-queries" class="level-3">Structural Queries (4 queries)</a></li>
<li><a href="#security-queries-3-queries" class="level-3">Security Queries (3 queries)</a></li>
<li><a href="#metrics-explained" class="level-2">Metrics Explained</a></li>
<li><a href="#precisionk" class="level-3">Precision@K</a></li>
<li><a href="#recallk" class="level-3">Recall@K</a></li>
<li><a href="#f1k" class="level-3">F1@K</a></li>
<li><a href="#mean-reciprocal-rank-mrr" class="level-3">Mean Reciprocal Rank (MRR)</a></li>
<li><a href="#normalized-discounted-cumulative-gain-ndcgk" class="level-3">Normalized Discounted Cumulative Gain (NDCG@K)</a></li>
<li><a href="#custom-benchmark-queries" class="level-2">Custom Benchmark Queries</a></li>
<li><a href="#run-with-custom-queries" class="level-1">Run with custom queries</a></li>
<li><a href="#output-files" class="level-2">Output Files</a></li>
<li><a href="#1-json-report-benchmark-resultshybrid-benchmark-timestampjson" class="level-3">1. JSON Report (`benchmark_results/hybrid_benchmark_<timestamp>.json`)</a></li>
<li><a href="#2-markdown-report-benchmark-resultshybrid-benchmark-timestampmd" class="level-3">2. Markdown Report (`benchmark_results/hybrid_benchmark_<timestamp>.md`)</a></li>
<li><a href="#understanding-results" class="level-2">Understanding Results</a></li>
<li><a href="#interpreting-improvements" class="level-3">Interpreting Improvements</a></li>
<li><a href="#example-analysis" class="level-3">Example Analysis</a></li>
<li><a href="#performance-considerations" class="level-2">Performance Considerations</a></li>
<li><a href="#latency" class="level-3">Latency</a></li>
<li><a href="#caching" class="level-3">Caching</a></li>
<li><a href="#unit-tests" class="level-2">Unit Tests</a></li>
<li><a href="#reproducibility" class="level-2">Reproducibility</a></li>
<li><a href="#best-practices" class="level-2">Best Practices</a></li>
<li><a href="#1-diverse-query-set" class="level-3">1. Diverse Query Set</a></li>
<li><a href="#2-representative-ground-truth" class="level-3">2. Representative Ground Truth</a></li>
<li><a href="#3-multiple-metrics" class="level-3">3. Multiple Metrics</a></li>
<li><a href="#4-error-analysis" class="level-3">4. Error Analysis</a></li>
<li><a href="#research-contributions" class="level-2">Research Contributions</a></li>
<li><a href="#citation" class="level-2">Citation</a></li>
<li><a href="#troubleshooting" class="level-2">Troubleshooting</a></li>
<li><a href="#error-no-module-named-srcretrieval" class="level-3">Error: "No module named 'src.retrieval'"</a></li>
<li><a href="#error-modulenotfounderror-vectorstore" class="level-3">Error: "ModuleNotFoundError: VectorStore"</a></li>
<li><a href="#synthetic-results-look-unrealistic" class="level-3">Synthetic Results Look Unrealistic</a></li>
<li><a href="#for-semantic-queries-vector-search-returns-x-relevant" class="level-1">For semantic queries, vector search returns X% relevant</a></li>
<li><a href="#next-steps" class="level-2">Next Steps</a></li>
<li><a href="#support" class="level-2">Support</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI copilot for source code analysis</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Product</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Features</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Integrations</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Documentation</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Getting Started</a></li>
              <li><a href="../guides/index.html" class="footer-link">Guides</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Resources</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Contacts</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
