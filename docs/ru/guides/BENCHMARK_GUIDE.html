<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: Руководство по тестовой платформе">
  <meta name="keywords" content="CodeGraph, documentation, guides">

  <meta property="og:title" content="Руководство по тестовой платформе - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: Руководство по тестовой платформе">
  <meta property="og:type" content="article">

  <title>Руководство по тестовой платформе - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Проблемы</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Решение</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Возможности</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Интеграции</a></li>
        <li><a href="../index.html" class="nav-link active">Документация</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/guides/BENCHMARK_GUIDE.html" class="">EN</a>
          <a href="../../ru/guides/BENCHMARK_GUIDE.html" class="active">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Переключить тему">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Запросить демо</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Проблемы</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Решение</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Возможности</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Интеграции</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Документация</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Запросить демо</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Начало работы</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Обзор</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Руководство по настройке</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Руководство по установке</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Руководства</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Обзор</a></li>
        <li><a href="BENCHMARK_GUIDE.html" class="active">Руководство по тестовой платформе</a></li>
        <li><a href="CLI_GUIDE.html">Руководство по CLI</a></li>
        <li><a href="CODE_REVIEW.html">Система автоматического код-ревью на основе патчей</a></li>
        <li><a href="CPG_EXPORT.html">Руководство по экспорту CPG</a></li>
        <li><a href="MONITORING.html">Руководство по мониторингу</a></li>
        <li><a href="PROGRAMMATIC_GUIDE.html">Руководство пользователя</a></li>
        <li><a href="PROJECT_IMPORT.html">Импорт новой кодовой базы</a></li>
        <li><a href="QUICK_REFERENCE.html">Краткое руководство по CodeGraph</a></li>
        <li><a href="REFACTORING.html">Руководство по анализу рефакторинга</a></li>
        <li><a href="SCENARIOS.html">Руководство по сценариям рабочих процессов</a></li>
        <li><a href="TROUBLESHOOTING.html">Руководство по устранению неполадок</a></li>
        <li><a href="TUI_USER_GUIDE.html">Руководство пользователя CodeGraph</a></li>
        <li><a href="01-onboarding.html">Сценарий 01: Ввод нового разработчика</a></li>
        <li><a href="02-security-audit.html">Сценарий 02: Аудит безопасности</a></li>
        <li><a href="03-documentation.html">Сценарий 03: Генерация документации</a></li>
        <li><a href="04-feature-development.html">Сценарий 04: Разработка функций</a></li>
        <li><a href="05-refactoring.html">Сценарий 05: Рефакторинг</a></li>
        <li><a href="06-performance.html">Сценарий 06: Анализ производительности</a></li>
        <li><a href="07-test-coverage.html">Сценарий 07: Покрытие тестами</a></li>
        <li><a href="08-compliance.html">Сценарий 08: Проверка соответствия требованиям</a></li>
        <li><a href="09-code-review.html">Сценарий 09: Код-ревью</a></li>
        <li><a href="10-cross-repo.html">Сценарий 10: Анализ между репозиториями</a></li>
        <li><a href="11-architecture.html">Сценарий 11: Анализ архитектуры</a></li>
        <li><a href="12-tech-debt.html">Сценарий 12: Оценка технического долга</a></li>
        <li><a href="13-mass-refactoring.html">Сценарий 13: Массовая рефакторизация</a></li>
        <li><a href="14-incident-response.html">Сценарий 14: Реагирование на инциденты безопасности</a></li>
        <li><a href="15-debugging.html">Сценарий 15: Помощь в отладке</a></li>
        <li><a href="16-entry-points.html">Сценарий 16: Обнаружение точки входа</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Документация</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../api/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Интеграции</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Справочник</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../reference/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Обзор</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Документация</a>
        <span>/</span>
        <a href="index.html">Руководства</a>
        <span>/</span>
        <span>Руководство по тестовой платформе</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>Руководство по тестовой платформе</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="rukovodstvo-po-testovoy-platforme">Руководство по тестовой платформе<a class="heading-anchor" href="#rukovodstvo-po-testovoy-platforme" title="Link to this section">&para;</a></h1>
<p><strong>Оценка гибридного поиска — Этап 1</strong></p>
<p>В этом руководстве объясняется, как использовать тестовую платформу для оценки эффективности гибридного поиска.</p>
<h2 id="soderzhanie">Содержание<a class="heading-anchor" href="#soderzhanie" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#obzor">Обзор</a></li>
<li><a href="#bystryy-start">Быстрый старт</a></li>
<li><a href="#1-zapusk-sinteticheskoy-demonstratsii">1. Запуск синтетической демонстрации</a></li>
<li><a href="#2-zapusk-s-realnymi-dannymi">2. Запуск с реальными данными</a></li>
<li><a href="#vybor-postavschika-llm">Выбор поставщика LLM</a></li>
<li><a href="#podderzhivaemye-postavschiki">Поддерживаемые поставщики</a></li>
<li><a href="#primery-ispolzovaniya">Примеры использования</a></li>
<li><a href="#konfiguratsiya-postavschikov">Конфигурация поставщиков</a></li>
<li><a href="#zamechaniya-spetsifichnye-dlya-postavschikov">Замечания, специфичные для поставщиков</a></li>
<li><a href="#nabor-dannyh-dlya-testirovaniya">Набор данных для тестирования</a></li>
<li><a href="#semanticheskie-zaprosy-4-zaprosa">Семантические запросы (4 запроса)</a></li>
<li><a href="#strukturnye-zaprosy-4-zaprosa">Структурные запросы (4 запроса)</a></li>
<li><a href="#zaprosy-po-bezopasnosti-3-zaprosa">Запросы по безопасности (3 запроса)</a></li>
<li><a href="#obyasnenie-metrik">Объяснение метрик</a></li>
<li><a href="#precisionk">Precision@K</a></li>
<li><a href="#recallk">Recall@K</a></li>
<li><a href="#f1k">F1@K</a></li>
<li><a href="#sredniy-obratnyy-rang-mrr">Средний обратный ранг (MRR)</a></li>
<li><a href="#normalizovannaya-diskontirovannaya-kumulyativnaya-vygoda-ndcgk">Нормализованная дисконтированная кумулятивная выгода (NDCG@K)</a></li>
<li><a href="#polzovatelskie-testovye-zaprosy">Пользовательские тестовые запросы</a></li>
<li><a href="#vyhodnye-fayly">Выходные файлы</a></li>
<li><a href="#1-json-otchyot-benchmark-resultshybrid-benchmark-timestampjson">1. JSON-отчёт (benchmark_results/hybrid_benchmark_<timestamp>.json)</a></li>
<li><a href="#2-otchyot-v-formate-markdown-benchmark-resultshybrid-benchmark-timestampmd">2. Отчёт в формате Markdown (benchmark_results/hybrid_benchmark_<timestamp>.md)</a></li>
<li><a href="#interpretatsiya-rezultatov">Интерпретация результатов</a></li>
<li><a href="#kak-interpretirovat-uluchsheniya">Как интерпретировать улучшения</a></li>
<li><a href="#primer-analiza">Пример анализа</a></li>
<li><a href="#soobrazheniya-po-proizvoditelnosti">Соображения по производительности</a></li>
<li><a href="#zaderzhka-latency">Задержка (Latency)</a></li>
<li><a href="#keshirovanie">Кэширование</a></li>
<li><a href="#modulnye-testy">Модульные тесты</a></li>
<li><a href="#vosproizvodimost">Воспроизводимость</a></li>
<li><a href="#rekomendatsii">Рекомендации</a></li>
<li><a href="#1-raznoobraznyy-nabor-zaprosov">1. Разнообразный набор запросов</a></li>
<li><a href="#2-reprezentativnye-etalonnye-dannye">2. Репрезентативные эталонные данные</a></li>
<li><a href="#3-ispolzovanie-neskolkih-metrik">3. Использование нескольких метрик</a></li>
<li><a href="#4-analiz-oshibok">4. Анализ ошибок</a></li>
<li><a href="#nauchnyy-vklad">Научный вклад</a></li>
<li><a href="#tsitirovanie">Цитирование</a></li>
<li><a href="#ustranenie-nepoladok">Устранение неполадок</a></li>
<li><a href="#oshibka-no-module-named-srcretrieval">Ошибка: “No module named ‘src.retrieval’”</a></li>
<li><a href="#oshibka-modulenotfounderror-vectorstore">Ошибка: “ModuleNotFoundError: VectorStore”</a></li>
<li><a href="#sinteticheskie-rezultaty-vyglyadyat-nerealistichno">Синтетические результаты выглядят нереалистично</a></li>
<li><a href="#dalneyshie-shagi">Дальнейшие шаги</a></li>
<li><a href="#podderzhka">Поддержка</a></li>
</ul>
<h2 id="obzor">Обзор<a class="heading-anchor" href="#obzor" title="Link to this section">&para;</a></h2>
<p>Тестовый фреймворк сравнивает три режима поиска:
- <strong>Только векторный</strong>: чисто семантический поиск с использованием ChromaDB
- <strong>Только графовый</strong>: чисто структурный поиск с использованием DuckDB/CPG
- <strong>Гибридный</strong>: комбинированный поиск с объединением результатов по методу RRF</p>
<h2 id="bystryy-start">Быстрый старт<a class="heading-anchor" href="#bystryy-start" title="Link to this section">&para;</a></h2>
<h3 id="1-zapusk-sinteticheskoy-demo-versii">1. Запуск синтетической демо-версии<a class="heading-anchor" href="#1-zapusk-sinteticheskoy-demo-versii" title="Link to this section">&para;</a></h3>
<p>Синтетическая демо-версия имитирует реалистичные паттерны поиска без необходимости использования реальных данных:</p>
<div class="highlight"><pre><span></span><code>python demo_benchmark.py
</code></pre></div>

<p><strong>Результат:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">================================================================================</span>
<span class="n">ОБЗОР</span><span class="w"> </span><span class="n">ТЕСТА</span><span class="w"> </span><span class="n">ПРОИЗВОДИТЕЛЬНОСТИ</span>
<span class="o">================================================================================</span>
<span class="n">Метрика</span><span class="w">               </span><span class="n">Вектор</span><span class="w">       </span><span class="n">Граф</span><span class="w">         </span><span class="n">Гибрид</span><span class="w">       </span><span class="n">по</span><span class="w"> </span><span class="n">сравнению</span><span class="w"> </span><span class="n">с</span><span class="w"> </span><span class="n">вектором</span><span class="w">    </span><span class="n">по</span><span class="w"> </span><span class="n">сравнению</span><span class="w"> </span><span class="n">с</span><span class="w"> </span><span class="n">графом</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">Precision</span><span class="mi">@10</span><span class="w">         </span><span class="mf">0.2182</span><span class="w">       </span><span class="mf">0.2000</span><span class="w">       </span><span class="mf">0.3000</span><span class="w">       </span><span class="o">+</span><span class="mf">37.5</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">50.0</span><span class="o">%</span>
<span class="n">Recall</span><span class="mi">@10</span><span class="w">            </span><span class="mf">0.4327</span><span class="w">       </span><span class="mf">0.3543</span><span class="w">       </span><span class="mf">0.5528</span><span class="w">       </span><span class="o">+</span><span class="mf">27.8</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">56.0</span><span class="o">%</span>
<span class="n">F1</span><span class="mi">@10</span><span class="w">                </span><span class="mf">0.2864</span><span class="w">       </span><span class="mf">0.2510</span><span class="w">       </span><span class="mf">0.3825</span><span class="w">       </span><span class="o">+</span><span class="mf">33.6</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">52.4</span><span class="o">%</span>
<span class="n">MRR</span><span class="w">                  </span><span class="mf">1.0000</span><span class="w">       </span><span class="mf">0.6364</span><span class="w">       </span><span class="mf">1.0000</span><span class="w">       </span><span class="o">+</span><span class="mf">0.0</span><span class="o">%</span><span class="w">        </span><span class="o">+</span><span class="mf">57.1</span><span class="o">%</span>
<span class="n">NDCG</span><span class="mi">@10</span><span class="w">              </span><span class="mf">0.5304</span><span class="w">       </span><span class="mf">0.4443</span><span class="w">       </span><span class="mf">0.6590</span><span class="w">       </span><span class="o">+</span><span class="mf">24.3</span><span class="o">%</span><span class="w">       </span><span class="o">+</span><span class="mf">48.3</span><span class="o">%</span>
</code></pre></div>

<p><strong>Основные выводы:</strong>
- Гибридный подход обеспечивает <strong>улучшение F1@10 на +33,6%</strong> по сравнению с использованием только векторов
- Гибридный подход обеспечивает <strong>улучшение F1@10 на +52,4%</strong> по сравнению с использованием только графа
- Гибридный подход объединяет сильные стороны: семантическое понимание и структурную навигацию</p>
<h3 id="2-zapusk-s-realnymi-dannymi">2. Запуск с реальными данными<a class="heading-anchor" href="#2-zapusk-s-realnymi-dannymi" title="Link to this section">&para;</a></h3>
<p>Для тестирования с реальными данными из ChromaDB и DuckDB:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">benchmark_hybrid_retrieval</span><span class="w"> </span><span class="kn">import</span> <span class="n">HybridRetrievalBenchmark</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.retrieval.vector_store_real</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorStoreReal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.services.cpg_query_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">CPGQueryService</span>

<span class="c1"># Инициализация хранилищ</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorStoreReal</span><span class="p">(</span><span class="n">persist_directory</span><span class="o">=</span><span class="s2">&quot;chroma_db&quot;</span><span class="p">)</span>
<span class="n">cpg_service</span> <span class="o">=</span> <span class="n">CPGQueryService</span><span class="p">(</span><span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">)</span>

<span class="c1"># Создание теста</span>
<span class="n">benchmark</span> <span class="o">=</span> <span class="n">HybridRetrievalBenchmark</span><span class="p">(</span>
    <span class="n">vector_store</span><span class="o">=</span><span class="n">vector_store</span><span class="p">,</span>
    <span class="n">cpg_service</span><span class="o">=</span><span class="n">cpg_service</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;benchmark_results&quot;</span>
<span class="p">)</span>

<span class="c1"># Запуск теста</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">benchmark</span><span class="o">.</span><span class="n">run_benchmark</span><span class="p">())</span>

<span class="c1"># Сохранение результатов</span>
<span class="n">benchmark</span><span class="o">.</span><span class="n">save_report</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</code></pre></div>

<h2 id="vybor-postavschika-llm">Выбор поставщика LLM<a class="heading-anchor" href="#vybor-postavschika-llm" title="Link to this section">&para;</a></h2>
<p>Запуск бенчмарка поддерживает несколько поставщиков LLM для оценки RAGAS через аргумент командной строки <code>--provider</code>.</p>
<h3 id="podderzhivaemye-postavschiki">Поддерживаемые поставщики<a class="heading-anchor" href="#podderzhivaemye-postavschiki" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Поставщик</th>
<th>Флаг</th>
<th>Переменные окружения</th>
<th>Модель</th>
</tr>
</thead>
<tbody>
<tr>
<td>GigaChat</td>
<td>&ndash;provider gigachat</td>
<td>GIGACHAT_API_KEYилиGIGACHAT_CREDENTIALS</td>
<td>GigaChat-2-Pro</td>
</tr>
<tr>
<td>Yandex</td>
<td>&ndash;provider yandex</td>
<td>YANDEX_API_KEY,YANDEX_FOLDER_ID</td>
<td>qwen3-235b-a22b-fp8/latest</td>
</tr>
<tr>
<td>OpenAI</td>
<td>&ndash;provider openai</td>
<td>OPENAI_API_KEY</td>
<td>gpt-4</td>
</tr>
<tr>
<td>Локальный</td>
<td>&ndash;provider local</td>
<td>LOCAL_MODEL_PATH</td>
<td>совместимо с llama.cpp</td>
</tr>
</tbody>
</table></div>
<h3 id="primery-ispolzovaniya">Примеры использования<a class="heading-anchor" href="#primery-ispolzovaniya" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> Запуск с поставщиком Yandex (модель Qwen3)
python -m tests.benchmark.run_benchmark --provider yandex --ragas

<span class="gh">#</span> Запуск с GigaChat
python -m tests.benchmark.run_benchmark --provider gigachat --ragas

<span class="gh">#</span> Запуск с OpenAI
python -m tests.benchmark.run_benchmark --provider openai --ragas

<span class="gh">#</span> Быстрый запуск без оценки RAGAS
python -m tests.benchmark.run_benchmark --provider yandex -q
</code></pre></div>

<h3 id="nastroyka-postavschikov">Настройка поставщиков<a class="heading-anchor" href="#nastroyka-postavschikov" title="Link to this section">&para;</a></h3>
<p>Поставщики настраиваются в файле <code>config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">llm</span><span class="o">:</span>
<span class="w">  </span><span class="n">provider</span><span class="o">:</span><span class="w"> </span><span class="n">yandex</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="err">Поставщик</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">умолчанию</span>

<span class="w">  </span><span class="n">yandex</span><span class="o">:</span>
<span class="w">    </span><span class="n">api_key</span><span class="o">:</span><span class="w"> </span><span class="n">$</span><span class="o">{</span><span class="n">YANDEX_API_KEY</span><span class="o">}</span>
<span class="w">    </span><span class="n">folder_id</span><span class="o">:</span><span class="w"> </span><span class="n">$</span><span class="o">{</span><span class="n">YANDEX_FOLDER_ID</span><span class="o">}</span>
<span class="w">    </span><span class="n">model</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;qwen3-235b-a22b-fp8/latest&quot;</span>
<span class="w">    </span><span class="n">base_url</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;https://llm.api.cloud.yandex.net/v1&quot;</span>
<span class="w">    </span><span class="n">timeout</span><span class="o">:</span><span class="w"> </span><span class="mi">60</span>

<span class="w">  </span><span class="n">gigachat</span><span class="o">:</span>
<span class="w">    </span><span class="n">auth_key</span><span class="o">:</span><span class="w"> </span><span class="n">$</span><span class="o">{</span><span class="n">GIGACHAT_AUTH_KEY</span><span class="o">}</span>
<span class="w">    </span><span class="n">model</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;GigaChat-2-Pro&quot;</span>

<span class="w">  </span><span class="n">openai</span><span class="o">:</span>
<span class="w">    </span><span class="n">api_key</span><span class="o">:</span><span class="w"> </span><span class="n">$</span><span class="o">{</span><span class="n">OPENAI_API_KEY</span><span class="o">}</span>
<span class="w">    </span><span class="n">model</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span>
</code></pre></div>

<h3 id="zamechaniya-po-konkretnym-postavschikam">Замечания по конкретным поставщикам<a class="heading-anchor" href="#zamechaniya-po-konkretnym-postavschikam" title="Link to this section">&para;</a></h3>
<p><strong>Yandex Cloud AI Studio:</strong>
- Использует API, совместимое с OpenAI
- Модель по умолчанию: Qwen3 235B (высокое качество)
- Соответствует требованиям конфиденциальности: логирование данных отключено по умолчанию
- Поддерживает запросы на русском языке</p>
<p><strong>GigaChat:</strong>
- Российская языковая модель от Сбера
- Наилучший выбор для контента на русском языке
- На некоторых системах требуется обработка сертификатов</p>
<p><strong>Локальные модели:</strong>
- Использует llama.cpp через llama-cpp-python
- Никаких затрат на API, полностью автономная работа
- Требует локальной GPU или достаточной вычислительной мощности CPU</p>
<h2 id="nabor-dannyh-dlya-testirovaniya">Набор данных для тестирования<a class="heading-anchor" href="#nabor-dannyh-dlya-testirovaniya" title="Link to this section">&para;</a></h2>
<p>Стандартный тестовый набор включает <strong>11 разнообразных запросов</strong>:</p>
<h3 id="semanticheskie-zaprosy-4-zaprosa">Семантические запросы (4 запроса)<a class="heading-anchor" href="#semanticheskie-zaprosy-4-zaprosa" title="Link to this section">&para;</a></h3>
<p>Ориентированы на понимание смысла и документации:
- “Как PostgreSQL обрабатывает фиксацию транзакций?”
- “Какова цель менеджера буферов?”
- “Как PostgreSQL реализует многоверсионное управление параллелизмом?”</p>
<p><strong>Ожидаемое поведение:</strong>
- Только векторный поиск: <strong>Высокая эффективность</strong> (релевантность 80–90 %)
- Только графовый поиск: <strong>Низкая эффективность</strong> (релевантность 20–30 %)
- Гибридный подход: <strong>Наилучшая эффективность</strong> (объединяет семантическое понимание)</p>
<h3 id="strukturnye-zaprosy-4-zaprosa">Структурные запросы (4 запроса)<a class="heading-anchor" href="#strukturnye-zaprosy-4-zaprosa" title="Link to this section">&para;</a></h3>
<p>Ориентированы на обход графа и анализ зависимостей:
- “Покажите путь вызова от BeginTransactionBlock до CommitTransactionCommand”
- “Найдите все функции, вызывающие malloc”
- “Какие функции косвенно вызывают MemoryContextAlloc (глубина 2–3)?”</p>
<p><strong>Ожидаемое поведение:</strong>
- Только векторный поиск: <strong>Низкая эффективность</strong> (релевантность 20–30 %)
- Только графовый поиск: <strong>Высокая эффективность</strong> (релевантность 80–90 %)
- Гибридный подход: <strong>Наилучшая эффективность</strong> (использует структуру графа)</p>
<h3 id="zaprosy-po-bezopasnosti-3-zaprosa">Запросы по безопасности (3 запроса)<a class="heading-anchor" href="#zaprosy-po-bezopasnosti-3-zaprosa" title="Link to this section">&para;</a></h3>
<p>Требуют одновременно анализа семантических шаблонов и структуры кода:
- “Найдите потенциальные уязвимости к SQL-инъекциям в функциях построения запросов”
- “Определите функции, выделяющие память без надлежащей проверки ошибок”
- “Найдите риски переполнения буфера в функциях обработки строк”</p>
<p><strong>Ожидаемое поведение:</strong>
- Только векторный поиск: <strong>Средняя эффективность</strong> (релевантность 50–60 %)
- Только графовый поиск: <strong>Средняя эффективность</strong> (релевантность 50–60 %)
- Гибридный подход: <strong>Наилучшая эффективность</strong> (объединяет оба подхода)</p>
<h2 id="obyasnenie-metrik">Объяснение метрик<a class="heading-anchor" href="#obyasnenie-metrik" title="Link to this section">&para;</a></h2>
<h3 id="tochnostk">Точность@K<a class="heading-anchor" href="#tochnostk" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">P</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">количество</span><span class="w"> </span><span class="n">релевантных</span><span class="w"> </span><span class="n">в</span><span class="w"> </span><span class="n">топ</span><span class="o">-</span><span class="n">K</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">K</span>
</code></pre></div>

<p>Измеряет, какая доля извлечённых результатов является релевантной.
- <strong>1.0</strong> = Все результаты в топ-K релевантны
- <strong>0.0</strong> = Ни один из результатов в топ-K не является релевантным</p>
<h3 id="polnotak">Полнота@K<a class="heading-anchor" href="#polnotak" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">R</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">количество</span><span class="w"> </span><span class="n">релевантных</span><span class="w"> </span><span class="n">в</span><span class="w"> </span><span class="n">топ</span><span class="o">-</span><span class="n">K</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">общее</span><span class="w"> </span><span class="n">количество</span><span class="w"> </span><span class="n">релевантных</span><span class="p">)</span>
</code></pre></div>

<p>Измеряет, какая доля всех релевантных документов была извлечена.
- <strong>1.0</strong> = Все релевантные документы извлечены
- <strong>0.0</strong> = Ни один релевантный документ не извлечён</p>
<h3 id="f1k">F1@K<a class="heading-anchor" href="#f1k" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>F1 = 2 <span class="gs">* (P *</span> R) / (P + R)
</code></pre></div>

<p>Гармоническое среднее точности и полноты.
- Сбалансированная мера качества ранжирования</p>
<h3 id="sredniy-obratnyy-rang-mrr">Средний обратный ранг (MRR)<a class="heading-anchor" href="#sredniy-obratnyy-rang-mrr" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>MRR = 1 / (ранг первого релевантного результата)
</code></pre></div>

<p>Измеряет, насколько быстро пользователь находит релевантный результат.
- <strong>1.0</strong> = Первый результат релевантен
- <strong>0.5</strong> = Второй результат релевантен
- <strong>0.0</strong> = Релевантные результаты отсутствуют</p>
<h3 id="normalizovannaya-diskontirovannaya-kumulyativnaya-vygoda-ndcgk">Нормализованная дисконтированная кумулятивная выгода (NDCG@K)<a class="heading-anchor" href="#normalizovannaya-diskontirovannaya-kumulyativnaya-vygoda-ndcgk" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">NDCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">IDCG</span><span class="nv">@K</span>
<span class="n">DCG</span><span class="nv">@K</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Σ</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="n">rel_i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">log2</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<p>Метрика с учётом градаций релевантности (высоко релевантно &gt; релевантно &gt; не релевантно).
- <strong>1.0</strong> = Идеальное ранжирование
- <strong>0.0</strong> = Наихудшее ранжирование</p>
<h2 id="polzovatelskie-zaprosy-dlya-testirovaniya">Пользовательские запросы для тестирования<a class="heading-anchor" href="#polzovatelskie-zaprosy-dlya-testirovaniya" title="Link to this section">&para;</a></h2>
<p>Создайте собственные тестовые запросы с эталонными данными:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">benchmark_hybrid_retrieval</span><span class="w"> </span><span class="kn">import</span> <span class="n">BenchmarkQuery</span>

<span class="n">custom_queries</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">BenchmarkQuery</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;custom_001&quot;</span><span class="p">,</span>
        <span class="n">query</span><span class="o">=</span><span class="s2">&quot;Ваш вопрос здесь&quot;</span><span class="p">,</span>
        <span class="n">query_type</span><span class="o">=</span><span class="s2">&quot;semantic&quot;</span><span class="p">,</span>  <span class="c1"># или &quot;structural&quot;, &quot;security&quot;</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Описание того, что тестируется&quot;</span><span class="p">,</span>
        <span class="n">relevant_node_ids</span><span class="o">=</span><span class="p">{</span><span class="mi">1001</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">1003</span><span class="p">,</span> <span class="mi">1004</span><span class="p">},</span>  <span class="c1"># идентификаторы узлов CPG</span>
        <span class="n">highly_relevant_node_ids</span><span class="o">=</span><span class="p">{</span><span class="mi">1001</span><span class="p">,</span> <span class="mi">1002</span><span class="p">},</span>      <span class="c1"># Наиболее важные узлы</span>
        <span class="n">expected_difficulty</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span>  <span class="c1"># &quot;easy&quot;, &quot;medium&quot;, &quot;hard&quot;</span>
    <span class="p">),</span>
    <span class="c1"># ... дополнительные запросы</span>
<span class="p">]</span>

<span class="c1"># Запуск с пользовательскими запросами</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">benchmark</span><span class="o">.</span><span class="n">run_benchmark</span><span class="p">(</span><span class="n">queries</span><span class="o">=</span><span class="n">custom_queries</span><span class="p">))</span>
</code></pre></div>

<h2 id="vyhodnye-fayly">Выходные файлы<a class="heading-anchor" href="#vyhodnye-fayly" title="Link to this section">&para;</a></h2>
<p>Бенчмарк генерирует два файла:</p>
<h3 id="1-json-otchyot-benchmark-resultshybrid-benchmark-json">1. JSON-отчёт (benchmark_results/hybrid_benchmark_<timestamp>.json)<a class="heading-anchor" href="#1-json-otchyot-benchmark-resultshybrid-benchmark-json" title="Link to this section">&para;</a></h3>
<p>Полные результаты в формате, пригодном для машинной обработки:
- Метрики по каждому запросу (P@K, R@K, F1, MRR, NDCG)
- Сводные метрики по режимам
- Идентификаторы извлечённых узлов для каждого запроса
- Детализация оценок</p>
<h3 id="2-otchyot-v-formate-markdown-benchmark-resultshybrid-benchmark-md">2. Отчёт в формате Markdown (benchmark_results/hybrid_benchmark_<timestamp>.md)<a class="heading-anchor" href="#2-otchyot-v-formate-markdown-benchmark-resultshybrid-benchmark-md" title="Link to this section">&para;</a></h3>
<p>Человекочитаемое резюме:
- Сравнительная таблица
- Основные выводы
- Проценты улучшения</p>
<h2 id="ponimanie-rezultatov">Понимание результатов<a class="heading-anchor" href="#ponimanie-rezultatov" title="Link to this section">&para;</a></h2>
<h3 id="interpretatsiya-uluchsheniy">Интерпретация улучшений<a class="heading-anchor" href="#interpretatsiya-uluchsheniy" title="Link to this section">&para;</a></h3>
<p><strong>Положительные улучшения (+) — это хорошо:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">Гибридный</span><span class="w"> </span><span class="n">F1</span><span class="mi">@10</span><span class="w"> </span><span class="n">против</span><span class="w"> </span><span class="n">векторного</span><span class="o">:</span><span class="w"> </span><span class="o">+</span><span class="mi">33</span><span class="p">,</span><span class="mi">6</span><span class="o">%</span>
<span class="err">→</span><span class="w"> </span><span class="n">Гибридный</span><span class="w"> </span><span class="n">поиск</span><span class="w"> </span><span class="n">на</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="mi">6</span><span class="o">%</span><span class="w"> </span><span class="n">лучше</span><span class="p">,</span><span class="w"> </span><span class="n">чем</span><span class="w"> </span><span class="n">только</span><span class="w"> </span><span class="n">по</span><span class="w"> </span><span class="n">векторам</span>
</code></pre></div>

<p><strong>Когда гибридный метод превосходит другие:</strong>
- <strong>Семантические запросы</strong>: Гибридный ≥ Векторный &gt; Графовый
- <strong>Структурные запросы</strong>: Гибридный ≥ Графовый &gt; Векторный
- <strong>Смешанные запросы</strong>: Гибридный &gt; Векторный, Графовый</p>
<h3 id="primer-analiza">Пример анализа<a class="heading-anchor" href="#primer-analiza" title="Link to this section">&para;</a></h3>
<p><strong>Запрос:</strong> “Как PostgreSQL обрабатывает фиксацию транзакций?”
- <strong>Тип:</strong> Семантический
- <strong>Результаты:</strong>
  - Векторный: P@10=0,60, R@10=0,80, F1@10=0,69
  - Графовый: P@10=0,20, R@10=0,30, F1@10=0,24
  - Гибридный: P@10=0,70, R@10=0,90, F1@10=0,79</p>
<p><strong>Анализ:</strong>
- Векторный метод показывает хорошие результаты (семантический запрос)
- Графовый метод справляется хуже (запрос не структурный)
- <strong>Гибридный — лучший</strong>: +14,5% по сравнению с векторным (RRF добавляет структурный контекст)</p>
<h2 id="rekomendatsii-po-proizvoditelnosti">Рекомендации по производительности<a class="heading-anchor" href="#rekomendatsii-po-proizvoditelnosti" title="Link to this section">&para;</a></h2>
<h3 id="zaderzhka">Задержка<a class="heading-anchor" href="#zaderzhka" title="Link to this section">&para;</a></h3>
<p>Гибридный поиск <strong>медленнее</strong>, чем поиск из одного источника:
- Только векторный: ~50-80 мс
- Только графовый: ~50-80 мс
- <strong>Гибридный: ~100-150 мс</strong> (накладные расходы на параллельное выполнение)</p>
<p><strong>Компромисс:</strong> гибридный подход увеличивает задержку в 2 раза, но обеспечивает на 30–50 % лучшую релевантность.</p>
<h3 id="keshirovanie">Кэширование<a class="heading-anchor" href="#keshirovanie" title="Link to this section">&para;</a></h3>
<p>Для эксплуатации в продакшене:
1. Кэшируйте часто встречающиеся запросы
2. Предварительно вычисляйте эмбеддинги
3. Используйте пул соединений для DuckDB</p>
<h2 id="modulnye-testy">Модульные тесты<a class="heading-anchor" href="#modulnye-testy" title="Link to this section">&para;</a></h2>
<p>Запуск тестов метрик оценки:</p>
<div class="highlight"><pre><span></span><code>pytest tests/unit/test_benchmark_metrics.py -v
</code></pre></div>

<p><strong>Охват:</strong>
- ✅ Вычисление Precision@K (5 тестов)
- ✅ Вычисление Recall@K (4 теста)
- ✅ Вычисление F1-меры (4 теста)
- ✅ Вычисление MRR (5 тестов)
- ✅ Вычисление NDCG (5 тестов)
- ✅ Проверка корректности набора данных (3 теста)</p>
<p>Всего: <strong>30 тестов, 100% прохождение</strong></p>
<h2 id="vosproizvodimost">Воспроизводимость<a class="heading-anchor" href="#vosproizvodimost" title="Link to this section">&para;</a></h2>
<p>Синтетический тест использует <code>seed=42</code> для обеспечения воспроизводимости:</p>
<div class="highlight"><pre><span></span><code>simulator = SyntheticRetrievalSimulator(seed=42)
</code></pre></div>

<p>Многократный запуск даёт <strong>идентичные результаты</strong>.</p>
<h2 id="rekomendatsii">Рекомендации<a class="heading-anchor" href="#rekomendatsii" title="Link to this section">&para;</a></h2>
<h3 id="1-raznoobraznyy-nabor-zaprosov">1. Разнообразный набор запросов<a class="heading-anchor" href="#1-raznoobraznyy-nabor-zaprosov" title="Link to this section">&para;</a></h3>
<p>Включайте запросы различных типов (семантические, структурные, по безопасности) и уровней сложности (лёгкие, средние, сложные).</p>
<h3 id="2-reprezentativnye-etalonnye-dannye">2. Репрезентативные эталонные данные<a class="heading-anchor" href="#2-reprezentativnye-etalonnye-dannye" title="Link to this section">&para;</a></h3>
<p>Убедитесь, что эталонные данные отражают реальные оценки релевантности:
- Явно помечайте узлы с высокой релевантностью
- Включайте частичные совпадения в набор релевантных результатов
- Привлекайте экспертов предметной области для проверки</p>
<h3 id="3-neskolko-metrik-otsenki">3. Несколько метрик оценки<a class="heading-anchor" href="#3-neskolko-metrik-otsenki" title="Link to this section">&para;</a></h3>
<p>Не полагайтесь на одну метрику:
- <strong>F1@10</strong>: Общее качество ранжирования
- <strong>MRR</strong>: Пользовательский опыт (время до первого релевантного результата)
- <strong>NDCG@10</strong>: Градуированная релевантность (высокая релевантность против обычной)</p>
<h3 id="4-analiz-oshibok">4. Анализ ошибок<a class="heading-anchor" href="#4-analiz-oshibok" title="Link to this section">&para;</a></h3>
<p>Анализируйте результаты по каждому запросу, чтобы понять:
- Какие типы запросов наиболее выигрывают от гибридного поиска?
- В каких случаях каждый режим поиска даёт сбой?
- Как улучшить адаптивное взвешивание?</p>
<h2 id="nauchnye-rezultaty">Научные результаты<a class="heading-anchor" href="#nauchnye-rezultaty" title="Link to this section">&para;</a></h2>
<p>Данная тестовая платформа позволяет:</p>
<ol>
<li><strong>Количественную оценку</strong> гибридного поиска на основе графов и векторов</li>
<li><strong>Сравнительный анализ</strong> различных режимов поиска</li>
<li><strong>Анализ исключения параметров</strong> (ablation studies) в методе RRF (веса, значение k)</li>
<li><strong>Анализ типов запросов</strong> (производительность при семантических и структурных запросах)</li>
<li><strong>Воспроизводимые эксперименты</strong> для публикаций</li>
</ol>
<h2 id="tsitirovanie">Цитирование<a class="heading-anchor" href="#tsitirovanie" title="Link to this section">&para;</a></h2>
<p>При использовании данного тестового набора в исследовательских целях:</p>
<div class="highlight"><pre><span></span><code><span class="nv">@software</span><span class="err">{</span><span class="n">hybrid_cpg_benchmark_2025</span><span class="p">,</span>
<span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">Hybrid</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">Property</span><span class="w"> </span><span class="n">Graph</span><span class="w"> </span><span class="n">Retrieval</span><span class="w"> </span><span class="n">Benchmark</span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="n">author</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">Phase</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">Implementation</span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="nf">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="mi">2025</span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="nf">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="mi">11</span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="n">note</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="nl">CodeGraph</span><span class="p">:</span><span class="w"> </span><span class="n">Hybrid</span><span class="w"> </span><span class="n">Graph</span><span class="o">-</span><span class="n">Vector</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">Analysis</span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<h2 id="ustranenie-nepoladok">Устранение неполадок<a class="heading-anchor" href="#ustranenie-nepoladok" title="Link to this section">&para;</a></h2>
<h3 id="oshibka-no-module-named-srcretrieval">Ошибка: “No module named ‘src.retrieval’”<a class="heading-anchor" href="#oshibka-no-module-named-srcretrieval" title="Link to this section">&para;</a></h3>
<p><strong>Решение:</strong> Запускайте из корневой директории проекта.</p>
<h3 id="oshibka-modulenotfounderror-vectorstore">Ошибка: “ModuleNotFoundError: VectorStore”<a class="heading-anchor" href="#oshibka-modulenotfounderror-vectorstore" title="Link to this section">&para;</a></h3>
<p><strong>Решение:</strong> Убедитесь, что установлены все зависимости:</p>
<div class="highlight"><pre><span></span><code>pip install chromadb sentence-transformers duckdb
</code></pre></div>

<h3 id="sinteticheskie-rezultaty-vyglyadyat-nerealistichno">Синтетические результаты выглядят нереалистично<a class="heading-anchor" href="#sinteticheskie-rezultaty-vyglyadyat-nerealistichno" title="Link to this section">&para;</a></h3>
<p><strong>Решение:</strong> Откорректируйте параметры симуляции в файле <code>demo_benchmark.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> Для семантических запросов векторный поиск возвращает X% релевантных результатов
num_highly = int(len(highly_relevant) * 0.85)  # Измените это значение
</code></pre></div>

<h2 id="dalneyshie-shagi">Дальнейшие шаги<a class="heading-anchor" href="#dalneyshie-shagi" title="Link to this section">&para;</a></h2>
<ol>
<li>✅ Запустите синтетическую демонстрацию, чтобы понять архитектуру фреймворка</li>
<li>✅ Изучите выходные отчёты в формате JSON/MD</li>
<li>✅ Настройте тестовые запросы под ваш конкретный случай использования</li>
<li>✅ Запустите обработку с реальными данными CPG</li>
<li>✅ Проанализируйте результаты по каждому запросу, чтобы получить полезные сведения</li>
<li>✅ Настройте веса RRF на основе полученных результатов</li>
</ol>
<h2 id="podderzhka">Поддержка<a class="heading-anchor" href="#podderzhka" title="Link to this section">&para;</a></h2>
<p>При возникновении проблем или вопросов:
- Создайте задачу (issue) в репозитории на GitHub
- Приложите конфигурацию бенчмарка и логи ошибок
- Предоставьте пример запроса, который завершается сбоем</p>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="REFACTORING.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Назад</span>
        <span class="doc-page-nav-title">Руководство по анализу рефакторинга</span>
      </a>

      <a href="MONITORING.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Вперед</span>
        <span class="doc-page-nav-title">Руководство по мониторингу</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Обновлено: 2025-12-25</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/guides/BENCHMARK_GUIDE.md" target="_blank" rel="noopener">Редактировать на GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">На этой странице</div>
      <ul class="doc-toc-list">
        <li><a href="#rukovodstvo-po-testovoy-platforme" class="level-1">Руководство по тестовой платформе</a></li>
<li><a href="#soderzhanie" class="level-2">Содержание</a></li>
<li><a href="#obzor" class="level-2">Обзор</a></li>
<li><a href="#bystryy-start" class="level-2">Быстрый старт</a></li>
<li><a href="#1-zapusk-sinteticheskoy-demo-versii" class="level-3">1. Запуск синтетической демо-версии</a></li>
<li><a href="#2-zapusk-s-realnymi-dannymi" class="level-3">2. Запуск с реальными данными</a></li>
<li><a href="#initsializatsiya-hranilisch" class="level-1">Инициализация хранилищ</a></li>
<li><a href="#sozdanie-testa" class="level-1">Создание теста</a></li>
<li><a href="#zapusk-testa" class="level-1">Запуск теста</a></li>
<li><a href="#sohranenie-rezultatov" class="level-1">Сохранение результатов</a></li>
<li><a href="#vybor-postavschika-llm" class="level-2">Выбор поставщика LLM</a></li>
<li><a href="#podderzhivaemye-postavschiki" class="level-3">Поддерживаемые поставщики</a></li>
<li><a href="#primery-ispolzovaniya" class="level-3">Примеры использования</a></li>
<li><a href="#zapusk-s-postavschikom-yandex-model-qwen3" class="level-1">Запуск с поставщиком Yandex (модель Qwen3)</a></li>
<li><a href="#zapusk-s-gigachat" class="level-1">Запуск с GigaChat</a></li>
<li><a href="#zapusk-s-openai" class="level-1">Запуск с OpenAI</a></li>
<li><a href="#bystryy-zapusk-bez-otsenki-ragas" class="level-1">Быстрый запуск без оценки RAGAS</a></li>
<li><a href="#nastroyka-postavschikov" class="level-3">Настройка поставщиков</a></li>
<li><a href="#zamechaniya-po-konkretnym-postavschikam" class="level-3">Замечания по конкретным поставщикам</a></li>
<li><a href="#nabor-dannyh-dlya-testirovaniya" class="level-2">Набор данных для тестирования</a></li>
<li><a href="#semanticheskie-zaprosy-4-zaprosa" class="level-3">Семантические запросы (4 запроса)</a></li>
<li><a href="#strukturnye-zaprosy-4-zaprosa" class="level-3">Структурные запросы (4 запроса)</a></li>
<li><a href="#zaprosy-po-bezopasnosti-3-zaprosa" class="level-3">Запросы по безопасности (3 запроса)</a></li>
<li><a href="#obyasnenie-metrik" class="level-2">Объяснение метрик</a></li>
<li><a href="#tochnostk" class="level-3">Точность@K</a></li>
<li><a href="#polnotak" class="level-3">Полнота@K</a></li>
<li><a href="#f1k" class="level-3">F1@K</a></li>
<li><a href="#sredniy-obratnyy-rang-mrr" class="level-3">Средний обратный ранг (MRR)</a></li>
<li><a href="#normalizovannaya-diskontirovannaya-kumulyativnaya-vygoda-ndcgk" class="level-3">Нормализованная дисконтированная кумулятивная выгода (NDCG@K)</a></li>
<li><a href="#polzovatelskie-zaprosy-dlya-testirovaniya" class="level-2">Пользовательские запросы для тестирования</a></li>
<li><a href="#zapusk-s-polzovatelskimi-zaprosami" class="level-1">Запуск с пользовательскими запросами</a></li>
<li><a href="#vyhodnye-fayly" class="level-2">Выходные файлы</a></li>
<li><a href="#1-json-otchyot-benchmark-resultshybrid-benchmark-timestampjson" class="level-3">1. JSON-отчёт (benchmark_results/hybrid_benchmark_<timestamp>.json)</a></li>
<li><a href="#2-otchyot-v-formate-markdown-benchmark-resultshybrid-benchmark-timestampmd" class="level-3">2. Отчёт в формате Markdown (benchmark_results/hybrid_benchmark_<timestamp>.md)</a></li>
<li><a href="#ponimanie-rezultatov" class="level-2">Понимание результатов</a></li>
<li><a href="#interpretatsiya-uluchsheniy" class="level-3">Интерпретация улучшений</a></li>
<li><a href="#primer-analiza" class="level-3">Пример анализа</a></li>
<li><a href="#rekomendatsii-po-proizvoditelnosti" class="level-2">Рекомендации по производительности</a></li>
<li><a href="#zaderzhka" class="level-3">Задержка</a></li>
<li><a href="#keshirovanie" class="level-3">Кэширование</a></li>
<li><a href="#modulnye-testy" class="level-2">Модульные тесты</a></li>
<li><a href="#vosproizvodimost" class="level-2">Воспроизводимость</a></li>
<li><a href="#rekomendatsii" class="level-2">Рекомендации</a></li>
<li><a href="#1-raznoobraznyy-nabor-zaprosov" class="level-3">1. Разнообразный набор запросов</a></li>
<li><a href="#2-reprezentativnye-etalonnye-dannye" class="level-3">2. Репрезентативные эталонные данные</a></li>
<li><a href="#3-neskolko-metrik-otsenki" class="level-3">3. Несколько метрик оценки</a></li>
<li><a href="#4-analiz-oshibok" class="level-3">4. Анализ ошибок</a></li>
<li><a href="#nauchnye-rezultaty" class="level-2">Научные результаты</a></li>
<li><a href="#tsitirovanie" class="level-2">Цитирование</a></li>
<li><a href="#ustranenie-nepoladok" class="level-2">Устранение неполадок</a></li>
<li><a href="#oshibka-no-module-named-srcretrieval" class="level-3">Ошибка: “No module named ‘src.retrieval’”</a></li>
<li><a href="#oshibka-modulenotfounderror-vectorstore" class="level-3">Ошибка: “ModuleNotFoundError: VectorStore”</a></li>
<li><a href="#sinteticheskie-rezultaty-vyglyadyat-nerealistichno" class="level-3">Синтетические результаты выглядят нереалистично</a></li>
<li><a href="#dlya-semanticheskih-zaprosov-vektornyy-poisk-vozvraschaet-x-relevantnyh-rezultatov" class="level-1">Для семантических запросов векторный поиск возвращает X% релевантных результатов</a></li>
<li><a href="#dalneyshie-shagi" class="level-2">Дальнейшие шаги</a></li>
<li><a href="#podderzhka" class="level-2">Поддержка</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI-копилот для анализа исходного кода</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Продукт</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Возможности</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Интеграции</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Документация</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Начало работы</a></li>
              <li><a href="../guides/index.html" class="footer-link">Руководства</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Ресурсы</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Контакты</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
