<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CodeGraph documentation: Руководство по экспорту CPG">
  <meta name="keywords" content="CodeGraph, documentation, guides">

  <meta property="og:title" content="Руководство по экспорту CPG - CodeGraph">
  <meta property="og:description" content="CodeGraph documentation: Руководство по экспорту CPG">
  <meta property="og:type" content="article">

  <title>Руководство по экспорту CPG - CodeGraph Documentation</title>

  <link rel="icon" type="image/svg+xml" href="../../../assets/svg/logo-compact.svg">
  <link rel="stylesheet" href="../../../css/styles.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav container">
      <a href="../../../" class="logo">
        <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
      </a>

      <ul class="nav-list">
        <li><a href="../../../index.html#problems" class="nav-link">Проблемы</a></li>
        <li><a href="../../../index.html#solution" class="nav-link">Решение</a></li>
        <li><a href="../../../index.html#features" class="nav-link">Возможности</a></li>
        <li><a href="../../../index.html#integrations" class="nav-link">Интеграции</a></li>
        <li><a href="../index.html" class="nav-link active">Документация</a></li>
        <li><a href="../../../index.html#faq" class="nav-link">FAQ</a></li>
      </ul>

      <div class="header-actions">
        <div class="lang-switcher">
          <a href="../../en/guides/CPG_EXPORT.html" class="">EN</a>
          <a href="../../ru/guides/CPG_EXPORT.html" class="active">RU</a>
        </div>
        <button class="theme-toggle" aria-label="Переключить тему">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="../../../index.html#demo" class="btn btn-primary">Запросить демо</a>
      </div>

      <button class="mobile-menu-toggle" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="../../../index.html#problems" class="mobile-nav-link">Проблемы</a></li>
        <li><a href="../../../index.html#solution" class="mobile-nav-link">Решение</a></li>
        <li><a href="../../../index.html#features" class="mobile-nav-link">Возможности</a></li>
        <li><a href="../../../index.html#integrations" class="mobile-nav-link">Интеграции</a></li>
        <li><a href="../index.html" class="mobile-nav-link">Документация</a></li>
        <li><a href="../../../index.html#faq" class="mobile-nav-link">FAQ</a></li>
        <li><a href="../../../index.html#demo" class="btn btn-primary mobile-nav-demo-btn">Запросить демо</a></li>
      </ul>
    </nav>
  </header>

  <div class="doc-layout">
    <!-- Sidebar Navigation -->
    <aside class="doc-sidebar">
      
    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Начало работы</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../getting-started/index.html">Обзор</a></li>
        <li><a href="../getting-started/CONFIGURATION.html">Руководство по настройке</a></li>
        <li><a href="../getting-started/INSTALLATION.html">Руководство по установке</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Руководства</div>
      <ul class="doc-sidebar-nav">
        <li><a href="index.html">Обзор</a></li>
        <li><a href="BENCHMARK_GUIDE.html">Руководство по тестовой платформе</a></li>
        <li><a href="CLI_GUIDE.html">Руководство по CLI</a></li>
        <li><a href="CODE_REVIEW.html">Автоматический код-ревью</a></li>
        <li><a href="CPG_EXPORT.html" class="active">Руководство по экспорту CPG</a></li>
        <li><a href="MONITORING.html">Руководство по мониторингу</a></li>
        <li><a href="PROGRAMMATIC_GUIDE.html">Руководство пользователя</a></li>
        <li><a href="PROJECT_IMPORT.html">Импорт новой кодовой базы</a></li>
        <li><a href="QUICK_REFERENCE.html">Краткое руководство по CodeGraph</a></li>
        <li><a href="REFACTORING.html">Руководство по анализу рефакторинга</a></li>
        <li><a href="SCENARIOS.html">Руководство по сценариям рабочих процессов</a></li>
        <li><a href="TROUBLESHOOTING.html">Руководство по устранению неполадок</a></li>
        <li><a href="TUI_USER_GUIDE.html">Руководство пользователя CodeGraph</a></li>
        <li><a href="01-onboarding.html">Сценарий 01: Ввод нового разработчика</a></li>
        <li><a href="02-security-audit.html">Сценарий 02: Аудит безопасности</a></li>
        <li><a href="03-documentation.html">Сценарий 03: Генерация документации</a></li>
        <li><a href="04-feature-development.html">Сценарий 04: Разработка функций</a></li>
        <li><a href="05-refactoring.html">Сценарий 05: Рефакторинг</a></li>
        <li><a href="06-performance.html">Сценарий 06: Анализ производительности</a></li>
        <li><a href="07-test-coverage.html">Сценарий 07: Покрытие тестами</a></li>
        <li><a href="08-compliance.html">Сценарий 08: Проверка соответствия требованиям</a></li>
        <li><a href="09-code-review.html">Сценарий 09: Код-ревью</a></li>
        <li><a href="10-cross-repo.html">Сценарий 10: Анализ между репозиториями</a></li>
        <li><a href="11-architecture.html">Сценарий 11: Анализ архитектуры</a></li>
        <li><a href="12-tech-debt.html">Сценарий 12: Оценка технического долга</a></li>
        <li><a href="13-mass-refactoring.html">Сценарий 13: Массовая рефакторизация</a></li>
        <li><a href="14-incident-response.html">Сценарий 14: Реагирование на инциденты безопасности</a></li>
        <li><a href="15-debugging.html">Сценарий 15: Помощь в отладке</a></li>
        <li><a href="16-entry-points.html">Сценарий 16: Обнаружение точки входа</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">API Документация</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../api/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Интеграции</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../integrations/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Справочник</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../reference/index.html">Обзор</a></li>
      </ul>
    </div>

    <div class="doc-sidebar-section">
      <div class="doc-sidebar-title">Enterprise</div>
      <ul class="doc-sidebar-nav">
        <li><a href="../enterprise/index.html">Обзор</a></li>
      </ul>
    </div>
    </aside>

    <!-- Main Content -->
    <main class="doc-main">
      <!-- Breadcrumb -->
      <nav class="doc-breadcrumb">
        <a href="../index.html">Документация</a>
        <span>/</span>
        <a href="index.html">Руководства</a>
        <span>/</span>
        <span>Руководство по экспорту CPG</span>
      </nav>

      <!-- Hero -->
      <div class="doc-hero">
        <h1>Руководство по экспорту CPG</h1>
        
      </div>

      <!-- Content -->
      <article class="doc-content">
        <h1 id="rukovodstvo-po-eksportu-cpg">Руководство по экспорту CPG<a class="heading-anchor" href="#rukovodstvo-po-eksportu-cpg" title="Link to this section">&para;</a></h1>
<p>В этом руководстве описывается создание и экспорт графов свойств кода (Code Property Graphs, CPG) в DuckDB для анализа с помощью CodeGraph.</p>
<blockquote class="callout">
<p><strong>Примечание:</strong> Для обычной работы с CodeGraph использование Joern <strong>не требуется</strong>. Данные CPG, как правило, уже предварительно экспортированы в DuckDB.</p>
<p>Это руководство предназначено для пользователей, которым необходимо создать новые экспортные файлы CPG из исходного кода.</p>
</blockquote>
<h2 id="soderzhanie">Содержание<a class="heading-anchor" href="#soderzhanie" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="#obzor">Обзор</a></li>
<li><a href="#predvaritelnye-trebovaniya">Предварительные требования</a></li>
<li><a href="#dlya-sozdaniya-novoy-cpg-optsionalno">Для создания новой CPG (опционально)</a></li>
<li><a href="#dlya-ispolzovaniya-suschestvuyuschih-dannyh-cpg">Для использования существующих данных CPG</a></li>
<li><a href="#optsionalno">Опционально</a></li>
<li><a href="#ustanovka-zavisimostey">Установка зависимостей</a></li>
<li><a href="#bystryy-start">Быстрый старт</a></li>
<li><a href="#eksport-cherez-cli-rekomenduetsya">Экспорт через CLI (рекомендуется)</a></li>
<li><a href="#python-api">Python API</a></li>
<li><a href="#spravochnik-po-cli">Справочник по CLI</a></li>
<li><a href="#parametry">Параметры</a></li>
<li><a href="#rasprostranyonnye-komandy">Распространённые команды</a></li>
<li><a href="#protsess-eksporta">Процесс экспорта</a></li>
<li><a href="#shag-1-initsializatsiya-shemy">Шаг 1: Инициализация схемы</a></li>
<li><a href="#shag-2-eksport-uzlov">Шаг 2: Экспорт узлов</a></li>
<li><a href="#shag-3-eksport-ryober">Шаг 3: Экспорт рёбер</a></li>
<li><a href="#shag-4-sozdanie-grafa-svoystv">Шаг 4: Создание графа свойств</a></li>
<li><a href="#shag-5-proverka">Шаг 5: Проверка</a></li>
<li><a href="#sohranenie-sostoyaniya-vozobnovlenie">Сохранение состояния / Возобновление</a></li>
<li><a href="#proverka-progressa">Проверка прогресса</a></li>
<li><a href="#sostoyaniya-progressa">Состояния прогресса</a></li>
<li><a href="#proverka">Проверка</a></li>
<li><a href="#avtomaticheskaya-proverka">Автоматическая проверка</a></li>
<li><a href="#ruchnaya-proverka">Ручная проверка</a></li>
<li><a href="#obrabotka-otsutstvuyuschih-dannyh">Обработка отсутствующих данных</a></li>
<li><a href="#inkrementalnye-obnovleniya">Инкрементальные обновления</a></li>
<li><a href="#proizvoditelnost">Производительность</a></li>
<li><a href="#vektornye-vlozheniya">Векторные вложения</a></li>
<li><a href="#spravochnik-po-sheme">Справочник по схеме</a></li>
<li><a href="#osnovnye-tablitsy-uzlov">Основные таблицы узлов</a></li>
<li><a href="#osnovnye-tablitsy-ryober">Основные таблицы рёбер</a></li>
<li><a href="#polnaya-shema">Полная схема</a></li>
<li><a href="#zaprosy-k-cpg">Запросы к CPG</a></li>
<li><a href="#sql-zaprosy">SQL-запросы</a></li>
<li><a href="#zaprosy-k-grafu-svoystv-duckpgq">Запросы к графу свойств (DuckPGQ)</a></li>
<li><a href="#python-klient">Python-клиент</a></li>
<li><a href="#ustranenie-nepoladok">Устранение неполадок</a></li>
<li><a href="#oshibki-soedineniya">Ошибки соединения</a></li>
<li><a href="#nehvatka-pamyati">Нехватка памяти</a></li>
<li><a href="#medlennyy-eksport">Медленный экспорт</a></li>
<li><a href="#otsutstvuyuschie-uzly">Отсутствующие узлы</a></li>
<li><a href="#rekomendatsii-po-proizvoditelnosti">Рекомендации по производительности</a></li>
<li><a href="#sm-takzhe">См. также</a></li>
</ul>
<h2 id="obzor">Обзор<a class="heading-anchor" href="#obzor" title="Link to this section">&para;</a></h2>
<p>Система экспорта CPG создаёт данные анализа кода в формате DuckDB, что позволяет:</p>
<ul>
<li>Выполнять <strong>SQL-запросы</strong> для обхода графа</li>
<li>Осуществлять <strong>семантический поиск</strong> с использованием векторных вложений</li>
<li>Проводить <strong>анализ безопасности</strong> с генерацией гипотез</li>
<li>Выполнять <strong>инкрементальные обновления</strong> через интеграцию с git</li>
</ul>
<p><strong>Основные возможности:</strong>
- Полное соответствие спецификации CPG v1.1 (22 типа узлов, 20 типов рёбер)
- Поддержка контрольных точек и возобновления для больших кодовых баз
- Автоматическая валидация
- Создание графа свойств для выполнения графовых запросов</p>
<hr />
<h2 id="predvaritelnye-trebovaniya">Предварительные требования<a class="heading-anchor" href="#predvaritelnye-trebovaniya" title="Link to this section">&para;</a></h2>
<h3 id="dlya-sozdaniya-novoy-cpg-optsionalno">Для создания новой CPG (опционально)<a class="heading-anchor" href="#dlya-sozdaniya-novoy-cpg-optsionalno" title="Link to this section">&para;</a></h3>
<ul>
<li>Установленный <strong>Joern</strong> (только если создание новой CPG из исходного кода)</li>
<li><strong>DuckDB</strong> 0.9.0 и выше</li>
<li><strong>Python</strong> 3.10 и выше</li>
</ul>
<h3 id="dlya-ispolzovaniya-suschestvuyuschih-dannyh-cpg">Для использования существующих данных CPG<a class="heading-anchor" href="#dlya-ispolzovaniya-suschestvuyuschih-dannyh-cpg" title="Link to this section">&para;</a></h3>
<ul>
<li><strong>DuckDB</strong> 0.9.0 и выше</li>
<li><strong>Python</strong> 3.10 и выше</li>
<li>Предварительно экспортированный файл базы данных CPG (<code>.duckdb</code>)</li>
</ul>
<h3 id="optsionalno">Опционально<a class="heading-anchor" href="#optsionalno" title="Link to this section">&para;</a></h3>
<ul>
<li>Расширение <strong>DuckPGQ</strong> для выполнения запросов к графу свойств</li>
<li>Библиотека <strong>sentence-transformers</strong> для семантических встраиваний</li>
</ul>
<h3 id="ustanovka-zavisimostey">Установка зависимостей<a class="heading-anchor" href="#ustanovka-zavisimostey" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code>pip install duckdb cpgqls-client sentence-transformers
</code></pre></div>

<h2 id="bystryy-start">Быстрый старт<a class="heading-anchor" href="#bystryy-start" title="Link to this section">&para;</a></h2>
<h3 id="eksport-cherez-cli-rekomenduetsya">Экспорт через CLI (рекомендуется)<a class="heading-anchor" href="#eksport-cherez-cli-rekomenduetsya" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Полный экспорт с проверкой</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span>\
<span class="w">    </span><span class="o">--</span><span class="n">endpoint</span><span class="w"> </span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="w"> </span>\
<span class="w">    </span><span class="o">--</span><span class="n">workspace</span><span class="w"> </span><span class="n">myproject</span><span class="o">.</span><span class="n">cpg</span><span class="w"> </span>\
<span class="w">    </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span>

<span class="c1"># Проверка статуса экспорта</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">status</span>

<span class="c1"># Проверка существующей базы данных</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">validate</span><span class="o">-</span><span class="n">only</span>
</code></pre></div>

<h3 id="python-api">Python API<a class="heading-anchor" href="#python-api" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export</span><span class="w"> </span><span class="kn">import</span> <span class="n">JoernToDuckDBExporter</span>

<span class="c1"># Создание экспортера</span>
<span class="n">exporter</span> <span class="o">=</span> <span class="n">JoernToDuckDBExporter</span><span class="p">(</span>
    <span class="n">server_endpoint</span><span class="o">=</span><span class="s2">&quot;localhost:8080&quot;</span><span class="p">,</span>
    <span class="n">workspace</span><span class="o">=</span><span class="s2">&quot;myproject.cpg&quot;</span><span class="p">,</span>
    <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">,</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">10000</span>
<span class="p">)</span>

<span class="c1"># Полный экспорт с автоматической проверкой</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">exporter</span><span class="o">.</span><span class="n">export_full_cpg</span><span class="p">()</span>

<span class="c1"># Проверка результатов</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Экспортировано узлов: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;node_stats&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Экспортировано рёбер: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;edge_stats&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="spravochnik-cli">Справочник CLI<a class="heading-anchor" href="#spravochnik-cli" title="Link to this section">&para;</a></h2>
<h3 id="parametry">Параметры<a class="heading-anchor" href="#parametry" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Параметр</th>
<th>По умолчанию</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>&ndash;endpoint</td>
<td>localhost:8080</td>
<td>Конечная точка сервера Joern</td>
</tr>
<tr>
<td>&ndash;workspace</td>
<td>pg17_full.cpg</td>
<td>Имя рабочей области/CPG в Joern</td>
</tr>
<tr>
<td>&ndash;db</td>
<td>cpg.duckdb</td>
<td>Путь к выходному файлу DuckDB</td>
</tr>
<tr>
<td>&ndash;batch-size</td>
<td>10000</td>
<td>Количество записей в пакете (соотношение память/скорость)</td>
</tr>
<tr>
<td>&ndash;limit</td>
<td>Нет</td>
<td>Ограничение количества записей на тип (для тестирования)</td>
</tr>
<tr>
<td>&ndash;force</td>
<td>False</td>
<td>Удалить и повторно создать все таблицы</td>
</tr>
<tr>
<td>&ndash;no-resume</td>
<td>False</td>
<td>Отключить возобновление из контрольной точки</td>
</tr>
<tr>
<td>&ndash;skip-validation</td>
<td>False</td>
<td>Пропустить проверку в конце</td>
</tr>
<tr>
<td>&ndash;status</td>
<td>False</td>
<td>Показывать только ход экспорта</td>
</tr>
<tr>
<td>&ndash;validate-only</td>
<td>False</td>
<td>Запустить только проверку</td>
</tr>
</tbody>
</table></div>
<h3 id="rasprostranyonnye-komandy">Распространённые команды<a class="heading-anchor" href="#rasprostranyonnye-komandy" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Возобновление прерванного экспорта</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span>

<span class="c1"># Принудительный полный экспорт (удаляет существующие данные)</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">force</span>

<span class="c1"># Тестирование с ограниченным объёмом данных</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">limit</span><span class="w"> </span><span class="mi">1000</span>

<span class="c1"># Обработка большого кода с меньшими пакетами</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">batch</span><span class="o">-</span><span class="n">size</span><span class="w"> </span><span class="mi">5000</span>
</code></pre></div>

<h2 id="protsess-eksporta">Процесс экспорта<a class="heading-anchor" href="#protsess-eksporta" title="Link to this section">&para;</a></h2>
<p>Экспортёр выполняет 5-ступенчатый конвейер:</p>
<h3 id="shag-1-initsializatsiya-shemy">Шаг 1: Инициализация схемы<a class="heading-anchor" href="#shag-1-initsializatsiya-shemy" title="Link to this section">&para;</a></h3>
<p>Создаёт таблицы для всех типов узлов и рёбер CPG. Таблицы создаются с использованием <code>IF NOT EXISTS</code>, чтобы сохранить существующие данные, если только не указан флаг <code>--force</code>.</p>
<h3 id="shag-2-eksport-uzlov">Шаг 2: Экспорт узлов<a class="heading-anchor" href="#shag-2-eksport-uzlov" title="Link to this section">&para;</a></h3>
<p>Экспортирует все узлы CPG по типам:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Приоритет</th>
<th>Типы узлов</th>
</tr>
</thead>
<tbody>
<tr>
<td>P0 (Основные)</td>
<td>METHOD, CALL, IDENTIFIER, LITERAL, LOCAL, PARAM, RETURN, BLOCK, CONTROL_STRUCTURE</td>
</tr>
<tr>
<td>P0 (Структура)</td>
<td>FILE, NAMESPACE, NAMESPACE_BLOCK, MEMBER, TYPE, TYPE_DECL</td>
</tr>
<tr>
<td>P1</td>
<td>METHOD_PARAMETER_OUT, METHOD_RETURN, FIELD_IDENTIFIER, TYPE_ARGUMENT, TYPE_PARAMETER</td>
</tr>
<tr>
<td>P2</td>
<td>JUMP_LABEL, JUMP_TARGET, METHOD_REF, MODIFIER, TYPE_REF, UNKNOWN</td>
</tr>
<tr>
<td>P3</td>
<td>BINDING, ANNOTATION</td>
</tr>
</tbody>
</table></div>
<h3 id="shag-3-eksport-ryober">Шаг 3: Экспорт рёбер<a class="heading-anchor" href="#shag-3-eksport-ryober" title="Link to this section">&para;</a></h3>
<p>Экспортирует все рёбра CPG:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Приоритет</th>
<th>Типы рёбер</th>
</tr>
</thead>
<tbody>
<tr>
<td>P0 (Основные)</td>
<td>AST, CFG, CALL, REF, ARGUMENT, RECEIVER, CONDITION</td>
</tr>
<tr>
<td>P0 (Анализ)</td>
<td>REACHING_DEF, DOMINATE, POST_DOMINATE, CDG, CONTAINS</td>
</tr>
<tr>
<td>P1</td>
<td>EVAL_TYPE, INHERITS_FROM, ALIAS_OF</td>
</tr>
<tr>
<td>P2</td>
<td>BINDS_TO, PARAMETER_LINK, SOURCE_FILE</td>
</tr>
<tr>
<td>P3</td>
<td>TAGGED_BY, BINDS</td>
</tr>
</tbody>
</table></div>
<h3 id="shag-4-sozdanie-grafa-svoystv">Шаг 4: Создание графа свойств<a class="heading-anchor" href="#shag-4-sozdanie-grafa-svoystv" title="Link to this section">&para;</a></h3>
<p>Создаётся граф свойств DuckDB с именем <code>cpg</code> для выполнения запросов с обходом графа:</p>
<div class="highlight"><pre><span></span><code><span class="o">--</span><span class="w"> </span><span class="err">Запрос</span><span class="w"> </span><span class="err">с</span><span class="w"> </span><span class="err">использованием</span><span class="w"> </span><span class="err">графа</span><span class="w"> </span><span class="err">свойств</span>
<span class="n">FROM</span><span class="w"> </span><span class="n">GRAPH_TABLE</span><span class="p">(</span><span class="n">cpg</span>
<span class="w">    </span><span class="n">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="o">:</span><span class="n">METHOD</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">c</span><span class="o">:</span><span class="n">CALLS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">callee</span><span class="o">:</span><span class="n">METHOD</span><span class="p">)</span>
<span class="w">    </span><span class="n">WHERE</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;main&#39;</span>
<span class="w">    </span><span class="n">COLUMNS</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="kr">AS</span><span class="w"> </span><span class="n">caller</span><span class="p">,</span><span class="w"> </span><span class="n">callee</span><span class="p">.</span><span class="n">full_name</span><span class="w"> </span><span class="kr">AS</span><span class="w"> </span><span class="n">callee</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="shag-5-proverka">Шаг 5: Проверка<a class="heading-anchor" href="#shag-5-proverka" title="Link to this section">&para;</a></h3>
<p>Сравниваются количества узлов в Joern и DuckDB для подтверждения полноты экспорта:</p>
<div class="highlight"><pre><span></span><code><span class="o">======================================================================</span>
<span class="n">ОТЧЁТ</span><span class="w"> </span><span class="n">О</span><span class="w"> </span><span class="n">ПРОВЕРКЕ</span><span class="w"> </span><span class="n">ЭКСПОРТА</span><span class="w"> </span><span class="n">CPG</span>
<span class="o">======================================================================</span>
<span class="o">[</span><span class="n">OK</span><span class="o">]</span><span class="w">       </span><span class="n">nodes_method</span><span class="w">                      </span><span class="mi">1234</span><span class="w"> </span><span class="o">/</span><span class="w">     </span><span class="mi">1234</span><span class="w"> </span><span class="p">(</span><span class="mf">100.0</span><span class="o">%</span><span class="p">)</span>
<span class="o">[</span><span class="n">OK</span><span class="o">]</span><span class="w">       </span><span class="n">nodes_call</span><span class="w">                       </span><span class="mi">45678</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">45678</span><span class="w"> </span><span class="p">(</span><span class="mf">100.0</span><span class="o">%</span><span class="p">)</span>
<span class="o">[</span><span class="n">ОТСУТСТВУЕТ</span><span class="o">]</span><span class="w">  </span><span class="n">nodes_identifier</span><span class="w">             </span><span class="mi">89000</span><span class="w"> </span><span class="o">/</span><span class="w">    </span><span class="mi">89012</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">99.9</span><span class="o">%</span><span class="p">)</span>
<span class="c1">----------------------------------------------------------------------</span>
<span class="n">ИТОГО</span><span class="w">                                     </span><span class="mi">134912</span><span class="w"> </span><span class="o">/</span><span class="w">   </span><span class="mi">134924</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">99.9</span><span class="o">%</span><span class="p">)</span>
<span class="o">======================================================================</span>
</code></pre></div>

<h2 id="sohranenie-sostoyaniya-i-vozobnovlenie">Сохранение состояния и возобновление<a class="heading-anchor" href="#sohranenie-sostoyaniya-i-vozobnovlenie" title="Link to this section">&para;</a></h2>
<p>Экспортёр автоматически сохраняет прогресс после каждой партии данных. В случае прерывания:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Просто запустите снова — возобновление произойдёт автоматически</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span>
</code></pre></div>

<h3 id="proverka-progressa">Проверка прогресса<a class="heading-anchor" href="#proverka-progressa" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Через CLI</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">status</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="o">--</span><span class="w"> </span><span class="err">Прямой</span><span class="w"> </span><span class="n">SQL</span><span class="o">-</span><span class="err">запрос</span>
<span class="n">SELECT</span><span class="w"> </span><span class="n">entity_type</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">exported_count</span><span class="p">,</span><span class="w"> </span><span class="n">last_offset</span>
<span class="n">FROM</span><span class="w"> </span><span class="n">export_progress</span>
<span class="n">ORDER</span><span class="w"> </span><span class="n">BY</span><span class="w"> </span><span class="n">entity_type</span><span class="p">;</span>
</code></pre></div>

<h3 id="sostoyaniya-progressa">Состояния прогресса<a class="heading-anchor" href="#sostoyaniya-progressa" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Статус</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>pending</td>
<td>Ещё не начато</td>
</tr>
<tr>
<td>in_progress</td>
<td>В процессе экспорта</td>
</tr>
<tr>
<td>completed</td>
<td>Успешно завершено</td>
</tr>
<tr>
<td>failed</td>
<td>Произошла ошибка</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="proverka-dannyh">Проверка данных<a class="heading-anchor" href="#proverka-dannyh" title="Link to this section">&para;</a></h2>
<h3 id="avtomaticheskaya-proverka">Автоматическая проверка<a class="heading-anchor" href="#avtomaticheskaya-proverka" title="Link to this section">&para;</a></h3>
<p>Проверка запускается автоматически в конце экспорта. Чтобы пропустить:</p>
<div class="highlight"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">validation</span>
</code></pre></div>

<h3 id="ruchnaya-proverka">Ручная проверка<a class="heading-anchor" href="#ruchnaya-proverka" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># CLI</span>
<span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">src</span><span class="o">.</span><span class="n">cpg_export</span><span class="o">.</span><span class="n">exporter</span><span class="w"> </span><span class="o">--</span><span class="n">db</span><span class="w"> </span><span class="n">cpg</span><span class="o">.</span><span class="n">duckdb</span><span class="w"> </span><span class="o">--</span><span class="n">validate</span><span class="o">-</span><span class="n">only</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Python API</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_export</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.execution.joern_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">JoernClient</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">duckdb</span>

<span class="n">joern</span> <span class="o">=</span> <span class="n">JoernClient</span><span class="p">(</span><span class="s2">&quot;localhost:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;myproject.cpg&quot;</span><span class="p">)</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">validate_export</span><span class="p">(</span><span class="n">joern</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">print_report</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<h3 id="rabota-s-otsutstvuyuschimi-dannymi">Работа с отсутствующими данными<a class="heading-anchor" href="#rabota-s-otsutstvuyuschimi-dannymi" title="Link to this section">&para;</a></h3>
<p>Если при проверке обнаруживаются отсутствующие записи:</p>
<ol>
<li><strong>Проверьте логи Joern</strong> на наличие ошибок парсинга</li>
<li><strong>Повторно экспортируйте определённые типы</strong>, если произошёл частичный сбой</li>
<li><strong>Принудительно пересоздайте</strong> базу, если подозревается повреждение данных</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># Повторный экспорт только узлов</span>
<span class="n">exporter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JoernToDuckDBExporter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">exporter</span><span class="o">.</span><span class="n">connect_db</span><span class="p">()</span>
<span class="n">node_stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exporter</span><span class="o">.</span><span class="n">export_nodes_only</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>

<span class="c1"># Повторный экспорт только рёбер</span>
<span class="n">edge_stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exporter</span><span class="o">.</span><span class="n">export_edges_only</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="inkrementalnye-obnovleniya">Инкрементальные обновления<a class="heading-anchor" href="#inkrementalnye-obnovleniya" title="Link to this section">&para;</a></h2>
<p>Для репозиториев с активной разработкой используйте инкрементальный экспорт:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export.incremental_exporter</span><span class="w"> </span><span class="kn">import</span> <span class="n">IncrementalCPGExporter</span>

<span class="n">exporter</span> <span class="o">=</span> <span class="n">IncrementalCPGExporter</span><span class="p">(</span>
    <span class="n">repo_path</span><span class="o">=</span><span class="s2">&quot;/path/to/repo&quot;</span><span class="p">,</span>
    <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">,</span>
    <span class="n">joern_path</span><span class="o">=</span><span class="s2">&quot;/path/to/joern&quot;</span>
<span class="p">)</span>

<span class="c1"># Обновление на основе изменений в git</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">exporter</span><span class="o">.</span><span class="n">update_from_git_diff</span><span class="p">(</span>
    <span class="n">from_ref</span><span class="o">=</span><span class="s2">&quot;HEAD~5&quot;</span><span class="p">,</span>  <span class="c1"># Последние 5 коммитов</span>
    <span class="n">to_ref</span><span class="o">=</span><span class="s2">&quot;HEAD&quot;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Статус: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Изменённые файлы: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">changed_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Обновлено узлов: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">nodes_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Время выполнения: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">duration_seconds</span><span class="si">}</span><span class="s2"> с&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="proizvoditelnost">Производительность<a class="heading-anchor" href="#proizvoditelnost" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Операция</th>
<th>Полный экспорт</th>
<th>Инкрементальный</th>
</tr>
</thead>
<tbody>
<tr>
<td>100K строк кода</td>
<td>~20 мин</td>
<td>~2 мин</td>
</tr>
<tr>
<td>1M строк кода</td>
<td>~3 часа</td>
<td>~10 мин</td>
</tr>
</tbody>
</table></div>
<hr />
<h2 id="vektornye-vlozheniya-vector-embeddings">Векторные вложения (Vector Embeddings)<a class="heading-anchor" href="#vektornye-vlozheniya-vector-embeddings" title="Link to this section">&para;</a></h2>
<p>Добавьте семантические вложения для поиска кода:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export.add_vector_embeddings</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_embeddings_to_methods</span>

<span class="c1"># Добавить вложения в таблицу методов</span>
<span class="n">add_embeddings_to_methods</span><span class="p">(</span>
    <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">,</span>
    <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;all-MiniLM-L6-v2&quot;</span><span class="p">,</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>

<span class="c1"># Семантический поиск</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export.add_vector_embeddings</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_similar_methods</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">find_similar_methods</span><span class="p">(</span>
    <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">,</span>
    <span class="n">query</span><span class="o">=</span><span class="s2">&quot;parse user input safely&quot;</span><span class="p">,</span>
    <span class="n">top_k</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</code></pre></div>

<hr />
<h2 id="spravochnik-po-sheme">Справочник по схеме<a class="heading-anchor" href="#spravochnik-po-sheme" title="Link to this section">&para;</a></h2>
<h3 id="osnovnye-tablitsy-uzlov">Основные таблицы узлов<a class="heading-anchor" href="#osnovnye-tablitsy-uzlov" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Таблица</th>
<th>Ключевые столбцы</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodes_method</td>
<td>id, name, full_name, filename, line_number</td>
<td>Функции/методы</td>
</tr>
<tr>
<td>nodes_call</td>
<td>id, name, method_full_name, filename, line_number</td>
<td>Места вызовов</td>
</tr>
<tr>
<td>nodes_identifier</td>
<td>id, name, type_full_name, line_number</td>
<td>Ссылки на переменные</td>
</tr>
<tr>
<td>nodes_literal</td>
<td>id, code, type_full_name</td>
<td>Литеральные значения</td>
</tr>
<tr>
<td>nodes_local</td>
<td>id, name, type_full_name</td>
<td>Локальные переменные</td>
</tr>
<tr>
<td>nodes_param</td>
<td>id, name, type_full_name, index</td>
<td>Параметры</td>
</tr>
<tr>
<td>nodes_return</td>
<td>id, code, line_number</td>
<td>Операторы возврата</td>
</tr>
<tr>
<td>nodes_block</td>
<td>id, type_full_name, line_number</td>
<td>Блоки кода</td>
</tr>
<tr>
<td>nodes_control_structure</td>
<td>id, control_structure_type, line_number</td>
<td>if/for/while</td>
</tr>
<tr>
<td>nodes_type_decl</td>
<td>id, name, full_name, filename</td>
<td>Объявления типов</td>
</tr>
<tr>
<td>nodes_file</td>
<td>id, name, hash</td>
<td>Исходные файлы</td>
</tr>
</tbody>
</table></div>
<h3 id="osnovnye-tablitsy-ryober">Основные таблицы рёбер<a class="heading-anchor" href="#osnovnye-tablitsy-ryober" title="Link to this section">&para;</a></h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Таблица</th>
<th>Столбцы</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>edges_ast</td>
<td>src, dst</td>
<td>Родитель-потомок в AST</td>
</tr>
<tr>
<td>edges_cfg</td>
<td>src, dst</td>
<td>Поток управления</td>
</tr>
<tr>
<td>edges_call</td>
<td>src, dst</td>
<td>Вызовы методов</td>
</tr>
<tr>
<td>edges_ref</td>
<td>src, dst</td>
<td>Ссылки на переменные</td>
</tr>
<tr>
<td>edges_reaching_def</td>
<td>src, dst, variable</td>
<td>Поток данных</td>
</tr>
<tr>
<td>edges_cdg</td>
<td>src, dst</td>
<td>Контрольная зависимость</td>
</tr>
<tr>
<td>edges_dominate</td>
<td>src, dst</td>
<td>Доминирование</td>
</tr>
</tbody>
</table></div>
<h3 id="polnaya-shema">Полная схема<a class="heading-anchor" href="#polnaya-shema" title="Link to this section">&para;</a></h3>
<p>Полная документация по схеме доступна в файле <code>src/cpg_export/duckdb_cpg_schema.md</code>.</p>
<hr />
<h2 id="zaprosy-k-cpg">Запросы к CPG<a class="heading-anchor" href="#zaprosy-k-cpg" title="Link to this section">&para;</a></h2>
<h3 id="sql-zaprosy">SQL-запросы<a class="heading-anchor" href="#sql-zaprosy" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="o">--</span><span class="w"> </span><span class="nx">Найти</span><span class="w"> </span><span class="nx">все</span><span class="w"> </span><span class="nx">методы</span><span class="w"> </span><span class="nx">в</span><span class="w"> </span><span class="nx">файле</span>
<span class="nx">SELECT</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">full_name</span><span class="p">,</span><span class="w"> </span><span class="nx">line_number</span>
<span class="nx">FROM</span><span class="w"> </span><span class="nx">nodes_method</span>
<span class="nx">WHERE</span><span class="w"> </span><span class="nx">filename</span><span class="w"> </span><span class="nx">LIKE</span><span class="w"> </span><span class="err">&#39;</span><span class="o">%</span><span class="nx">auth</span><span class="o">%</span><span class="err">&#39;</span>
<span class="nx">ORDER</span><span class="w"> </span><span class="nx">BY</span><span class="w"> </span><span class="nx">line_number</span><span class="p">;</span>

<span class="o">--</span><span class="w"> </span><span class="nx">Найти</span><span class="w"> </span><span class="nx">вызовы</span><span class="w"> </span><span class="nx">опасных</span><span class="w"> </span><span class="nx">функций</span>
<span class="nx">SELECT</span><span class="w"> </span><span class="nx">nc</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">nc</span><span class="p">.</span><span class="nx">filename</span><span class="p">,</span><span class="w"> </span><span class="nx">nc</span><span class="p">.</span><span class="nx">line_number</span>
<span class="nx">FROM</span><span class="w"> </span><span class="nx">nodes_call</span><span class="w"> </span><span class="nx">nc</span>
<span class="nx">WHERE</span><span class="w"> </span><span class="nx">nc</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="nx">IN</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="nx">system</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">exec</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">eval</span><span class="err">&#39;</span><span class="p">);</span>

<span class="o">--</span><span class="w"> </span><span class="nx">Подсчёт</span><span class="w"> </span><span class="nx">узлов</span><span class="w"> </span><span class="nx">по</span><span class="w"> </span><span class="nx">типам</span>
<span class="nx">SELECT</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">METHOD</span><span class="err">&#39;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="nx">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">cnt</span><span class="w"> </span><span class="nx">FROM</span><span class="w"> </span><span class="nx">nodes_method</span>
<span class="nx">UNION</span><span class="w"> </span><span class="nx">ALL</span>
<span class="nx">SELECT</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">CALL</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="nx">FROM</span><span class="w"> </span><span class="nx">nodes_call</span>
<span class="nx">UNION</span><span class="w"> </span><span class="nx">ALL</span>
<span class="nx">SELECT</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">IDENTIFIER</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="nx">FROM</span><span class="w"> </span><span class="nx">nodes_identifier</span><span class="p">;</span>
</code></pre></div>

<h3 id="zaprosy-k-grafu-svoystv-duckpgq">Запросы к графу свойств (DuckPGQ)<a class="heading-anchor" href="#zaprosy-k-grafu-svoystv-duckpgq" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="o">--</span><span class="w"> </span><span class="err">Найти</span><span class="w"> </span><span class="err">цепочки</span><span class="w"> </span><span class="err">вызовов</span>
<span class="n">FROM</span><span class="w"> </span><span class="n">GRAPH_TABLE</span><span class="p">(</span><span class="n">cpg</span>
<span class="w">    </span><span class="n">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">caller</span><span class="p">:</span><span class="n">METHOD</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">c</span><span class="p">:</span><span class="n">CALLS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">callee</span><span class="p">:</span><span class="n">METHOD</span><span class="p">)</span>
<span class="w">    </span><span class="n">WHERE</span><span class="w"> </span><span class="n">caller</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;process_input&#39;</span>
<span class="w">    </span><span class="n">COLUMNS</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="n">caller</span><span class="o">.</span><span class="n">full_name</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">caller</span><span class="p">,</span>
<span class="w">        </span><span class="n">callee</span><span class="o">.</span><span class="n">full_name</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">callee</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">)</span>
<span class="n">LIMIT</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>

<span class="o">--</span><span class="w"> </span><span class="err">Найти</span><span class="w"> </span><span class="err">пути</span><span class="w"> </span><span class="err">потока</span><span class="w"> </span><span class="err">данных</span>
<span class="n">FROM</span><span class="w"> </span><span class="n">GRAPH_TABLE</span><span class="p">(</span><span class="n">cpg</span>
<span class="w">    </span><span class="n">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">src</span><span class="p">:</span><span class="n">IDENTIFIER</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">REACHING_DEF</span><span class="o">*</span><span class="mf">1.</span><span class="o">.</span><span class="mi">5</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">sink</span><span class="p">:</span><span class="n">CALL</span><span class="p">)</span>
<span class="w">    </span><span class="n">WHERE</span><span class="w"> </span><span class="n">sink</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;execute&#39;</span>
<span class="w">    </span><span class="n">COLUMNS</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">source_var</span><span class="p">,</span>
<span class="w">        </span><span class="n">sink</span><span class="o">.</span><span class="n">code</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">sink_call</span><span class="p">,</span>
<span class="w">        </span><span class="n">sink</span><span class="o">.</span><span class="n">line_number</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">line</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="python-klient">Python-клиент<a class="heading-anchor" href="#python-klient" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.cpg_export.duckdb_cpg_client_v2</span><span class="w"> </span><span class="kn">import</span> <span class="n">DuckDBCPGClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">DuckDBCPGClient</span><span class="p">(</span><span class="s2">&quot;cpg.duckdb&quot;</span><span class="p">)</span>

<span class="c1"># Найти методы по шаблону</span>
<span class="n">methods</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">find_methods_by_name</span><span class="p">(</span><span class="s2">&quot;parse%&quot;</span><span class="p">)</span>

<span class="c1"># Получить граф вызовов для метода</span>
<span class="n">callgraph</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_callgraph</span><span class="p">(</span><span class="s2">&quot;UserController::authenticate&quot;</span><span class="p">)</span>

<span class="c1"># Получить статистику</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Всего методов: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;nodes_method&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Всего вызовов: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;nodes_call&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="ustranenie-nepoladok">Устранение неполадок<a class="heading-anchor" href="#ustranenie-nepoladok" title="Link to this section">&para;</a></h2>
<h3 id="oshibki-podklyucheniya">Ошибки подключения<a class="heading-anchor" href="#oshibki-podklyucheniya" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">Ошибка</span><span class="o">:</span><span class="w"> </span><span class="err">Не</span><span class="w"> </span><span class="err">удалось</span><span class="w"> </span><span class="err">подключиться</span><span class="w"> </span><span class="err">к</span><span class="w"> </span><span class="err">серверу</span><span class="w"> </span><span class="n">Joern</span>
</code></pre></div>

<p><strong>Решение:</strong> Убедитесь, что Joern запущен и доступен:</p>
<div class="highlight"><pre><span></span><code># Проверка подключения
curl http://localhost:8080/result
</code></pre></div>

<h3 id="nehvatka-pamyati">Нехватка памяти<a class="heading-anchor" href="#nehvatka-pamyati" title="Link to this section">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="err">Ошибка</span><span class="o">:</span><span class="w"> </span><span class="err">База</span><span class="w"> </span><span class="err">данных</span><span class="w"> </span><span class="err">исчерпала</span><span class="w"> </span><span class="err">память</span>
</code></pre></div>

<p><strong>Решения:</strong>
1. Уменьшите размер пакета: <code>--batch-size 5000</code>
2. Используйте <code>--limit</code> для тестирования
3. Закройте другие приложения</p>
<h3 id="medlennyy-eksport">Медленный экспорт<a class="heading-anchor" href="#medlennyy-eksport" title="Link to this section">&para;</a></h3>
<p>Для больших кодовых баз (&gt;1 млн строк кода):</p>
<ol>
<li>Используйте инкрементальный экспорт для обновлений</li>
<li>Запускайте экспорт на ночь при первоначальном выполнении</li>
<li>Рассмотрите возможность разделения по каталогам</li>
</ol>
<h3 id="otsutstvuyuschie-uzly">Отсутствующие узлы<a class="heading-anchor" href="#otsutstvuyuschie-uzly" title="Link to this section">&para;</a></h3>
<p>Если при проверке обнаруживаются отсутствующие узлы:</p>
<ol>
<li>Проверьте логи парсинга Joern на наличие ошибок</li>
<li>Убедитесь, что рабочая область открыта корректно</li>
<li>Попробуйте принудительное пересоздание: <code>--force</code></li>
</ol>
<hr />
<h2 id="rekomendatsii-po-proizvoditelnosti">Рекомендации по производительности<a class="heading-anchor" href="#rekomendatsii-po-proizvoditelnosti" title="Link to this section">&para;</a></h2>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Объём кодовой базы</th>
<th>Размер пакета</th>
<th>Оценочное время</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;50K строк кода</td>
<td>10000</td>
<td>&lt;5 мин</td>
</tr>
<tr>
<td>50K–200K строк кода</td>
<td>10000</td>
<td>5–30 мин</td>
</tr>
<tr>
<td>200K–1M строк кода</td>
<td>5000</td>
<td>30 мин – 3 часа</td>
</tr>
<tr>
<td>&gt;1M строк кода</td>
<td>2000</td>
<td>3+ часа</td>
</tr>
</tbody>
</table></div>
<p><strong>Оптимизации:</strong>
- Использование SSD-накопителя для базы данных
- Достаточный объём ОЗУ (8 ГБ и более для крупных кодовых баз)
- Отдельный запуск проверки, если требуется
- Использование инкрементальной экспорта для обновлений</p>
<hr />
<h2 id="smotrite-takzhe">Смотрите также<a class="heading-anchor" href="#smotrite-takzhe" title="Link to this section">&para;</a></h2>
<ul>
<li><a href="../reference/SQL_QUERY_COOKBOOK.html">Кулинарная книга SQL-запросов</a> — примеры запросов</li>
<li><a href="../reference/SCHEMA.html">Справочник схемы</a> — справочная информация о схеме базы данных</li>
<li><a href="https://docs.joern.io/">Документация Joern</a></li>
<li><a href="https://duckdb.org/docs/">Документация DuckDB</a></li>
<li><a href="https://cpg.joern.io/">Спецификация CPG v1.1</a></li>
</ul>
      </article>

      <!-- Page Navigation -->
      <nav class="doc-page-nav">

      <a href="PROJECT_IMPORT.html" class="doc-page-nav-prev">
        <span class="doc-page-nav-label">Назад</span>
        <span class="doc-page-nav-title">Импорт новой кодовой базы</span>
      </a>

      <a href="CODE_REVIEW.html" class="doc-page-nav-next">
        <span class="doc-page-nav-label">Вперед</span>
        <span class="doc-page-nav-title">Автоматический код-ревью</span>
      </a>
    </nav>

      <!-- Footer -->
      <footer class="doc-footer">
        <span>Обновлено: 2025-12-28</span>
        <a href="https://github.com/your-org/codegraph/edit/main/docs/guides/CPG_EXPORT.md" target="_blank" rel="noopener">Редактировать на GitHub</a>
      </footer>
    </main>

    <!-- Table of Contents -->
    <aside class="doc-toc">
      <div class="doc-toc-title">На этой странице</div>
      <ul class="doc-toc-list">
        <li><a href="#rukovodstvo-po-eksportu-cpg" class="level-1">Руководство по экспорту CPG</a></li>
<li><a href="#soderzhanie" class="level-2">Содержание</a></li>
<li><a href="#obzor" class="level-2">Обзор</a></li>
<li><a href="#predvaritelnye-trebovaniya" class="level-2">Предварительные требования</a></li>
<li><a href="#dlya-sozdaniya-novoy-cpg-optsionalno" class="level-3">Для создания новой CPG (опционально)</a></li>
<li><a href="#dlya-ispolzovaniya-suschestvuyuschih-dannyh-cpg" class="level-3">Для использования существующих данных CPG</a></li>
<li><a href="#optsionalno" class="level-3">Опционально</a></li>
<li><a href="#ustanovka-zavisimostey" class="level-3">Установка зависимостей</a></li>
<li><a href="#bystryy-start" class="level-2">Быстрый старт</a></li>
<li><a href="#eksport-cherez-cli-rekomenduetsya" class="level-3">Экспорт через CLI (рекомендуется)</a></li>
<li><a href="#polnyy-eksport-s-proverkoy" class="level-1">Полный экспорт с проверкой</a></li>
<li><a href="#proverka-statusa-eksporta" class="level-1">Проверка статуса экспорта</a></li>
<li><a href="#proverka-suschestvuyuschey-bazy-dannyh" class="level-1">Проверка существующей базы данных</a></li>
<li><a href="#python-api" class="level-3">Python API</a></li>
<li><a href="#sozdanie-eksportera" class="level-1">Создание экспортера</a></li>
<li><a href="#polnyy-eksport-s-avtomaticheskoy-proverkoy" class="level-1">Полный экспорт с автоматической проверкой</a></li>
<li><a href="#proverka-rezultatov" class="level-1">Проверка результатов</a></li>
<li><a href="#spravochnik-cli" class="level-2">Справочник CLI</a></li>
<li><a href="#parametry" class="level-3">Параметры</a></li>
<li><a href="#rasprostranyonnye-komandy" class="level-3">Распространённые команды</a></li>
<li><a href="#vozobnovlenie-prervannogo-eksporta" class="level-1">Возобновление прерванного экспорта</a></li>
<li><a href="#prinuditelnyy-polnyy-eksport-udalyaet-suschestvuyuschie-dannye" class="level-1">Принудительный полный экспорт (удаляет существующие данные)</a></li>
<li><a href="#testirovanie-s-ogranichennym-obyomom-dannyh" class="level-1">Тестирование с ограниченным объёмом данных</a></li>
<li><a href="#obrabotka-bolshogo-koda-s-menshimi-paketami" class="level-1">Обработка большого кода с меньшими пакетами</a></li>
<li><a href="#protsess-eksporta" class="level-2">Процесс экспорта</a></li>
<li><a href="#shag-1-initsializatsiya-shemy" class="level-3">Шаг 1: Инициализация схемы</a></li>
<li><a href="#shag-2-eksport-uzlov" class="level-3">Шаг 2: Экспорт узлов</a></li>
<li><a href="#shag-3-eksport-ryober" class="level-3">Шаг 3: Экспорт рёбер</a></li>
<li><a href="#shag-4-sozdanie-grafa-svoystv" class="level-3">Шаг 4: Создание графа свойств</a></li>
<li><a href="#shag-5-proverka" class="level-3">Шаг 5: Проверка</a></li>
<li><a href="#sohranenie-sostoyaniya-i-vozobnovlenie" class="level-2">Сохранение состояния и возобновление</a></li>
<li><a href="#prosto-zapustite-snova-vozobnovlenie-proizoydyot-avtomaticheski" class="level-1">Просто запустите снова — возобновление произойдёт автоматически</a></li>
<li><a href="#proverka-progressa" class="level-3">Проверка прогресса</a></li>
<li><a href="#cherez-cli" class="level-1">Через CLI</a></li>
<li><a href="#sostoyaniya-progressa" class="level-3">Состояния прогресса</a></li>
<li><a href="#proverka-dannyh" class="level-2">Проверка данных</a></li>
<li><a href="#avtomaticheskaya-proverka" class="level-3">Автоматическая проверка</a></li>
<li><a href="#ruchnaya-proverka" class="level-3">Ручная проверка</a></li>
<li><a href="#cli" class="level-1">CLI</a></li>
<li><a href="#python-api" class="level-1">Python API</a></li>
<li><a href="#rabota-s-otsutstvuyuschimi-dannymi" class="level-3">Работа с отсутствующими данными</a></li>
<li><a href="#povtornyy-eksport-tolko-uzlov" class="level-1">Повторный экспорт только узлов</a></li>
<li><a href="#povtornyy-eksport-tolko-ryober" class="level-1">Повторный экспорт только рёбер</a></li>
<li><a href="#inkrementalnye-obnovleniya" class="level-2">Инкрементальные обновления</a></li>
<li><a href="#obnovlenie-na-osnove-izmeneniy-v-git" class="level-1">Обновление на основе изменений в git</a></li>
<li><a href="#proizvoditelnost" class="level-3">Производительность</a></li>
<li><a href="#vektornye-vlozheniya-vector-embeddings" class="level-2">Векторные вложения (Vector Embeddings)</a></li>
<li><a href="#dobavit-vlozheniya-v-tablitsu-metodov" class="level-1">Добавить вложения в таблицу методов</a></li>
<li><a href="#semanticheskiy-poisk" class="level-1">Семантический поиск</a></li>
<li><a href="#spravochnik-po-sheme" class="level-2">Справочник по схеме</a></li>
<li><a href="#osnovnye-tablitsy-uzlov" class="level-3">Основные таблицы узлов</a></li>
<li><a href="#osnovnye-tablitsy-ryober" class="level-3">Основные таблицы рёбер</a></li>
<li><a href="#polnaya-shema" class="level-3">Полная схема</a></li>
<li><a href="#zaprosy-k-cpg" class="level-2">Запросы к CPG</a></li>
<li><a href="#sql-zaprosy" class="level-3">SQL-запросы</a></li>
<li><a href="#zaprosy-k-grafu-svoystv-duckpgq" class="level-3">Запросы к графу свойств (DuckPGQ)</a></li>
<li><a href="#python-klient" class="level-3">Python-клиент</a></li>
<li><a href="#nayti-metody-po-shablonu" class="level-1">Найти методы по шаблону</a></li>
<li><a href="#poluchit-graf-vyzovov-dlya-metoda" class="level-1">Получить граф вызовов для метода</a></li>
<li><a href="#poluchit-statistiku" class="level-1">Получить статистику</a></li>
<li><a href="#ustranenie-nepoladok" class="level-2">Устранение неполадок</a></li>
<li><a href="#oshibki-podklyucheniya" class="level-3">Ошибки подключения</a></li>
<li><a href="#proverka-podklyucheniya" class="level-1">Проверка подключения</a></li>
<li><a href="#nehvatka-pamyati" class="level-3">Нехватка памяти</a></li>
<li><a href="#medlennyy-eksport" class="level-3">Медленный экспорт</a></li>
<li><a href="#otsutstvuyuschie-uzly" class="level-3">Отсутствующие узлы</a></li>
<li><a href="#rekomendatsii-po-proizvoditelnosti" class="level-2">Рекомендации по производительности</a></li>
<li><a href="#smotrite-takzhe" class="level-2">Смотрите также</a></li>
      </ul>
    </aside>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../../../assets/svg/logo.svg" alt="CodeGraph" width="160" height="40">
          <p>AI-копилот для анализа исходного кода</p>
        </div>
        <div class="footer-links">
          <div class="footer-links-group">
            <h4>Продукт</h4>
            <ul class="footer-links-list">
              <li><a href="../../../index.html#features" class="footer-link">Возможности</a></li>
              <li><a href="../../../index.html#integrations" class="footer-link">Интеграции</a></li>
              <li><a href="../../../index.html#faq" class="footer-link">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Документация</h4>
            <ul class="footer-links-list">
              <li><a href="../getting-started/index.html" class="footer-link">Начало работы</a></li>
              <li><a href="../guides/index.html" class="footer-link">Руководства</a></li>
              <li><a href="../api/index.html" class="footer-link">API</a></li>
              <li><a href="../enterprise/index.html" class="footer-link">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Ресурсы</h4>
            <ul class="footer-links-list">
              <li><a href="../../../whitepaper.html" class="footer-link">Whitepaper</a></li>
            </ul>
          </div>
          <div class="footer-links-group">
            <h4>Контакты</h4>
            <ul class="footer-links-list">
              <li><a href="mailto:hello@codegraph.ru" class="footer-link">hello@codegraph.ru</a></li>
              <li><a href="https://t.me/codegraph" class="footer-link" target="_blank" rel="noopener">Telegram</a></li>
              <li><a href="https://github.com/codegraph" class="footer-link" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
            <div class="footer-social">
              <a href="https://t.me/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="Telegram">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </a>
              <a href="https://github.com/codegraph" class="footer-social-link" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 CodeGraph. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script src="../../../js/main.js"></script>
</body>
</html>
