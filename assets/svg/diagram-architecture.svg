<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" fill="none">
  <!-- CodeGraph On-Premise Architecture Diagram -->
  <defs>
    <linearGradient id="archGradBlue" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6"/>
      <stop offset="100%" style="stop-color:#2563EB"/>
    </linearGradient>
    <linearGradient id="archGradGreen" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="archGradYellow" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </linearGradient>
    <filter id="archShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.1"/>
    </filter>
    <pattern id="gridPattern" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#E2E8F0" stroke-width="0.5"/>
    </pattern>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#F8FAFC"/>
  <rect width="800" height="500" fill="url(#gridPattern)" opacity="0.5"/>

  <!-- Your Infrastructure Border -->
  <rect x="30" y="30" width="740" height="440" rx="16" fill="white" stroke="#E2E8F0" stroke-width="2" stroke-dasharray="8 4"/>
  <rect x="30" y="30" width="200" height="32" rx="16" fill="#1E293B"/>
  <text x="130" y="51" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="white">YOUR INFRASTRUCTURE</text>

  <!-- CodeGraph Server -->
  <g filter="url(#archShadow)">
    <rect x="80" y="100" width="200" height="160" rx="12" fill="white" stroke="#2563EB" stroke-width="2"/>
    <rect x="80" y="100" width="200" height="40" rx="12" fill="url(#archGradBlue)"/>
    <rect x="80" y="128" width="200" height="12" fill="url(#archGradBlue)"/>
    <text x="180" y="126" text-anchor="middle" font-family="system-ui" font-size="14" font-weight="700" fill="white">CodeGraph Server</text>

    <!-- Server components -->
    <rect x="95" y="155" width="75" height="35" rx="6" fill="#EFF6FF" stroke="#BFDBFE" stroke-width="1"/>
    <text x="132" y="177" text-anchor="middle" font-family="system-ui" font-size="10" font-weight="500" fill="#1E3A8A">Analyzer</text>

    <rect x="180" y="155" width="85" height="35" rx="6" fill="#EFF6FF" stroke="#BFDBFE" stroke-width="1"/>
    <text x="222" y="177" text-anchor="middle" font-family="system-ui" font-size="10" font-weight="500" fill="#1E3A8A">Generator</text>

    <rect x="95" y="200" width="170" height="35" rx="6" fill="#EFF6FF" stroke="#BFDBFE" stroke-width="1"/>
    <text x="180" y="222" text-anchor="middle" font-family="system-ui" font-size="10" font-weight="500" fill="#1E3A8A">Hybrid Retriever</text>
  </g>

  <!-- DuckDB CPG -->
  <g filter="url(#archShadow)">
    <rect x="320" y="100" width="180" height="120" rx="12" fill="white" stroke="#F59E0B" stroke-width="2"/>
    <rect x="320" y="100" width="180" height="40" rx="12" fill="url(#archGradYellow)"/>
    <rect x="320" y="128" width="180" height="12" fill="url(#archGradYellow)"/>
    <text x="410" y="126" text-anchor="middle" font-family="system-ui" font-size="14" font-weight="700" fill="white">DuckDB CPG</text>

    <!-- DB icon -->
    <ellipse cx="410" cy="165" rx="30" ry="12" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5"/>
    <path d="M380 165 L380 195 Q380 207 410 207 Q440 207 440 195 L440 165" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5"/>
    <ellipse cx="410" cy="195" rx="30" ry="12" fill="none" stroke="#F59E0B" stroke-width="1.5"/>
    <text x="410" y="183" text-anchor="middle" font-family="system-ui" font-size="9" fill="#92400E">Code Property Graph</text>
  </g>

  <!-- ChromaDB Vector -->
  <g filter="url(#archShadow)">
    <rect x="540" y="100" width="180" height="120" rx="12" fill="white" stroke="#10B981" stroke-width="2"/>
    <rect x="540" y="100" width="180" height="40" rx="12" fill="url(#archGradGreen)"/>
    <rect x="540" y="128" width="180" height="12" fill="url(#archGradGreen)"/>
    <text x="630" y="126" text-anchor="middle" font-family="system-ui" font-size="14" font-weight="700" fill="white">ChromaDB</text>

    <!-- Vector icon -->
    <circle cx="610" cy="175" r="8" fill="#D1FAE5" stroke="#10B981" stroke-width="1.5"/>
    <circle cx="630" cy="165" r="8" fill="#D1FAE5" stroke="#10B981" stroke-width="1.5"/>
    <circle cx="650" cy="175" r="8" fill="#D1FAE5" stroke="#10B981" stroke-width="1.5"/>
    <circle cx="630" cy="190" r="8" fill="#D1FAE5" stroke="#10B981" stroke-width="1.5"/>
    <line x1="610" y1="175" x2="630" y2="165" stroke="#10B981" stroke-width="1"/>
    <line x1="630" y1="165" x2="650" y2="175" stroke="#10B981" stroke-width="1"/>
    <line x1="610" y1="175" x2="630" y2="190" stroke="#10B981" stroke-width="1"/>
    <line x1="650" y1="175" x2="630" y2="190" stroke="#10B981" stroke-width="1"/>
    <text x="630" y="210" text-anchor="middle" font-family="system-ui" font-size="9" fill="#065F46">Vector Embeddings</text>
  </g>

  <!-- Connections CodeGraph to DBs -->
  <path d="M280 180 L320 160" stroke="#94A3B8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M280 180 L540 160" stroke="#94A3B8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- GigaChat API Box -->
  <g filter="url(#archShadow)">
    <rect x="180" y="320" width="440" height="100" rx="12" fill="white" stroke="#2563EB" stroke-width="2"/>
    <rect x="180" y="320" width="440" height="40" rx="12" fill="url(#archGradBlue)"/>
    <rect x="180" y="348" width="440" height="12" fill="url(#archGradBlue)"/>

    <!-- GigaChat logo placeholder -->
    <circle cx="230" cy="340" r="15" fill="white"/>
    <text x="230" y="345" text-anchor="middle" font-family="system-ui" font-size="14" font-weight="700" fill="#2563EB">G</text>

    <text x="400" y="346" text-anchor="middle" font-family="system-ui" font-size="14" font-weight="700" fill="white">GigaChat API (Sber)</text>

    <!-- Security badge -->
    <rect x="200" y="375" width="180" height="30" rx="6" fill="#D1FAE5"/>
    <text x="290" y="395" text-anchor="middle" font-family="system-ui" font-size="11" font-weight="600" fill="#065F46">Данные не покидают РФ</text>

    <!-- Features -->
    <rect x="400" y="375" width="100" height="30" rx="6" fill="#EFF6FF"/>
    <text x="450" y="395" text-anchor="middle" font-family="system-ui" font-size="10" font-weight="500" fill="#1E3A8A">152-ФЗ</text>

    <rect x="510" y="375" width="100" height="30" rx="6" fill="#EFF6FF"/>
    <text x="560" y="395" text-anchor="middle" font-family="system-ui" font-size="10" font-weight="500" fill="#1E3A8A">ГОСТ Р</text>
  </g>

  <!-- Connection CodeGraph to GigaChat -->
  <path d="M180 260 L180 320" stroke="#2563EB" stroke-width="2" stroke-dasharray="6 3"/>
  <polygon points="175,315 180,325 185,315" fill="#2563EB"/>

  <text x="130" y="295" font-family="system-ui" font-size="10" fill="#64748B">API calls</text>

  <!-- Users -->
  <g filter="url(#archShadow)">
    <rect x="80" y="280" width="80" height="70" rx="8" fill="white" stroke="#94A3B8" stroke-width="1.5"/>
    <circle cx="120" cy="305" r="15" fill="#F1F5F9"/>
    <circle cx="120" cy="300" r="8" fill="#94A3B8"/>
    <path d="M105 318 Q120 330 135 318" fill="#94A3B8"/>
    <text x="120" y="343" text-anchor="middle" font-family="system-ui" font-size="9" fill="#64748B">Developers</text>
  </g>

  <!-- Arrow from users to server -->
  <path d="M120 280 L150 260" stroke="#94A3B8" stroke-width="1.5"/>
  <polygon points="148,265 155,258 152,268" fill="#94A3B8"/>

  <!-- Legend -->
  <g transform="translate(580, 280)">
    <rect width="160" height="120" rx="8" fill="white" stroke="#E2E8F0" stroke-width="1"/>
    <text x="80" y="20" text-anchor="middle" font-family="system-ui" font-size="11" font-weight="600" fill="#1E293B">Legend</text>

    <rect x="15" y="35" width="20" height="12" rx="3" fill="url(#archGradBlue)"/>
    <text x="45" y="45" font-family="system-ui" font-size="9" fill="#64748B">Core Services</text>

    <rect x="15" y="55" width="20" height="12" rx="3" fill="url(#archGradYellow)"/>
    <text x="45" y="65" font-family="system-ui" font-size="9" fill="#64748B">Graph Storage</text>

    <rect x="15" y="75" width="20" height="12" rx="3" fill="url(#archGradGreen)"/>
    <text x="45" y="85" font-family="system-ui" font-size="9" fill="#64748B">Vector Storage</text>

    <line x1="15" y1="100" x2="35" y2="100" stroke="#94A3B8" stroke-width="2" stroke-dasharray="4 2"/>
    <text x="45" y="103" font-family="system-ui" font-size="9" fill="#64748B">Data Flow</text>
  </g>

  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94A3B8"/>
    </marker>
  </defs>
</svg>
